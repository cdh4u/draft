



MMUSIC Working Group                                         C. Holmberg
Internet-Draft                                                  Ericsson
Updates: 3264 (if approved)                                H. Alvestrand
Intended status: Standards Track                                  Google
Expires: June 21, 2017                                       C. Jennings
                                                                   Cisco
                                                       December 18, 2016


 Negotiating Media Multiplexing Using the Session Description Protocol
                                 (SDP)
            draft-ietf-mmusic-sdp-bundle-negotiation-36.txt

Abstract

   This specification defines a new Session Description Protocol (SDP)
   Grouping Framework extension, 'BUNDLE'.  The extension can be used
   with the SDP Offer/Answer mechanism to negotiate the usage of a
   single transport for sending and receiving media, referred to as
   bundled media, specified by multiple SDP media descriptions ("m="
   sections).

   To assist endpoints in negotiating the use of bundling, this
   specification defines a new SDP attribute, 'bundle-only', which can
   be used to request that specific media is only used if bundled.  The
   specification also updates RFC 3264, to allow usage of zero port
   values without meaning that media is rejected.

   There are multiple ways to correlate the bundled RTP packets with the
   appropriate media descriptions.  This specification defines a new
   Real-time Transport Protocol (RTP) source description (SDES) item and
   a new RTP header extension that provides an additional way to do this
   correlation by using them to carry a value that associates the RTP/
   RTCP packets with a specific media description.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any




Holmberg, et al.          Expires June 21, 2017                 [Page 1]

Internet-Draft                Bundled media                December 2016


   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on June 21, 2017.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   4
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   5
   3.  Conventions . . . . . . . . . . . . . . . . . . . . . . . . .   6
   4.  Applicability Statement . . . . . . . . . . . . . . . . . . .   7
   5.  SDP Grouping Framework BUNDLE Extension . . . . . . . . . . .   7
   6.  SDP 'bundle-only' Attribute . . . . . . . . . . . . . . . . .   7
   7.  SDP Information Considerations  . . . . . . . . . . . . . . .   8
     7.1.  Connection Data (c=)  . . . . . . . . . . . . . . . . . .   9
     7.2.  Bandwidth (b=)  . . . . . . . . . . . . . . . . . . . . .   9
     7.3.  Attributes (a=) . . . . . . . . . . . . . . . . . . . . .   9
   8.  SDP Offer/Answer Procedures . . . . . . . . . . . . . . . . .   9
     8.1.  Mux Category Considerations . . . . . . . . . . . . . . .  10
     8.2.  Generating an SDP Offer that creates a BUNDLE group . . .  10
       8.2.1.  Suggesting the offerer BUNDLE-section . . . . . . . .  11



Holmberg, et al.          Expires June 21, 2017                 [Page 2]

Internet-Draft                Bundled media                December 2016


       8.2.2.  Example: Initial SDP Offer  . . . . . . . . . . . . .  11
     8.3.  Generating an SDP Answer  . . . . . . . . . . . . . . . .  12
       8.3.1.  Removing an 'm=' Section from a BUNDLE group  . . . .  13
       8.3.2.  Answerer BUNDLE-section selection . . . . . . . . . .  13
       8.3.3.  Keeping an 'm=' section in a BUNDLE group . . . . . .  14
       8.3.4.  Example: SDP Answer . . . . . . . . . . . . . . . . .  15
     8.4.  Offerer Processing of the SDP Answer  . . . . . . . . . .  16
     8.5.  Modifying the Session . . . . . . . . . . . . . . . . . .  16
   9.  Protocol Identification . . . . . . . . . . . . . . . . . . .  18
     9.1.  STUN, DTLS, SRTP  . . . . . . . . . . . . . . . . . . . .  18
   10. RTP Considerations  . . . . . . . . . . . . . . . . . . . . .  19
     10.1.  Single RTP Session . . . . . . . . . . . . . . . . . . .  19
       10.1.1.  Payload Type (PT) Value Reuse  . . . . . . . . . . .  19
     10.2.  Associating RTP/RTCP Streams With Correct SDP Media
            Description  . . . . . . . . . . . . . . . . . . . . . .  20
     10.3.  RTP/RTCP Multiplexing  . . . . . . . . . . . . . . . . .  21
       10.3.1.  SDP Offer/Answer Procedures  . . . . . . . . . . . .  21
   11. ICE Considerations  . . . . . . . . . . . . . . . . . . . . .  23
   12. DTLS Considerations . . . . . . . . . . . . . . . . . . . . .  24
   13. Update to RFC 3264  . . . . . . . . . . . . . . . . . . . . .  24
     13.1.  Original text of section 5.1 (2nd paragraph) of RFC 3264  25
     13.2.  New text replacing section 5.1 (2nd paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  25
     13.3.  Original text of section 8.2 (2nd paragraph) of RFC 3264  25
     13.4.  New text replacing section 8.2 (2nd paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  25
     13.5.  Original text of section 8.4 (6th paragraph) of RFC 3264  26
     13.6.  New text replacing section 8.4 (6th paragraph) of RFC
            3264 . . . . . . . . . . . . . . . . . . . . . . . . . .  26
   14. RTP/RTCP extensions for identification-tag transport  . . . .  26
     14.1.  RTCP MID SDES Item . . . . . . . . . . . . . . . . . . .  27
     14.2.  RTP SDES Header Extension For MID  . . . . . . . . . . .  28
   15. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  28
     15.1.  New SDES item  . . . . . . . . . . . . . . . . . . . . .  28
     15.2.  New RTP SDES Header Extension URI  . . . . . . . . . . .  29
     15.3.  New SDP Attribute  . . . . . . . . . . . . . . . . . . .  29
     15.4.  New SDP Group Semantics  . . . . . . . . . . . . . . . .  30
   16. Security Considerations . . . . . . . . . . . . . . . . . . .  30
   17. Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .  31
     17.1.  Example: Bundle Address Selection  . . . . . . . . . . .  31
     17.2.  Example: BUNDLE Extension Rejected . . . . . . . . . . .  33
     17.3.  Example: Offerer Adds A Media Description To A BUNDLE
            Group  . . . . . . . . . . . . . . . . . . . . . . . . .  34
     17.4.  Example: Offerer Moves A Media Description Out Of A
            BUNDLE Group . . . . . . . . . . . . . . . . . . . . . .  36
     17.5.  Example: Offerer Disables A Media Description Within A
            BUNDLE Group . . . . . . . . . . . . . . . . . . . . . .  38
   18. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  39



Holmberg, et al.          Expires June 21, 2017                 [Page 3]

Internet-Draft                Bundled media                December 2016


   19. Change Log  . . . . . . . . . . . . . . . . . . . . . . . . .  40
   20. References  . . . . . . . . . . . . . . . . . . . . . . . . .  48
     20.1.  Normative References . . . . . . . . . . . . . . . . . .  48
     20.2.  Informative References . . . . . . . . . . . . . . . . .  50
   Appendix A.  Design Considerations  . . . . . . . . . . . . . . .  50
     A.1.  UA Interoperability . . . . . . . . . . . . . . . . . . .  51
     A.2.  Usage of port number value zero . . . . . . . . . . . . .  52
     A.3.  B2BUA And Proxy Interoperability  . . . . . . . . . . . .  53
       A.3.1.  Traffic Policing  . . . . . . . . . . . . . . . . . .  53
       A.3.2.  Bandwidth Allocation  . . . . . . . . . . . . . . . .  53
     A.4.  Candidate Gathering . . . . . . . . . . . . . . . . . . .  54
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  54

1.  Introduction

   When multimedia communications are established, each transport
   reserved for an individual media stream consumes additional resources
   (especially when Interactive Connectivity Establishment (ICE)
   [RFC5245] is used).  For this reason, it is attractive to use the
   same transport for multiple media streams.

   This specification defines a way to use a single transport for
   sending and receiving media specified by multiple SDP media
   descriptions ("m=" sections, as referred to throughout the remainder
   of this specification).

   This specification defines a new SDP Grouping Framework [RFC5888]
   extension called 'BUNDLE'.  The extension can be used with the
   Session Description Protocol (SDP) Offer/Answer mechanism [RFC3264]
   to negotiate the usage of a BUNDLE group.  Within a BUNDLE group, a
   single BUNDLE transport is used for sending and receiving media
   specified by multiple "m=" sections.  This is referred to as bundled
   media.

   The offerer and answerer [RFC3264] use the BUNDLE extension to
   negotiate the attributes of the BUNDLE transport to be used for
   sending and receiving the bundled media specified by a BUNDLE group.
   Once the offerer and the answerer have negotiated a BUNDLE group,
   they can begin to use the same BUNDLE transport to send and receive
   media for all "m=" sections in the negotiated BUNDLE group.

   TODO: The three preceding paragraphs say basically the same thing.
   Can they be simplified?

   The mechanisms described in this specification are compatible with
   media transports that are identified by something other than a
   5-tuple (source address, source port, destination address,
   destination port, and transport-layer protocol).  For example,



Holmberg, et al.          Expires June 21, 2017                 [Page 4]

Internet-Draft                Bundled media                December 2016


   Interactive Connectivity Establishment (ICE) [RFC5245], which uses
   relay servers and multiple 5-tuples (candidate pairs) to provide a
   single media transport, where the transport is identified by a
   combination of local/remote username fragments.

   This specification also defines a new SDP attribute, 'bundle-only',
   which can be used to request that specific media is only used if kept
   within a BUNDLE group.  The specification also updates RFC 3264, to
   allow usage of zero port values without meaning that media is
   rejected.

   As defined in RFC 4566 [RFC4566], the semantics of assigning the same
   transport address to multiple "m=" sections are undefined, and there
   is no grouping defined by such means.  Instead, an explicit grouping
   mechanism needs to be used to express the intended semantics.  This
   specification provides such an extension.

   This specification also updates sections 5.1, 8.1 and 8.2 of RFC 3264
   [RFC3264].  The update allows an answerer to assign a non-zero port
   value to an "m=" section in an SDP answer, even if the "m=" section
   in the associated SDP offer contained a zero port value.

   This specification also defines a new Real-time Transport Protocol
   (RTP) [RFC3550] source description (SDES) item, 'MID', and a new RTP
   SDES header extension that can be used to associate RTP streams with
   media descriptions.

   SDP bodies can contain multiple BUNDLE groups.  A given BUNDLE
   transport MUST only be used by a single BUNDLE group.  The procedures
   in this specification apply independently to a given BUNDLE group.
   Note that, as defined in [RFC7656], all RTP based media flows using
   the same media transport belong to a single RTP session [RFC3550].

   The BUNDLE extension is backward compatible.  Endpoints that do not
   support the extension are expected to generate offers and answers
   without an SDP 'group:BUNDLE' attribute, and are expected to use
   distinct transports for each "m=" section within an offer and answer,
   according to the procedures in [RFC4566] and [RFC3264]

2.  Terminology

   "m=" section: SDP bodies contain one or more media descriptions,
   which are delineated by "m=" lines, hence the shorthand '"m="
   section'.

   5-tuple: A collection of the following values: source address, source
   port, destination address, destination port, and transport-layer
   protocol.



Holmberg, et al.          Expires June 21, 2017                 [Page 5]

Internet-Draft                Bundled media                December 2016


   Transport: A media transport as defined in [RFC7656].  Most commonly
   identified by a 5-tuple, using the address/port from "m=" and "c="
   lines, but may be identified by something else depending on the
   protocol(s) being used (e.g., ICE).

   BUNDLE group: A set of "m=" sections, created using an SDP Offer/
   Answer exchange, that will use (or are being proposed to use) the
   same transport.

   BUNDLE transport: The transport shared by all the "m=" sections in a
   BUNDLE group.

   Offerer BUNDLE-section: The "m=" section in the offer that contains
   attributes used by a BUNDLE transport.  May be different than the
   BUNDLE group's answerer BUNDLE-section.

   Answerer BUNDLE-section: The "m=" section in the answer that contains
   attributes used by a BUNDLE transport.  May be different than the
   BUNDLE group's offerer BUNDLE-section.

   TODO: As the spec is currently written, the offerer BUNDLE-section
   will always be the same as the answerer BUNDLE-section.  But people
   have stated otherwise on the mailing list, so I expect this will have
   to change.  See other TODO in "Answerer selection of offerer BUNDLE-
   section".

   Bundled "m=" section: An "m=" section that is part of a BUNDLE group.

   Bundle-only "m=" section: An offered bundled "m=" section that will
   only use a BUNDLE transport, not offering fallback to being non-
   bundled.  This is implemented using the SDP 'bundle-only' attribute,
   or the port field of the "m=" line.

   Bundled media: All media sent and received using the same BUNDLE
   transport.

   Identification-tag: A unique token value that is used to identify an
   "m=" section.  The SDP 'mid' attribute [RFC5888], contained with an
   "m=" section, is used for this purpose.  The session-level SDP
   'group' attribute [RFC5888] carries a list of identification-tags,
   identifying the "m=" sections contained in that particular BUNDLE
   group.

3.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this




Holmberg, et al.          Expires June 21, 2017                 [Page 6]

Internet-Draft                Bundled media                December 2016


   document are to be interpreted as described in BCP 14, RFC 2119
   [RFC2119].

4.  Applicability Statement

   The mechanism in this specification only applies to the Session
   Description Protocol (SDP) [RFC4566], when used together with the SDP
   offer/answer mechanism [RFC3264].  Declarative usage of SDP is out of
   scope of this document, and is thus undefined.

5.  SDP Grouping Framework BUNDLE Extension

   This section defines a new SDP Grouping Framework extension
   [RFC5888], 'BUNDLE'.  The BUNDLE extension can be used with the SDP
   Offer/Answer mechanism to negotiate the usage of a single transport
   for sending and receiving bundled media.

   The 5-tuple used by this transport to send bundled media MAY be the
   same as the 5-tuple used to receive bundled media, depending on
   whether symmetric RTP [RFC4961] is used.

   A BUNDLE transport MUST use the same transport-layer protocol (e.g.,
   UDP or TCP) for all BUNDLED media.

   The BUNDLE extension is indicated using an SDP 'group' attribute with
   a "BUNDLE" semantics value [RFC5888].  An identification-tag is used
   to identify each bundled "m=" section, and each identification-tag is
   listed in the SDP 'group:BUNDLE' attribute identification-tag list.
   Each "m=" section whose identification-tag is listed in the
   identification-tag list is in a BUNDLE group.

   SDP bodies MAY contain multiple BUNDLE groups.  Any given bundled
   "m=" section MUST NOT be contained in more than one BUNDLE group.

   NOTE: The order of the identification tags listed in the SDP
   'group:BUNDLE' attribute identification-tag list does not have to be
   the same as the order in which the corresponding "m=" sections occur
   in the SDP.

   Section 8 defines the detailed SDP Offer/Answer procedures for the
   BUNDLE extension.

6.  SDP 'bundle-only' Attribute

   This section defines a new SDP media-level attribute [RFC4566],
   'bundle-only'. 'bundle-only' is a property attribute [RFC4566], and
   hence has no value.




Holmberg, et al.          Expires June 21, 2017                 [Page 7]

Internet-Draft                Bundled media                December 2016


      Name: bundle-only

      Value: N/A

      Usage Level: media

      Charset Dependent: no

      Example:

        a=bundle-only


   In order to ensure that an "m=" section will only be used in a BUNDLE
   group, even if communicating with an answerer that does not support
   the BUNDLE extension, the offerer can assign a zero port value to the
   "m=" section.  According to [RFC3264] an answerer that is not BUNDLE-
   aware will reject such an "m=" section.  Thus, by including an SDP
   'bundle-only' attribute in such an "m=" section, the offerer can
   force the answerer to accept the "m=" section if and only if the
   answerer supports the BUNDLE extension and agrees to keep the "m="
   section in the BUNDLE group.

   NOTE: Once the answerer agrees to keep an "m=" section in a BUNDLE
   group, the offerer might not need to use the 'bundle-only' attribute
   in subsequent offers.  As described in Section 8.2, subsequent offers
   can accomplish the same functionality by not providing a unique
   address/port for an "m=" section, ensuring that the answerer will
   either keep the "m=" section in the BUNDLE group or reject it.

   The usage of the 'bundle-only' attribute is only defined for a
   bundled "m=" section with a zero port value, within an offer.  Other
   usage is unspecified.

   Section 8 defines the detailed SDP Offer/Answer procedures for the
   'bundle-only' attribute.

7.  SDP Information Considerations

   This section describes restrictions associated with the usage of SDP
   parameters within a BUNDLE group.  It also describes, when parameter
   and attribute values are present in multiple bundled "m=" sections,
   how to choose a value for the BUNDLE transport.








Holmberg, et al.          Expires June 21, 2017                 [Page 8]

Internet-Draft                Bundled media                December 2016


7.1.  Connection Data (c=)

   The "c=" line nettype value [RFC4566] in a bundled "m=" section MUST
   be 'IN'.

   The "c=" line addrtype value [RFC4566] in a bundled "m=" section MUST
   be 'IP4' or 'IP6'.  The same value MUST be used in each "m=" section
   in a given BUNDLE group.

   NOTE: Extensions to this specification can specify usage of the
   BUNDLE mechanism for other nettype and addrtype values than the ones
   listed above.

7.2.  Bandwidth (b=)

   An offerer and answerer MUST use the rules and restrictions defined
   in [I-D.ietf-mmusic-sdp-mux-attributes] for using the SDP bandwidth
   (b=) line in bundled "m=" sections.

7.3.  Attributes (a=)

   An offerer and answerer MUST use the rules and restrictions defined
   in [I-D.ietf-mmusic-sdp-mux-attributes] for using SDP attributes in
   bundled "m=" sections.

8.  SDP Offer/Answer Procedures

   This section describes the SDP Offer/Answer [RFC3264] procedures for:

   o  Negotiating and creating a BUNDLE group.

   o  Negotiating the properties of the BUNDLE transport.

   o  Adding an "m=" section to a BUNDLE group.

   o  Moving an "m=" section out of a BUNDLE group.

   o  Disabling an "m=" section within a BUNDLE group.

   The generic rules and procedures defined in [RFC3264] and [RFC5888]
   also apply to the BUNDLE extension.  For example, if an offer is
   rejected by the answerer, the previously negotiated SDP parameters
   and characteristics (including those associated with a BUNDLE group)
   apply.  Hence, if an offerer generates an offer in which the offerer
   creates a BUNDLE group, and the answerer rejects the offer, the
   BUNDLE group is discarded.





Holmberg, et al.          Expires June 21, 2017                 [Page 9]

Internet-Draft                Bundled media                December 2016


   The procedures in this section are independent of the media type or
   "m=" section proto value represented by a bundled "m=" section.
   Section 10 defines additional considerations for RTP based media.
   Section 6 defines additional considerations for the usage of the SDP
   'bundle-only' attribute.  Section 11 defines additional
   considerations for the usage of Interactive Connectivity
   Establishment (ICE) [I-D.ietf-ice-rfc5245bis] mechanism.

   SDP offers and answers can contain multiple BUNDLE groups.  The
   procedures in this section apply independently to a given BUNDLE
   group.

8.1.  Mux Category Considerations

   When an offerer places SDP attributes in a bundled "m=" section, and
   the offerer does not want to offer fallback to a non-BUNDLE
   transport, IDENTICAL and TRANSPORT mux category SDP attributes
   [I-D.ietf-mmusic-sdp-mux-attributes] MUST only be placed in the
   offerer BUNDLE-section for that BUNDLE group (that is, the "m="
   section identified by the first indentification-tag in the BUNDLE
   group's 'group' attribute in the offer).

   When an answerer places SDP attributes in a bundled "m=" section,
   IDENTICAL and TRANSPORT mux category SDP attributes MUST only be
   placed in the answerer BUNDLE-section for that BUNDLE group (that is,
   the "m=" section identified by the first indentification-tag in the
   BUNDLE group's 'group' attribute in the answer).

   NOTE: As bundled "m=" sections use the same transport, they also
   share the same IDENTICAL and TRANSPORT mux category SDP attributes
   and attribute values, so there is no need to place such SDP
   attributes in each "m=" section.  The attributes and attribute values
   are implicitly applied to each "m=" section in the BUNDLE group.

8.2.  Generating an SDP Offer that creates a BUNDLE group

   When an offerer generates an offer, in order to create a BUNDLE
   group, it MUST:

   o  Select one "m=" section to be the proposed offerer BUNDLE-section,
      which will carry the offer's BUNDLE transport attributes.
      Generate this "m=" section according to normal procedures.  Note
      that the answerer may select a different "m=" section to be the
      offerer BUNDLE-section.

   o  For each other "m=" section in the BUNDLE group:





Holmberg, et al.          Expires June 21, 2017                [Page 10]

Internet-Draft                Bundled media                December 2016


      *  If the offerer does not wish to offer fallback to a non-BUNDLE
         transport, include a 'bundle-only' attribute in the "m="
         section and use a zero port value on the "m=" line, omitting
         IDENTICAL and TRANSPORT category attributes as described in
         Section 8.1.

      *  Otherwise, generate the "m=" section according to normal
         procedures, in addition to the restrictions for IDENTICAL
         category attributes described by
         [I-D.ietf-mmusic-sdp-mux-attributes].

      *  TODO: If an "m=" section offers fallback to being non-bundled,
         should the offerer be prepared to receive media for that "m="
         section on both the BUNDLE transport and the fallback
         transport?  This seems consistent with other specs, but I can't
         find it explicitly stated anywhere.  Though, currently an issue
         preventing this is that the answerer gets to select the
         attributes the offerer will use for the BUNDLE transport.  If
         offering three "m=" sections, the media for the third "m="
         section might arrive on any of the three offered transports.

   o  Add an SDP 'group:BUNDLE' attribute to the offer.

   o  Place the identification-tag of each bundled "m=" section in the
      SDP 'group:BUNDLE' attribute identification-tag list, placing the
      offerer BUNDLE-section's identification-tag first in the list.

   NOTE: If the offerer assigns a zero port value to an "m=" section,
   but does not also include an SDP 'bundle-only' attribute in the "m="
   section, it is an indication that the offerer wants to disable the
   "m=" section [Section 8.5].

   [Section 17.1] shows an example of an initial offer.

8.2.1.  Suggesting the offerer BUNDLE-section

   In the offer, the offerer BUNDLE-section contains the attributes the
   offerer suggests to use for the BUNDLE transport.

   The offerer BUNDLE-section MUST NOT contain a zero port value or an
   SDP 'bundle-only' attribute.

8.2.2.  Example: Initial SDP Offer

   The example shows an initial SDP offer.  The offer includes two "m="
   sections in the SDP, and includes both in a BUNDLE group.  The audio
   "m=" section is used as the offerer BUNDLE-section (placed first in
   the SDP group:BUNDLE attribute identification-tag list).  The video



Holmberg, et al.          Expires June 21, 2017                [Page 11]

Internet-Draft                Bundled media                December 2016


   "m=" section does not use a 'bundle-only' attribute or a zero port
   value, and so it allows fallback to a non-BUNDLE transport, which
   would use port 10002 instead of port 10000.


   SDP Offer

     v=0
     o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
     s=
     c=IN IP4 atlanta.example.com
     t=0 0
     a=group:BUNDLE foo bar
     m=audio 10000 RTP/AVP 0 8 97
     b=AS:200
     a=mid:foo
     a=rtcp-mux
     a=rtpmap:0 PCMU/8000
     a=rtpmap:8 PCMA/8000
     a=rtpmap:97 iLBC/8000
     a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
     m=video 10002 RTP/AVP 31 32
     b=AS:1000
     a=mid:bar
     a=rtcp-mux
     a=rtpmap:31 H261/90000
     a=rtpmap:32 MPV/90000
     a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


8.3.  Generating an SDP Answer

   This section describes the procedures for generating an answer that
   contains a BUNDLE group.  The procedures here apply whether the
   BUNDLE group was created in the corresponding offer (as described in
   Section 8.2), or is being modified after a previous offer/answer
   exchange (as described in Section 8.5).

   When an answerer generates an answer that contains a BUNDLE group,
   the following general SDP grouping framework restrictions, defined in
   [RFC5888], also apply to the BUNDLE group:

   o  The answerer MUST NOT include a BUNDLE group in the answer, unless
      the offerer requested the BUNDLE group in the corresponding offer.

   o  The answerer MUST NOT include an "m=" section within a BUNDLE
      group, unless the offerer requested the "m=" section to be within
      that BUNDLE group in the corresponding offer.



Holmberg, et al.          Expires June 21, 2017                [Page 12]

Internet-Draft                Bundled media                December 2016


   If the answer contains a BUNDLE group, the answerer MUST:

   o  Select an offerer BUNDLE-section [Section 8.3.2].

   o  Add an SDP 'group:BUNDLE' attribute to the answer.

   o  Place the identification-tag of each bundled "m=" section in the
      SDP 'group:BUNDLE' attribute identification-tag list, placing the
      selected offerer BUNDLE-section's identification-tag first in the
      list.

   The answerer MAY modify the BUNDLE transport each time it generates
   an answer to an offer, by placing new transport attributes (e.g.,
   "m=" line port value) in the answerer BUNDLE-section.

8.3.1.  Removing an 'm=' Section from a BUNDLE group

   If the answerer does not want to or is not able to keep an "m="
   section within a BUNDLE group, it MUST:

   o  Move the "m=" section out of the BUNDLE group.  This is only
      allowed for an "m=" section that is not bundle-only; that is, an
      "m=" section that does not use the 'bundle-only' attribute, and
      that offers a fallback transport distinct from the BUNDLE
      transport.

   o  Otherwise, reject the "m=" section by placing a zero port in the
      "m=" field of the "m=" section in the answer, according to the
      procedures in [RFC3264].

   o  In addition, in either case above, the answerer MUST NOT place the
      identification-tag of the removed "m=" section in the SDP 'group'
      attribute identification-tag list of the BUNDLE group.

   NOTE: If a bundled "m=" section in an offer contains a zero port
   value, but the "m=" section does not contain an SDP 'bundle-only'
   attribute, it is an indication that the offerer wants to disable the
   "m=" section [Section 8.5].

8.3.2.  Answerer BUNDLE-section selection

   In an offer, a particular "m=" section is suggested as the offerer
   BUNDLE-section, which contains the offer's BUNDLE transport
   attributes.  [Section 8.2.1].  The answerer MUST check whether that
   "m=" section fulfills the following criteria:

   o  The answerer will not move the "m=" section out of the BUNDLE
      group in this answer [Section 8.3.1].



Holmberg, et al.          Expires June 21, 2017                [Page 13]

Internet-Draft                Bundled media                December 2016


   o  The answerer will not reject the "m=" section in this answer
      [Section 8.3.1].

   o  The "m=" section does not contain a zero port value.

   o  TODO: In the mailing list, we've agreed that if "a=bundle-only" is
      used, and the offerer proposes "Foo" as the offerer BUNDLE-
      section, the answerer is still allowed to reject "Foo".  But
      that's not possible given the above restriction.  We need to
      either revise the "answerer selection of offerer BUNDLE-section"
      logic or remove it.  If it were removed, that would imply that the
      offerer BUNDLE-section is always implicitly bundle-only.  An extra
      corner-casey situation that whatever we come up with should
      address, as a test case: the offerer wants to offer two "m="
      sections with fallback to being non-bundled, and two bundle-only
      "m=" sections.  The answerer wants to keep the bundle-only "m="
      sections in the BUNDLE group, but remove the "m=" sections that
      offer fallback.  How does this work?  If a bundle-only section
      requires a zero port, then there are only two ports in the offer,
      but three ports are needed.

   If all of the criteria above are fulfilled, the answerer MUST select
   the proposed offerer BUNDLE-section, which will also be used as the
   answerer BUNDLE-section.  This answerer MUST place this "m="
   section's identification-tag first in the identification-tag list of
   the 'group' attribute.

   If one or more of the criteria are not fulfilled, the answerer MUST
   select the next identification-tag in the identification-tag list,
   and perform the same criteria check for the "m=" section with that
   identification-tag.  If there are no more identification-tags in the
   identification-tag list, the answerer MUST discard the BUNDLE group,
   by ommitting that group from its answer entirely.  In addition,
   unless the answerer rejects the whole offer, the answerer MUST apply
   the answerer procedures for moving an "m=" section out of a BUNDLE
   group [Section 8.3.1] for each bundled "m=" section in the offer.

   [Section 17.1] shows an example of a BUNDLE-section selection.

8.3.3.  Keeping an 'm=' section in a BUNDLE group

   When an answerer generates an answer that contains a BUNDLE group, it
   MUST:

   o  Generate the answerer BUNDLE-section according to normal
      procedures.





Holmberg, et al.          Expires June 21, 2017                [Page 14]

Internet-Draft                Bundled media                December 2016


   o  Generate each other "m=" section using the same address/port
      combination as the answerer BUNDLE-section, omitting IDENTICAL and
      TRANSPORT category attributes as described in Section 8.1.

   The answerer MUST NOT place an SDP 'bundle-only' attribute in any
   "m=" section in an answer.

   TODO: Earlier we said that the usage of 'bundle-only' in an answer
   was not defined.  But now it's explicitly disallowed?  Need to make
   up our minds.

   NOTE: if the answerer keeps a bundle-only "m=" section within the
   BUNDLE group, it follows the same procedures as for any other "m="
   section kept within the BUNDLE group.

8.3.4.  Example: SDP Answer

   The example shows an SDP answer, based on the SDP offer in
   [Section 8.2.2].  The answers accepts both "m=" sections in the
   BUNDLE group.  Note that the "rtcp-mux" attribute, being in the
   IDENTICAL category, is ommitted for the video "m=" section, since
   it's not the answerer BUNDLE-section.


   SDP Answer

     v=0
     o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
     s=
     c=IN IP4 biloxi.example.com
     t=0 0
     a=group:BUNDLE foo bar
     m=audio 20000 RTP/AVP 0
     b=AS:200
     a=mid:foo
     a=rtcp-mux
     a=rtpmap:0 PCMU/8000
     a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
     m=video 20000 RTP/AVP 32
     b=AS:1000
     a=mid:bar
     a=rtpmap:32 MPV/90000
     a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid








Holmberg, et al.          Expires June 21, 2017                [Page 15]

Internet-Draft                Bundled media                December 2016


8.4.  Offerer Processing of the SDP Answer

   When an offerer receives an answer, if the answer contains a BUNDLE
   group, the offerer MUST check that any bundled "m=" section in the
   answer was indicated as bundled in the corresponding offer.  If there
   is no mismatch, the offerer MUST use the BUNDLE transport, defined by
   the offerer/answerer BUNDLE-sections selected by the answerer
   [Section 8.3.2], for each bundled "m=" section.

   TODO: The "MUST check" part is very incomplete.  There are plenty of
   invalid things that aren't being checked for, like shuffling "m="
   sections between groups.  Can't we just assume that an answerer will
   reject any offer that explicitly violates this specification?

   NOTE: As the answerer might reject one or more bundled "m=" sections,
   or move a bundled "m=" section out of a BUNDLE group, an "m=" section
   may be bundled in the offer but not the corresponding answer.

   If the answer does not contain a BUNDLE group, the offerer MUST
   process the answer as a normal answer.

8.5.  Modifying the Session

   When an offerer generates a subsequent offer that includes a
   previously negotiated BUNDLE group, it MUST follow the same
   procedures as when a BUNDLE group is initially created [Section 8.2],
   but with the following differences:

   o  Instead of using the 'bundle-only' attribute and a zero port value
      for bundle-only "m=" sections, omit the 'bundle-only' attribute
      and use an address/port that matches the offerer BUNDLE-section.

   o  TODO: What is the point of this rule?  It only complicates things.
      Why not just keep using 'bundle-only' in subsequent offers?  Also,
      this rule is not sufficient for media transports that aren't
      identified by a 5-tuple (such as ICE).  Should this rule be
      generalized to such transports?  Or should such transports be
      allowed to use "bundle-only" in subsequent offers?

   An "m=" section MAY initially be offered with fallback to a non-
   BUNDLE transport, but subsequently offered as bundle-only, or vice-
   versa.

   TODO: Previously, there was a list of conditions that allowed you to
   offer fallback: suggesting a new BUNDLE transport, adding an "m="
   section to a BUNDLE group, removing an "m=" section from a BUNDLE
   group, or disabling a bundled "m=" section.  Otherwise, it was




Holmberg, et al.          Expires June 21, 2017                [Page 16]

Internet-Draft                Bundled media                December 2016


   illegal to offer fallback.  I don't see the point of this
   restriction.  Do we need it?

   A subsequent offer MAY suggest a new BUNDLE transport, by placing new
   transport attributes (e.g., "m=" line port value) in the offerer
   BUNDLE-section.

   NOTE: Combining the above two MAYs, the offerer can place fallback
   transport parameters in any number of bundled "m=" sections (and
   place the previously selected transport parameters in any remaining
   bundled "m=" sections) if it wants to suggest multiple alternatives
   for the new BUNDLE transport.

   A subsequent offer MAY add "m=" sections to a BUNDLE group and/or
   remove them.  In addition, an "m=" section MAY be removed from one
   BUNDLE group and added to a different BUNDLE group in the same offer.

   TODO: Crazy corner case time.  Suppose I'm bundling A and B together
   in one group, and C and D together in a separate group.  Now, in a
   subsequent offer, I start bundling A/C together, and B/D together,
   and at the same time change the transport parameters for each BUNDLE
   group.  Depending on the protocols used, it may be ambiguous which
   underlying transport objects are being changed.  Basically: is A
   joining C's group, or is C joining A's group?  Practical example
   where this matters: ICE.  If I change the ufrag/password to do an ICE
   restart at the same time as I'm shuffling "m=" sections, ICE is
   supposed to send media using the previously selected candidate pair
   until a new pair is formed.  But *which* previously selected pair
   should it use for the "A/C" group?  The "A/B" group's previously
   selected pair, or the "C/D" group's?  The fundamental issue is that
   there's no reliable way to identify BUNDLE groups between subsequent
   offer/answer exchanges, if this kind of shuffling is allowed.

   NOTE: If a removed "m=" section was the previously selected offerer
   BUNDLE-section, the offerer needs to suggest a new offerer BUNDLE-
   section [Section 8.2.1].

   [Section 17.3] shows an example where an offerer sends an offer in
   order to add a bundled "m=" section to a BUNDLE group.

   [Section 17.4] shows an example of an offer for moving an "m="
   section out of a BUNDLE group.

   [Section 17.5] shows an example of an offer for disabling an "m="
   section within a BUNDLE group.






Holmberg, et al.          Expires June 21, 2017                [Page 17]

Internet-Draft                Bundled media                December 2016


9.  Protocol Identification

   The BUNDLE transport MUST use the same transport- layer protocol for
   each "m=" section in the BUNDLE group.  If bundled "m=" sections use
   different protocols on top of the transport-layer protocol, there
   MUST exist a publicly available specification which describes a
   mechanism, for this particular protocol combination, how to associate
   received data with the correct protocol.

   In addition, if received data can be associated with more than one
   bundled "m=" section, there MUST exist a publicly available
   specification which describes a mechanism for associating the
   received data with the correct "m=" section.

   This document describes a mechanism to identify the protocol of
   received data among the STUN, DTLS and SRTP protocols (in any
   combination), when UDP is used as transport-layer protocol, but does
   not describe how to identify different protocols transported on DTLS.
   While the mechanism is generally applicable to other protocols and
   transport-layer protocols, any such use requires further
   specification around how to multiplex multiple protocols on a given
   transport-layer protocol, and how to associate received data with the
   correct protocols.

9.1.  STUN, DTLS, SRTP

   Section 5.1.2 of [RFC5764] describes a mechanism to identify the
   protocol of a received packet among the STUN, Datagram Transport
   Layer Security (DTLS) and SRTP protocols (in any combination).  If an
   offer or answer includes bundled "m=" sections that represent these
   protocols, the offerer or answerer MUST support the mechanism
   described in [RFC5764], and no explicit negotiation is required in
   order to indicate support and usage of the mechanism.

   [RFC5764] does not describe how to identify different protocols
   transported on DTLS, only how to identify the DTLS protocol itself.
   If multiple protocols are transported on DTLS, there MUST exist a
   specification describing a mechanism for identifying each individual
   protocol.  In addition, if a received DTLS packet can be associated
   with more than one "m=" section, there MUST exist a specification
   which describes a mechanism for associating the received DTLS packet
   with the correct "m=" section.

   [Section 10.2] describes how to associate the packets in a received
   SRTP stream with the correct "m=" section.






Holmberg, et al.          Expires June 21, 2017                [Page 18]

Internet-Draft                Bundled media                December 2016


10.  RTP Considerations

10.1.  Single RTP Session

   All RTP-based media using a single BUNDLE transport belong to a
   single RTP session [RFC3550].

   Since a single RTP session is used for each bundle group, all "m="
   sections representing RTP-based media in a bundle group will share a
   single SSRC numbering space [RFC3550].

   The following rules and restrictions apply for a single RTP session:

   o  A specific payload type value can be used in multiple bundled "m="
      sections only if each codec associated with the payload type
      number shares an identical codec configuration [Section 10.1.1].

   o  The proto value in each bundled RTP-based "m=" section MUST be
      identical (e.g.  RTP/AVPF).

   o  The RTP MID header extension MUST be enabled, by including an SDP
      'extmap' attribute [RFC5285], with an 'urn:ietf:params:rtp-
      hdrext:sdes:mid' URI value, in each bundled RTP-based "m=" section
      in every offer and answer.

   o  A given SSRC MUST NOT transmit RTP packets using payload types
      that originate from different bundled "m=" sections.

   NOTE: The last bullet above is to avoid sending multiple media types
   from the same SSRC.  If transmission of multiple media types are done
   with time overlap, RTP and RTCP fail to function.  Even if done in
   proper sequence this causes RTP Timestamp rate switching issues
   [RFC7160].  However, once an SSRC has left the RTP session (by
   sending an RTCP BYE packet), that SSRC can be reused by another
   source (possibly associated with a different bundled "m=" section)
   after a delay of 5 RTCP reporting intervals (the delay is to ensure
   the SSRC has timed out, in case the RTCP BYE packet was lost
   [RFC3550]).

10.1.1.  Payload Type (PT) Value Reuse

   Multiple bundled "m=" sections might represent RTP based media.  As
   all RTP based media specified by a BUNDLE group belong to the same
   RTP session, in order for a given payload type value to be used
   inside more than one bundled "m=" section, all codecs associated with
   the payload type number MUST share an identical codec configuration.
   This means that the codecs MUST share the same media type, encoding
   name, clock rate and any parameter that can affect the codec



Holmberg, et al.          Expires June 21, 2017                [Page 19]

Internet-Draft                Bundled media                December 2016


   configuration and packetization.
   [I-D.ietf-mmusic-sdp-mux-attributes] lists SDP attributes, whose
   attribute values must be identical for all codecs that use the same
   payload type value.

10.2.  Associating RTP/RTCP Streams With Correct SDP Media Description

   As described in [RFC3550], RTP/RTCP packets are associated with RTP
   streams [RFC7656].  Each RTP stream is identified by an SSRC value,
   and each RTP/RTCP packet carries an SSRC value that is used to
   associate the packet with the correct RTP stream (an RTCP packet can
   carry multiple SSRC values, and might therefore be associated with
   multiple RTP streams).

   In order to be able to process received RTP/RTCP packets correctly it
   must be possible to associate an RTP stream with the correct "m="
   section, as the "m=" section and SDP attributes in the "m=" section
   contain information needed to process the packets.

   As all RTP streams associated with a BUNDLE group are using the same
   transport for sending and receiving RTP/RTCP packets, the transport
   cannot be used to associate an RTP stream with the correct "m="
   section.  In addition, multiple RTP streams might be associated with
   the same "m=" section.

   Also, as described in [Section 10.1.1], the same payload type value
   might be used by multiple RTP streams, in which case the payload type
   value cannot be used to associate an RTP stream with the correct "m="
   section.

   An offerer and answerer can inform each other which SSRC values they
   will use for an RTP stream by using the SDP 'ssrc' attribute
   [RFC5576].  However, an offerer will not know which SSRC values the
   answerer will use until the offerer has received the answer providing
   that information.  Due to this, before the offerer has received the
   answer, the offerer will not be able to associate an RTP stream with
   the correct "m=" section using the SSRC value associated with the RTP
   stream.  In addition, the offerer and answerer may start using new
   SSRC values mid-session, without informing each other using the SDP
   'ssrc' attribute.

   In order for an offerer and answerer to always be able to associate
   an RTP stream with the correct "m=" section, the offerer and answerer
   using the BUNDLE extension MUST support the mechanism defined in
   Section 14, where the offerer and answerer insert the identification-
   tag (provided by the remote peer) associated with an "m=" section in
   RTP and RTCP packets associated with a BUNDLE group.




Holmberg, et al.          Expires June 21, 2017                [Page 20]

Internet-Draft                Bundled media                December 2016


   The mapping from an SSRC to an identification-tag is carried in RTCP
   SDES packets or in RTP header extensions (Section 14).  Since a
   compound RTCP packet can contain multiple RTCP SDES packets, and each
   RTCP SDES packet can contain multiple chunks, an RTCP packet can
   contain several SSRC to identification-tag mappings.  The offerer and
   answerer maintain tables mapping RTP streams identified by SSRC, to
   a&#128;&#156;m=a&#128;&#156; lines identified by the identification-
   tag.  These tables are updated each time an RTP/RTCP packet
   containing one or more mappings from SSRC to identification-tag is
   received.  Note that the mapping from SSRC to identification-tag can
   change at any time during an RTP session.

   Once an offerer or answerer recieve an RTP/RTCP packet carrying an
   identification-tag and an SSRC value (an RTCP packet might carry
   multiple identification-tags and SSRC values), it creates a mapping
   between the SSRC value and the identification-tag, in order to
   associate the RTP stream with the "m=" section associated with the
   identification-tag.  Note that the mapping might change mid-session
   if, for a given SSRC value, a different identification-tag is
   provided in an RTP/RTCP packet.

   If an offerer and answerer is not able to associate an RTP stream
   with an "m=" section (using the mechanisms described in this section,
   or using other appropriate mechanism, e.g, based on the payload type
   value if it is unique to a single "m=" section), it MUST either drop
   the RTP/RTCP packets associated with the RTP stream, or process them
   in an application specific manner, once non-stream specific
   processing (e.g., related to congestion control) of the packets has
   occurred.  Note that RTCP packets can report on multiple RTP streams.

10.3.  RTP/RTCP Multiplexing

   Within a BUNDLE group, the offerer and answerer MUST enable RTP/RTCP
   multiplexing [RFC5761] for the RTP-based media specified by the
   BUNDLE group.

   When RTP/RTCP multiplexing is enabled, the same 5-tuple will be used
   for sending all RTP and RTCP packets for "m=" sections in the
   negotiated BUNDLE group.  The same 5-tuple MAY be used for receiving
   RTP packets and RTCP packets, depending on whether symmetric RTP
   [RFC4961] is used.

10.3.1.  SDP Offer/Answer Procedures

   This section describes how an offerer and answerer use the SDP 'rtcp-
   mux' attribute [RFC5761] and the SDP 'rtcp-mux-only' attribute
   [I-D.ietf-mmusic-mux-exclusive] to negotiate usage of RTP/RTCP
   multiplexing for RTP-based media specified by a BUNDLE group.



Holmberg, et al.          Expires June 21, 2017                [Page 21]

Internet-Draft                Bundled media                December 2016


   The procedures in this section only apply to RTP-based "m=" sections.

10.3.1.1.  Generating the Initial SDP Offer

   When an offerer generates an initial offer, the offerer MUST include
   an SDP 'rtcp-mux' attribute [RFC5761] in each bundled RTP-based "m="
   section in the offer, including any bundle-only "m=" section.  In
   addition, the offerer MUST include an SDP 'rtcp-mux-only' attribute
   [I-D.ietf-mmusic-mux-exclusive] in each RTP-based bundle-only "m="
   section, and MAY include an SDP 'rtcp-mux-only' attribute in other
   bundled RTP-based "m=" sections.

   NOTE: Whether the offerer includes an SDP 'rtcp-mux-only' attribute
   in a bundled "m=" section or not depends on whether the offerer
   supports fallback to usage of a separate port for RTCP, in case the
   answerer removes the "m=" section from the BUNDLE group.

   NOTE: If the offerer includes an SDP 'rtcp-mux' attribute in a
   bundled "m=" section, but does not include an SDP 'rtcp-mux-only'
   attribute in the "m=" section, the offerer can also include an SDP
   'rtcp' attribute [RFC3605] with the "m=" section in order to provide
   a fallback port for RTCP, as described in [RFC5761].  However, the
   fallback port will only be used in case the answerer removes the "m="
   section from the BUNDLE group.

   In the offer that creates a BUNDLE group, a fallback for non-
   multiplexed RTCP MUST be provided for each bundled RTP-based "m="
   section (excluding bundle-only "m=" sections).

10.3.1.2.  Generating the SDP Answer

   When an answerer generates an answer, if the answerer accepts one or
   more RTP-based "m=" sections within a BUNDLE group, the answerer MUST
   enable usage of RTP/RTCP multiplexing.  The answerer MUST include an
   SDP "rtcp-mux" attribute in each RTP-based "m=" section in the
   answer.  In addition, if an "m=" section in the corresponding offer
   contained an SDP "rtcp-mux-only" attribute, the answerer MUST include
   an SDP "rtcp-mux-only" attribute in the "m=" section in the answer.

   If an RTP-based "m=" section in the corresponding offer did not
   contain an SDP 'rtcp-mux' attribute, the answerer MUST remove the
   "m=" section from the BUNDLE group in the answer.

   If an RTP-based "m=" section in the corresponding offer contained an
   SDP "rtcp-mux-only" attribute, and if the answerer moves the "m="
   section out of the BUNDLE group in the answer Section 8.3.1, the
   answerer MUST still either enable RTP/RTCP multiplexing for the media




Holmberg, et al.          Expires June 21, 2017                [Page 22]

Internet-Draft                Bundled media                December 2016


   associated with the "m=" section, or reject the "m=" section
   Section 8.3.1.

   The answerer MUST NOT include an SDP 'rtcp' attribute in any bundled
   "m=" section in the answer.  When RTCP multiplexing is used, this
   attribute is meaningless for an answer.

10.3.1.3.  Offerer Processing of the SDP Answer

   When an offerer receives an answer, if the answerer has accepted the
   usage of RTP/RTCP multiplexing (see Section 10.3.1.2), the answerer
   follows the procedures for RTP/RTCP multiplexing defined in
   [RFC5761], using the negotiated BUNDLE transport.

   NOTE: It is considered a protocol error if the answerer has not
   accepted the usage of RTP/RTCP multiplexing for RTP-based "m="
   sections that the answerer included in the BUNDLE group.

10.3.1.4.  Modifying the Session

   When an offerer generates a subsequent offer, for each RTP-based "m="
   section that was previously added to the BUNDLE group the offerer
   MUST include an SDP 'rtcp-mux' attribute and an SDP 'rtcp-mux-only'
   attribute in the "m=" section in the same way it was previously done,
   unless the offerer wants to disable or remove the "m=" section from
   the BUNDLE group.

   If the offerer wants to add a bundled RTP-based "m=" section to the
   BUNDLE group, it includes an SDP 'rtcp-mux' attribute and an SDP
   'rtcp-mux-only' attribute in the "m=" section using the procedures in
   [Section 10.3.1.1].

11.  ICE Considerations

   This section describes how to use the BUNDLE grouping extension
   together with the Interactive Connectivity Establishment (ICE)
   mechanism [I-D.ietf-ice-rfc5245bis].

   The generic procedures for negotiating usage of ICE using SDP,
   defined in [I-D.ietf-mmusic-ice-sip-sdp], also apply to usage of ICE
   with BUNDLE, with the following exceptions:

   o  When a BUNDLE group is negotiated, the ICE agent MUST only perform
      processing for one media stream representing the entire BUNDLE
      group, and one component within that media stream (given that RTCP
      multiplexing will also be used).  This means that connectivity
      checks and keep-alives only need to be performed for the whole
      BUNDLE group, instead of per bundled "m=" section.



Holmberg, et al.          Expires June 21, 2017                [Page 23]

Internet-Draft                Bundled media                December 2016


   Support and usage of ICE mechanism together with the BUNDLE extension
   is OPTIONAL.

   NOTE: ICE uses attributes in the TRANSPORT category, which are
   subject to the restrictions in Section 8.1.

12.  DTLS Considerations

   One or more media streams within a BUNDLE group might use the
   Datagram Transport Layer Security (DTLS) protocol [RFC6347] in order
   to encrypt the data, or to negotiate encryption keys if another
   encryption mechanism is used to encrypt media.

   When DTLS is used within a BUNDLE group, the following rules apply:

   o  There MUST only be one DTLS association [RFC6347] used by the
      BUNDLE transport.

   o  Each usage of the DTLS association within the BUNDLE group MUST
      use the same mechanism for determining which endpoints (the
      offerer or answerer) become DTLS client and DTLS server.

   o  Each usage of the DTLS association within the BUNDLE group MUST
      use the same mechanism for determining whether an offer or answer
      will trigger the establishment of a new DTLS association, or
      whether an existing DTLS association will be used.

   o  If the DTLS client supports DTLS-SRTP [RFC5764] it MUST include
      the 'use_srtp' extension [RFC5764] in the DTLS ClientHello message
      [RFC5764], The client MUST include the extension even if the usage
      of DTLS-SRTP is not negotiated as part of the multimedia session
      (e.g., SIP session [RFC3261].

   NOTE: The inclusion of the 'use_srtp' extension during the initial
   DTLS handshake ensures that a DTLS renegotiation will not be required
   in order to include the extension, in case DTLS-SRTP encrypted media
   is added to the BUNDLE group later during the multimedia session.

13.  Update to RFC 3264

   This section replaces the text of the following sections of RFC 3264:

   o  Section 5.1 (Unicast Streams).

   o  Section 8.2 (Removing a Media Stream).

   o  Section 8.4 (Putting a Unicast Media Stream on Hold).




Holmberg, et al.          Expires June 21, 2017                [Page 24]

Internet-Draft                Bundled media                December 2016


13.1.  Original text of section 5.1 (2nd paragraph) of RFC 3264

   For recvonly and sendrecv streams, the port number and address in the
   offer indicate where the offerer would like to receive the media
   stream.  For sendonly RTP streams, the address and port number
   indirectly indicate where the offerer wants to receive RTCP reports.
   Unless there is an explicit indication otherwise, reports are sent to
   the port number one higher than the number indicated.  The IP address
   and port present in the offer indicate nothing about the source IP
   address and source port of RTP and RTCP packets that will be sent by
   the offerer.  A port number of zero in the offer indicates that the
   stream is offered but MUST NOT be used.  This has no useful semantics
   in an initial offer, but is allowed for reasons of completeness,
   since the answer can contain a zero port indicating a rejected stream
   (Section 6).  Furthermore, existing streams can be terminated by
   setting the port to zero (Section 8).  In general, a port number of
   zero indicates that the media stream is not wanted.

13.2.  New text replacing section 5.1 (2nd paragraph) of RFC 3264

   For recvonly and sendrecv streams, the port number and address in the
   offer indicate where the offerer would like to receive the media
   stream.  For sendonly RTP streams, the address and port number
   indirectly indicate where the offerer wants to receive RTCP reports.
   Unless there is an explicit indication otherwise, reports are sent to
   the port number one higher than the number indicated.  The IP address
   and port present in the offer indicate nothing about the source IP
   address and source port of RTP and RTCP packets that will be sent by
   the offerer.  A port number of zero in the offer by default indicates
   that the stream is offered but MUST NOT be used, but an extension
   mechanism might specify different semantics for the usage of a zero
   port value.  Furthermore, existing streams can be terminated by
   setting the port to zero (Section 8).  In general, a port number of
   zero by default indicates that the media stream is not wanted.

13.3.  Original text of section 8.2 (2nd paragraph) of RFC 3264

   A stream that is offered with a port of zero MUST be marked with port
   zero in the answer.  Like the offer, the answer MAY omit all
   attributes present previously, and MAY list just a single media
   format from amongst those in the offer.

13.4.  New text replacing section 8.2 (2nd paragraph) of RFC 3264

   A stream that is offered with a port of zero MUST by default be
   marked with port zero in the answer, unless an extension mechanism,
   which specifies semantics for the usage of a non-zero port value, is
   used.  If the stream is marked with port zero in the answer, the



Holmberg, et al.          Expires June 21, 2017                [Page 25]

Internet-Draft                Bundled media                December 2016


   answer MAY omit all attributes present previously, and MAY list just
   a single media format from amongst those in the offer.

13.5.  Original text of section 8.4 (6th paragraph) of RFC 3264

   RFC 2543 [10] specified that placing a user on hold was accomplished
   by setting the connection address to 0.0.0.0.  Its usage for putting
   a call on hold is no longer recommended, since it doesn't allow for
   RTCP to be used with held streams, doesn't work with IPv6, and breaks
   with connection oriented media.  However, it can be useful in an
   initial offer when the offerer knows it wants to use a particular set
   of media streams and formats, but doesn't know the addresses and
   ports at the time of the offer.  Of course, when used, the port
   number MUST NOT be zero, which would specify that the stream has been
   disabled.  An agent MUST be capable of receiving SDP with a
   connection address of 0.0.0.0, in which case it means that neither
   RTP nor RTCP should be sent to the peer.

13.6.  New text replacing section 8.4 (6th paragraph) of RFC 3264

   RFC 2543 [10] specified that placing a user on hold was accomplished
   by setting the connection address to 0.0.0.0.  Its usage for putting
   a call on hold is no longer recommended, since it doesn't allow for
   RTCP to be used with held streams, doesn't work with IPv6, and breaks
   with connection oriented media.  However, it can be useful in an
   initial offer when the offerer knows it wants to use a particular set
   of media streams and formats, but doesn't know the addresses and
   ports at the time of the offer.  Of course, when used, the port
   number MUST NOT be zero, if it would specify that the stream has been
   disabled.  However, an extension mechanism might specify different
   semantics of the zero port number usage.  An agent MUST be capable of
   receiving SDP with a connection address of 0.0.0.0, in which case it
   means that neither RTP nor RTCP should be sent to the peer.

14.  RTP/RTCP extensions for identification-tag transport

   SDP Offerers and Answerers [RFC3264] can uniquely identify "m="
   sections with identification-tags within SDP Offers and Answers,
   using the procedures in [RFC5888].

   This section defines a new RTCP SDES item [RFC3550], 'MID', which is
   used to carry identification-tags within RTCP SDES packets.  This
   section also defines a new RTP SDES header extension [RFC7941], which
   is used to carry the 'MID' RTCP SDES item in RTP packets.

   The SDES item and RTP SDES header extension make it possible for a
   receiver to associate each RTP stream with with a specific "m="
   section, which the receiver has identified with an identification-



Holmberg, et al.          Expires June 21, 2017                [Page 26]

Internet-Draft                Bundled media                December 2016


   tag, even if those "m=" sections are part of the same RTP session.
   The RTP SDES header extension also ensures that the media recipient
   gets the identification-tag upon receipt of the first decodable media
   and is able to associate the media with the correct application.

   A media recipient informs the media sender about the identification-
   tag that identifies an "m=" section through the use of an 'mid'
   attribute [RFC5888].  The media sender then inserts the
   identification-tag in RTCP and RTP packets sent to the media
   recipient.

   NOTE: This text above defines how identification-tags are carried in
   SDP Offers and Answers.  The usage of other signalling protocols for
   carrying identification-tags is not prevented, but the usage of such
   protocols is outside the scope of this document.

   [RFC3550] defines general procedures regarding the RTCP transmission
   interval.  The RTCP MID SDES item SHOULD be sent in the first few
   RTCP packets sent after joining the session, and SHOULD be sent
   regularly thereafter.  The exact number of RTCP packets in which this
   SDES item is sent is intentionally not specified here, as it will
   depend on the expected packet loss rate, the RTCP reporting interval,
   and the allowable overhead.

   The RTP SDES header extension for carrying the 'MID' RTCP SDES SHOULD
   be included in some RTP packets at the start of the session and
   whenever the SSRC changes.  It might also be useful to include the
   header extension in RTP packets that comprise access points in the
   media (e.g., with video I-frames).  The exact number of RTP packets
   in which this header extension is sent is intentionally not specified
   here, as it will depend on expected packet loss rate and loss
   patterns, the overhead the application can tolerate, and the
   importance of immediate receipt of the identification-tag.

   For robustness purposes, endpoints need to be prepared for situations
   where the reception of the identification-tag is delayed, and SHOULD
   NOT terminate sessions in such cases, as the identification-tag is
   likely to arrive soon.

14.1.  RTCP MID SDES Item


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      MID=TBD  |     length    | identification-tag          ...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+




Holmberg, et al.          Expires June 21, 2017                [Page 27]

Internet-Draft                Bundled media                December 2016


   The identification-tag payload is UTF-8 encoded, as in SDP.

   The identification-tag is not zero terminated.

   [RFC EDITOR NOTE: Please replace TBD with the assigned SDES
   identifier value.]

14.2.  RTP SDES Header Extension For MID

   The payload, containing the identification-tag, of the RTP SDES
   header extension element can be encoded using either the one-byte or
   two-byte header [RFC7941].  The identification-tag payload is UTF-8
   encoded, as in SDP.

   The identification-tag is not zero terminated.  Note, that the set of
   header extensions included in the packet needs to be padded to the
   next 32-bit boundary using zero bytes [RFC5285].

   As the identification-tag is included in either an RTCP SDES item or
   an RTP SDES header extension, or both, there should be some
   consideration about the packet expansion caused by the
   identification-tag.  To avoid Maximum Transmission Unit (MTU) issues
   for the RTP packets, the header extension's size needs to be taken
   into account when encoding the media.

   It is recommended that the identification-tag is kept short.  Due to
   the properties of the RTP header extension mechanism, when using the
   one-byte header, a tag that is 1-3 bytes will result in a minimal
   number of 32-bit words used for the RTP SDES header extension, in
   case no other header extensions are included at the same time.  Note,
   do take into account that some single characters when UTF-8 encoded
   will result in multiple octets.  The identification-tag MUST NOT
   contain any user information, and applications SHALL avoid generating
   the identification-tag using a pattern that enables application
   identification.

15.  IANA Considerations

15.1.  New SDES item

   [RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this
   document.]

   [RFC EDITOR NOTE: Please replace TBD with the assigned SDES
   identifier value.]

   This document adds the MID SDES item to the IANA "RTP SDES item
   types" registry as follows:



Holmberg, et al.          Expires June 21, 2017                [Page 28]

Internet-Draft                Bundled media                December 2016


     Value:     TBD
     Abbrev.:   MID
     Name:      Media Identification
     Reference: RFCXXXX


15.2.  New RTP SDES Header Extension URI

   [RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this
   document.]

   This document defines a new extension URI in the RTP SDES Compact
   Header Extensions sub-registry of the RTP Compact Header Extensions
   registry sub-registry, according to the following data:


  Extension URI: urn:ietf:params:rtp-hdrext:sdes:mid
  Description:   Media identification
  Contact:       christer.holmberg@ericsson.com
  Reference:     RFCXXXX

  The SDES item does not reveal privacy information about the users.
  It is simply used to associate RTP-based media with the correct SDP
  media description ("m=" section) in the SDP used to negotiate the media.

  The purpose of the extension is for the offerer to be able to
  associate received multiplexed RTP-based media before the offerer
  receives the associated SDP answer.


15.3.  New SDP Attribute

   [RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this
   document.]

   This document defines a new SDP media-level attribute, 'bundle-only',
   according to the following data:














Holmberg, et al.          Expires June 21, 2017                [Page 29]

Internet-Draft                Bundled media                December 2016


     Attribute name:     bundle-only
     Type of attribute:  media
     Subject to charset: No
     Purpose:            Request a media description to be accepted
                         in the answer only if kept within a BUNDLE
                         group by the answerer.
     Appropriate values: N/A
     Contact name:       Christer Holmberg
     Contact e-mail:     christer.holmberg@ericsson.com
     Reference:          RFCXXXX
     Mux category:       NORMAL


15.4.  New SDP Group Semantics

   [RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this
   document.]

   This document registers the following semantics with IANA in the
   "Semantics for the "group" SDP Attribute" subregistry (under the
   "Session Description Protocol (SDP) Parameters" registry:


       Semantics                              Token   Reference
       -------------------------------------  ------  ---------
       Media bundling                         BUNDLE  [RFCXXXX]


16.  Security Considerations

   The security considerations defined in [RFC3264] and [RFC5888] apply
   to the BUNDLE extension.  Bundling does not change which information
   flows over the network but only changes which transports that
   information is flowing on and thus has very little impact on the
   security of the RTP sessions.

   When the BUNDLE extension is used, a single set of security
   credentials might be used for all media streams specified by a BUNDLE
   group.

   When the BUNDLE extension is used, the number of SSRC values within a
   single RTP session increases, which increases the risk of SSRC
   collision.  [RFC4568] describes how SSRC collision may weaken SRTP
   and SRTCP encryption in certain situations.







Holmberg, et al.          Expires June 21, 2017                [Page 30]

Internet-Draft                Bundled media                December 2016


17.  Examples

17.1.  Example: Bundle Address Selection

   The example below shows:

   o  An offer, in which the offerer places a unique address/port
      combination in each bundled "m=" section within the BUNDLE group.

   o  An answer, in which the answerer selects the offerer BUNDLE
      address, and then selects its own BUNDLE transport address/port
      and places it in each bundled "m=" section within the BUNDLE
      group.






































Holmberg, et al.          Expires June 21, 2017                [Page 31]

Internet-Draft                Bundled media                December 2016


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 10002 RTP/AVP 31 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid






Holmberg, et al.          Expires June 21, 2017                [Page 32]

Internet-Draft                Bundled media                December 2016


17.2.  Example: BUNDLE Extension Rejected

   The example below shows:

   o  An offer, in which the offerer places a unique address/port
      combination in each bundled "m=" section within the BUNDLE group.

   o  An answer, in which the answerer rejects the offered BUNDLE group,
      and places a unique address/port in each "m=" section (following
      normal RFC 3264 procedures).









































Holmberg, et al.          Expires June 21, 2017                [Page 33]

Internet-Draft                Bundled media                December 2016


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 10002 RTP/AVP 31 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       m=video 30000 RTP/AVP 32
       b=AS:1000
       a=rtcp-mux
       a=rtpmap:32 MPV/90000



17.3.  Example: Offerer Adds A Media Description To A BUNDLE Group

   The example below shows:





Holmberg, et al.          Expires June 21, 2017                [Page 34]

Internet-Draft                Bundled media                December 2016


   o  A subsequent offer (the BUNDLE group has been created as part of a
      previous offer/answer exchange), in which the offerer adds a new
      "m=" section, identified by the "zen" identification-tag, to a
      previously negotiated BUNDLE group, places a unique address/port
      in the added "m=" section, and places the previously selected
      BUNDLE transport address/port in each of the other bundled "m="
      sections within the BUNDLE group.

   o  An answer, in which the answerer places its BUNDLE tranport
      address/port in each bundled "m=" section (including the newly
      added "m=" section) within the BUNDLE group.


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar zen
       m=audio 10000 RTP/AVP 0 8 97
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 10000 RTP/AVP 31 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 66
       b=AS:1000
       a=mid:zen
       a=rtcp-mux
       a=rtpmap:66 H261/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com



Holmberg, et al.          Expires June 21, 2017                [Page 35]

Internet-Draft                Bundled media                December 2016


       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar zen
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 66
       b=AS:1000
       a=mid:zen
       a=rtcp-mux
       a=rtpmap:66 H261/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid



17.4.  Example: Offerer Moves A Media Description Out Of A BUNDLE Group

   The example below shows:

   o  A subsequent offer (the BUNDLE group has been created as part of a
      previous offer/answer transaction), in which the offerer moves a
      bundled "m=" section out of a BUNDLE group, places a unique
      address/port in the moved "m=" section, and places the previously
      selected BUNDLE transport address/port in each other bundled "m="
      section within the BUNDLE group.

   o  An answer, in which the answerer moves the "m=" section out of the
      BUNDLE group, places a unique address/port in the moved "m="
      section, and places its BUNDLE transport address/port in each of
      the remaining bundled "m=" sections within the BUNDLE group.


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com



Holmberg, et al.          Expires June 21, 2017                [Page 36]

Internet-Draft                Bundled media                December 2016


       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 10000 RTP/AVP 31 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 50000 RTP/AVP 66
       b=AS:1000
       a=mid:zen
       a=rtcp-mux
       a=rtpmap:66 H261/90000


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 60000 RTP/AVP 66
       b=AS:1000
       a=mid:zen
       a=rtcp-mux



Holmberg, et al.          Expires June 21, 2017                [Page 37]

Internet-Draft                Bundled media                December 2016


       a=rtpmap:66 H261/90000



17.5.  Example: Offerer Disables A Media Description Within A BUNDLE
       Group

   The example below shows:

   o  A subsequent offer (the BUNDLE group has been created as part of a
      previous offer/answer transaction), in which the offerer disables
      a bundled "m=" section within a BUNDLE group, assigns a zero port
      number to the disabled "m=" section, and places the previously
      selected BUNDLE transport address/port in each of the other
      bundled "m=" sections within the BUNDLE group.

   o  An answer, in which the answerer moves the disabled "m=" section
      out of the BUNDLE group, assigns a zero port value to the disabled
      "m=" section, and places its BUNDLE transport address/port in each
      of the remaining bundled "m=" sections within the BUNDLE group.


   SDP Offer (1)

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 10000 RTP/AVP 0 8 97
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=rtpmap:8 PCMA/8000
       a=rtpmap:97 iLBC/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 10000 RTP/AVP 31 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:31 H261/90000
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 0 RTP/AVP 66
       a=mid:zen
       a=rtpmap:66 H261/90000



Holmberg, et al.          Expires June 21, 2017                [Page 38]

Internet-Draft                Bundled media                December 2016


   SDP Answer (2)

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       a=group:BUNDLE foo bar
       m=audio 20000 RTP/AVP 0
       b=AS:200
       a=mid:foo
       a=rtcp-mux
       a=rtpmap:0 PCMU/8000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 20000 RTP/AVP 32
       b=AS:1000
       a=mid:bar
       a=rtcp-mux
       a=rtpmap:32 MPV/90000
       a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
       m=video 0 RTP/AVP 66
       a=mid:zen
       a=rtpmap:66 H261/90000



18.  Acknowledgements

   The usage of the SDP grouping extension for negotiating bundled media
   is based on a similar alternatives proposed by Harald Alvestrand and
   Cullen Jennings.  The BUNDLE extension described in this document is
   based on the different alternative proposals, and text (e.g., SDP
   examples) have been borrowed (and, in some cases, modified) from
   those alternative proposals.

   The SDP examples are also modified versions from the ones in the
   Alvestrand proposal.

   Thanks to Paul Kyzivat, Martin Thomson, Flemming Andreasen, Thomas
   Stach, Ari Keranen, Adam Roach, Christian Groves, Roman Shpount,
   Suhas Nandakumar, Nils Ohlmeier, Jens Guballa, Raju Makaraju and
   Justin Uberti for reading the text, and providing useful feedback.

   Thanks to Magnus Westerlund, Colin Perkins and Jonathan Lennox for
   providing help and text on the RTP/RTCP procedures.

   Thanks to Spotify for providing music for the countless hours of
   document editing.



Holmberg, et al.          Expires June 21, 2017                [Page 39]

Internet-Draft                Bundled media                December 2016


19.  Change Log

   [RFC EDITOR NOTE: Please remove this section when publishing]

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-35

   o  Editorial changes on RTP streaming mapping section based on
      comments from Colin Perkins.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-34

   o  RTP streams, instead of RTP packets, are associated with m- lines.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-33

   o  Editorial changes based on comments from Eric Rescorla and Cullen
      Jennings:

   o  - Changes regarding usage of RTP/RTCP multiplexing attributes.

   o  - Additional text regarding associating RTP/RTCP packets with SDP
      m- lines.

   o  - Reference correction.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-32

   o  Editorial changes based on comments from Eric Rescorla and Cullen
      Jennings:

   o  - Justification for mechanism added to Introduction.

   o  - Clarify that the order of m- lines in the group:BUNDLE attribute
      does not have to be the same as the order in which the m- lines
      are listed in the SDP.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-31

   o  Editorial changes based on GitHub Pull requests by Martin Thomson:

   o  - https://github.com/cdh4u/draft-sdp-bundle/pull/2

   o  - https://github.com/cdh4u/draft-sdp-bundle/pull/1

   o  Editorial change based on comment from Diederick Huijbers (9th
      July 2016).





Holmberg, et al.          Expires June 21, 2017                [Page 40]

Internet-Draft                Bundled media                December 2016


   o  Changes based on comments from Flemming Andreasen (21st June
      2016):

   o  - Mux category for SDP bundle-only attribute added.

   o  - Mux category considerations editorial clarification.

   o  - Editorial changes.

   o  RTP SDES extension according to draft-ietf-avtext-sdes-hdr-ext.

   o  Note whether Design Considerations appendix is to be kept removed:

   o  - Appendix is kept within document.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-30

   o  Indicating in the Abstract and Introduction that the document
      updates RFC 3264.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-29

   o  Change based on WGLC comment from Colin Perkins.

   o  - Clarify that SSRC can be reused by another source after a delay
      of 5 RTCP reporting intervals.

   o  Change based on WGLC comment from Alissa Cooper.

   o  - IANA registry name fix.

   o  - Additional IANA registration information added.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-28

   o  - Alignment with exclusive mux procedures.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-27

   o  - Yet another terminology change.

   o  - Mux category considerations added.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-26

   o  - ICE considerations modified: ICE-related SDP attributes only
      added to the bundled m- line representing the selected BUNDLE
      address.



Holmberg, et al.          Expires June 21, 2017                [Page 41]

Internet-Draft                Bundled media                December 2016


   o  - Reference to draft-ietf-mmusic-ice-sip-sdp added.

   o  - Reference to RFC 5245 replaced with reference to draft-ietf-ice-
      rfc5245bis.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-25

   o  - RTP/RTCP mux procedures updated with exclusive RTP/RTCP mux
      considerations.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-24

   o  - Reference and procedures associated with exclusive RTP/RTCP mux
      added

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-23

   o  - RTCP-MUX mandatory for bundled RTP m- lines

   o  - Editorial fixes based on comments from Flemming Andreasen

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-22

   o  - Correction of Ari's family name

   o  - Editorial fixes based on comments from Thomas Stach

   o  - RTP/RTCP correction based on comment from Magnus Westerlund

   o  -- http://www.ietf.org/mail-archive/web/mmusic/current/
      msg14861.html

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-21

   o  - Correct based on comment from Paul Kyzivat

   o  -- 'received packets' replaced with 'received data'

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-20

   o  - Clarification based on comment from James Guballa

   o  - Clarification based on comment from Flemming Andreasen

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-19

   o  - DTLS Considerations section added.




Holmberg, et al.          Expires June 21, 2017                [Page 42]

Internet-Draft                Bundled media                December 2016


   o  - BUNDLE semantics added to the IANA Considerations

   o  - Changes based on WGLC comments from Adam Roach

   o  -- http://www.ietf.org/mail-archive/web/mmusic/current/
      msg14673.html

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-18

   o  - Changes based on agreements at IETF#92

   o  -- BAS Offer removed, based on agreement at IETF#92.

   o  -- Procedures regarding usage of SDP "b=" line is replaced with a
      reference to to draft-ietf-mmusic-sdp-mux-attributes.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-17

   o  - Editorial changes based on comments from Magnus Westerlund.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-16

   o  - Modification of RTP/RTCP multiplexing section, based on comments
      from Magnus Westerlund.

   o  - Reference updates.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-15

   o  - Editorial fix.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-14

   o  - Editorial changes.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-13

   o  Changes to allow a new suggested offerer BUNDLE address to be
      assigned to each bundled m- line.

   o  Changes based on WGLC comments from Paul Kyzivat

   o  - Editorial fixes

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-12

   o  Usage of SDP 'extmap' attribute added




Holmberg, et al.          Expires June 21, 2017                [Page 43]

Internet-Draft                Bundled media                December 2016


   o  SDP 'bundle-only' attribute scoped with "m=" sections with a zero
      port value

   o  Changes based on WGLC comments from Thomas Stach

   o  - ICE candidates not assigned to bundle-only m- lines with a zero
      port value

   o  - Editorial changes

   o  Changes based on WGLC comments from Colin Perkins

   o  - Editorial changes:

   o  -- "RTP SDES item" -> "RTCP SDES item"

   o  -- "RTP MID SDES item" -> "RTCP MID SDES item"

   o  - Changes in section 10.1.1:

   o  -- "SHOULD NOT" -> "MUST NOT"

   o  -- Additional text added to the Note

   o  - Change to section 13.2:

   o  -- Clarify that mid value is not zero terminated

   o  - Change to section 13.3:

   o  -- Clarify that mid value is not zero terminated

   o  -- Clarify padding

   o  Changes based on WGLC comments from Paul Kyzivat

   o  - Editorial changes:

   o  Changes based on WGLC comments from Jonathan Lennox

   o  - Editorial changes:

   o  - Defintion of SDP bundle-only attribute alligned with structure
      in 4566bis draft

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-11

   o  Editorial corrections based on comments from Harald Alvestrand.



Holmberg, et al.          Expires June 21, 2017                [Page 44]

Internet-Draft                Bundled media                December 2016


   o  Editorial corrections based on comments from Cullen Jennings.

   o  Reference update (RFC 7160).

   o  Clarification about RTCP packet sending when RTP/RTCP multiplexing
      is not used (http://www.ietf.org/mail-archive/web/mmusic/current/
      msg13765.html).

   o  Additional text added to the Security Considerations.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-10

   o  SDP bundle-only attribute added to IANA Considerations.

   o  SDES item and RTP header extension added to Abstract and
      Introduction.

   o  Modification to text updating section 8.2 of RFC 3264.

   o  Reference corrections.

   o  Editorial corrections.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-09

   o  Terminology change: "bundle-only attribute assigned to m= line" to
      "bundle-only attribute associated with m= line".

   o  Editorial corrections.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-08

   o  Editorial corrections.

   o  - "of"->"if" (8.3.2.5).

   o  - "optional"->"OPTIONAL" (9.1).

   o  - Syntax/ABNF for 'bundle-only' attribute added.

   o  - SDP Offer/Answer sections merged.

   o  - 'Request new offerer BUNDLE address' section added

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-07

   o  OPEN ISSUE regarding Receiver-ID closed.




Holmberg, et al.          Expires June 21, 2017                [Page 45]

Internet-Draft                Bundled media                December 2016


   o  - RTP MID SDES Item.

   o  - RTP MID Header Extension.

   o  OPEN ISSUE regarding insertion of SDP 'rtcp' attribute in answers
      closed.

   o  - Indicating that, when rtcp-mux is used, the answerer MUST NOT
      include an 'rtcp' attribute in the answer, based on the procedures
      in section 5.1.3 of RFC 5761.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-06

   o  Draft title changed.

   o  Added "SDP" to section names containing "Offer" or "Answer".

   o  Editorial fixes based on comments from Paul Kyzivat
      (http://www.ietf.org/mail-archive/web/mmusic/current/
      msg13314.html).

   o  Editorial fixed based on comments from Colin Perkins
      (http://www.ietf.org/mail-archive/web/mmusic/current/
      msg13318.html).

   o  - Removed text about extending BUNDLE to allow multiple RTP
      sessions within a BUNDLE group.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-05

   o  Major re-structure of SDP Offer/Answer sections, to align with RFC
      3264 structure.

   o  Additional definitions added.

   o  - Shared address.

   o  - Bundled "m=" section.

   o  - Bundle-only "m=" section.

   o  - Offerer suggested BUNDLE mid.

   o  - Answerer selected BUNDLE mid.

   o  Q6 Closed (IETF#88): An Offerer MUST NOT assign a shared address
      to multiple "m=" sections until it has received an SDP Answer
      indicating support of the BUNDLE extension.



Holmberg, et al.          Expires June 21, 2017                [Page 46]

Internet-Draft                Bundled media                December 2016


   o  Q8 Closed (IETF#88): An Offerer can, before it knows whether the
      Answerer supports the BUNDLE extension, assign a zero port value
      to a 'bundle-only' "m=" section.

   o  SDP 'bundle-only' attribute section added.

   o  Connection data nettype/addrtype restrictions added.

   o  RFC 3264 update section added.

   o  Indicating that a specific payload type value can be used in
      multiple "m=" sections, if the value represents the same codec
      configuration in each "m=" section.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-04

   o  Updated Offerer procedures (http://www.ietf.org/mail-archive/web/
      mmusic/current/msg12293.html).

   o  Updated Answerer procedures (http://www.ietf.org/mail-archive/web/
      mmusic/current/msg12333.html).

   o  Usage of SDP 'bundle-only' attribute added.

   o  Reference to Trickle ICE document added.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-02

   o  Mechanism modified, to be based on usage of SDP Offers with both
      different and identical port number values, depending on whether
      it is known if the remote endpoint supports the extension.

   o  Cullen Jennings added as co-author.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-01

   o  No changes.  New version due to expiration.

   Changes from draft-ietf-mmusic-sdp-bundle-negotiation-00

   o  No changes.  New version due to expiration.

   Changes from draft-holmberg-mmusic-sdp-multiplex-negotiation-00

   o  Draft name changed.

   o  Harald Alvestrand added as co-author.




Holmberg, et al.          Expires June 21, 2017                [Page 47]

Internet-Draft                Bundled media                December 2016


   o  "Multiplex" terminology changed to "bundle".

   o  Added text about single versus multiple RTP Sessions.

   o  Added reference to RFC 3550.

20.  References

20.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, DOI 10.17487/
              RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC3264]  Rosenberg, J. and H. Schulzrinne, "An Offer/Answer Model
              with Session Description Protocol (SDP)", RFC 3264, DOI 10
              .17487/RFC3264, June 2002,
              <http://www.rfc-editor.org/info/rfc3264>.

   [RFC3550]  Schulzrinne, H., Casner, S., Frederick, R., and V.
              Jacobson, "RTP: A Transport Protocol for Real-Time
              Applications", STD 64, RFC 3550, DOI 10.17487/RFC3550,
              July 2003, <http://www.rfc-editor.org/info/rfc3550>.

   [RFC3605]  Huitema, C., "Real Time Control Protocol (RTCP) attribute
              in Session Description Protocol (SDP)", RFC 3605, DOI 10
              .17487/RFC3605, October 2003,
              <http://www.rfc-editor.org/info/rfc3605>.

   [RFC4566]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", RFC 4566, DOI 10.17487/RFC4566,
              July 2006, <http://www.rfc-editor.org/info/rfc4566>.

   [RFC4961]  Wing, D., "Symmetric RTP / RTP Control Protocol (RTCP)",
              BCP 131, RFC 4961, DOI 10.17487/RFC4961, July 2007,
              <http://www.rfc-editor.org/info/rfc4961>.

   [RFC5245]  Rosenberg, J., "Interactive Connectivity Establishment
              (ICE): A Protocol for Network Address Translator (NAT)
              Traversal for Offer/Answer Protocols", RFC 5245, DOI 10
              .17487/RFC5245, April 2010,
              <http://www.rfc-editor.org/info/rfc5245>.

   [RFC5285]  Singer, D. and H. Desineni, "A General Mechanism for RTP
              Header Extensions", RFC 5285, DOI 10.17487/RFC5285, July
              2008, <http://www.rfc-editor.org/info/rfc5285>.




Holmberg, et al.          Expires June 21, 2017                [Page 48]

Internet-Draft                Bundled media                December 2016


   [RFC5761]  Perkins, C. and M. Westerlund, "Multiplexing RTP Data and
              Control Packets on a Single Port", RFC 5761, DOI 10.17487/
              RFC5761, April 2010,
              <http://www.rfc-editor.org/info/rfc5761>.

   [RFC5764]  McGrew, D. and E. Rescorla, "Datagram Transport Layer
              Security (DTLS) Extension to Establish Keys for the Secure
              Real-time Transport Protocol (SRTP)", RFC 5764, DOI 10
              .17487/RFC5764, May 2010,
              <http://www.rfc-editor.org/info/rfc5764>.

   [RFC5888]  Camarillo, G. and H. Schulzrinne, "The Session Description
              Protocol (SDP) Grouping Framework", RFC 5888, DOI 10
              .17487/RFC5888, June 2010,
              <http://www.rfc-editor.org/info/rfc5888>.

   [RFC6347]  Rescorla, E. and N. Modadugu, "Datagram Transport Layer
              Security Version 1.2", RFC 6347, DOI 10.17487/RFC6347,
              January 2012, <http://www.rfc-editor.org/info/rfc6347>.

   [RFC7656]  Lennox, J., Gross, K., Nandakumar, S., Salgueiro, G., and
              B. Burman, Ed., "A Taxonomy of Semantics and Mechanisms
              for Real-Time Transport Protocol (RTP) Sources", RFC 7656,
              DOI 10.17487/RFC7656, November 2015,
              <http://www.rfc-editor.org/info/rfc7656>.

   [RFC7941]  Westerlund, M., Burman, B., Even, R., and M. Zanaty, "RTP
              Header Extension for the RTP Control Protocol (RTCP)
              Source Description Items", RFC 7941, DOI 10.17487/RFC7941,
              August 2016, <http://www.rfc-editor.org/info/rfc7941>.

   [I-D.ietf-ice-rfc5245bis]
              Keranen, A., Holmberg, C., and J. Rosenberg, "Interactive
              Connectivity Establishment (ICE): A Protocol for Network
              Address Translator (NAT) Traversal", draft-ietf-ice-
              rfc5245bis-04 (work in progress), June 2016.

   [I-D.ietf-mmusic-sdp-mux-attributes]
              Nandakumar, S., "A Framework for SDP Attributes when
              Multiplexing", draft-ietf-mmusic-sdp-mux-attributes-14
              (work in progress), September 2016.

   [I-D.ietf-mmusic-mux-exclusive]
              Holmberg, C., "Indicating Exclusive Support of RTP/RTCP
              Multiplexing using SDP", draft-ietf-mmusic-mux-
              exclusive-10 (work in progress), August 2016.





Holmberg, et al.          Expires June 21, 2017                [Page 49]

Internet-Draft                Bundled media                December 2016


   [I-D.ietf-mmusic-ice-sip-sdp]
              Petit-Huguenin, M., Keranen, A., and S. Nandakumar, "Using
              Interactive Connectivity Establishment (ICE) with Session
              Description Protocol (SDP) offer/answer and Session
              Initiation Protocol (SIP)", draft-ietf-mmusic-ice-sip-
              sdp-10 (work in progress), July 2016.

20.2.  Informative References

   [RFC3261]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", RFC 3261,
              DOI 10.17487/RFC3261, June 2002,
              <http://www.rfc-editor.org/info/rfc3261>.

   [RFC4568]  Andreasen, F., Baugher, M., and D. Wing, "Session
              Description Protocol (SDP) Security Descriptions for Media
              Streams", RFC 4568, DOI 10.17487/RFC4568, July 2006,
              <http://www.rfc-editor.org/info/rfc4568>.

   [RFC5576]  Lennox, J., Ott, J., and T. Schierl, "Source-Specific
              Media Attributes in the Session Description Protocol
              (SDP)", RFC 5576, DOI 10.17487/RFC5576, June 2009,
              <http://www.rfc-editor.org/info/rfc5576>.

   [RFC7160]  Petit-Huguenin, M. and G. Zorn, Ed., "Support for Multiple
              Clock Rates in an RTP Session", RFC 7160, DOI 10.17487/
              RFC7160, April 2014,
              <http://www.rfc-editor.org/info/rfc7160>.

   [I-D.ietf-mmusic-trickle-ice]
              Ivov, E., Rescorla, E., and J. Uberti, "Trickle ICE:
              Incremental Provisioning of Candidates for the Interactive
              Connectivity Establishment (ICE) Protocol", draft-ietf-
              mmusic-trickle-ice-02 (work in progress), January 2015.

Appendix A.  Design Considerations

   One of the main issues regarding the BUNDLE grouping extensions has
   been whether, in SDP Offers and SDP Answers, the same port value
   should be inserted in "m=" lines associated with a BUNDLE group, as
   the purpose of the extension is to negotiate the usage of a single
   transport for media specified by the "m=" sections.  Issues with both
   approaches, discussed in the Appendix have been raised.  The outcome
   was to specify a mechanism which uses SDP Offers with both different
   and identical port values.





Holmberg, et al.          Expires June 21, 2017                [Page 50]

Internet-Draft                Bundled media                December 2016


   Below are the primary issues that have been considered when defining
   the "BUNDLE" grouping extension:

   o  1) Interoperability with existing UAs.

   o  2) Interoperability with intermediary B2BUA- and proxy entities.

   o  3) Time to gather, and the number of, ICE candidates.

   o  4) Different error scenarios, and when they occur.

   o  5) SDP Offer/Answer impacts, including usage of port number value
      zero.

A.1.  UA Interoperability

   Consider the following SDP Offer/Answer exchange, where Alice sends
   an SDP Offer to Bob:


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 10000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 10002 RTP/AVP 97
       a=rtpmap:97 H261/90000




   SDP Answer

       v=0
       o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
       s=
       c=IN IP4 biloxi.example.com
       t=0 0
       m=audio 20000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 20002 RTP/AVP 97
       a=rtpmap:97 H261/90000





Holmberg, et al.          Expires June 21, 2017                [Page 51]

Internet-Draft                Bundled media                December 2016


   RFC 4961 specifies a way of doing symmetric RTP but that is an a
   later invention to RTP and Bob can not assume that Alice supports RFC
   4961.  This means that Alice may be sending RTP from a different port
   than 10000 or 10002 - some implementation simply send the RTP from an
   ephemeral port.  When Bob's endpoint receives an RTP packet, the only
   way that Bob knows if it should be passed to the video or audio codec
   is by looking at the port it was received on.  This lead some SDP
   implementations to use the fact that each "m=" section had a
   different port number to use that port number as an index to find the
   correct m line in the SDP.  As a result, some implementations that do
   support symmetric RTP and ICE still use a SDP data structure where
   SDP with "m=" sections with the same port such as:


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 10000 RTP/AVP 97
       a=rtpmap:97 iLBC/8000
       m=video 10000 RTP/AVP 98
       a=rtpmap:98 H261/90000



   will result in the second "m=" section being considered an SDP error
   because it has the same port as the first line.

A.2.  Usage of port number value zero

   In an SDP Offer or SDP Answer, the media specified by an "m=" section
   can be disabled/rejected by setting the port number value to zero.
   This is different from e.g., using the SDP direction attributes,
   where RTCP traffic will continue even if the SDP "inactive" attribute
   is indicated for the associated "m=" section.

   If each "m=" section associated with a BUNDLE group would contain
   different port values, and one of those port values would be used for
   a BUNDLE address associated with the BUNDLE group, problems would
   occur if an endpoint wants to disable/reject the "m=" section
   associated with that port, by setting the port value to zero.  After
   that, no "m=" section would contain the port value which is used for
   the BUNDLE address.  In addition, it is unclear what would happen to
   the ICE candidates associated with the "m=" section, as they are also
   used for the BUNDLE address.



Holmberg, et al.          Expires June 21, 2017                [Page 52]

Internet-Draft                Bundled media                December 2016


A.3.  B2BUA And Proxy Interoperability

   Some back to back user agents may be configured in a mode where if
   the incoming call leg contains an SDP attribute the B2BUA does not
   understand, the B2BUA still generates that SDP attribute in the Offer
   for the outgoing call leg.  Consider a B2BUA that did not understand
   the SDP "rtcp" attribute, defined in RFC 3605, yet acted this way.
   Further assume that the B2BUA was configured to tear down any call
   where it did not see any RTCP for 5 minutes.  In this case, if the
   B2BUA received an Offer like:


   SDP Offer

       v=0
       o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
       s=
       c=IN IP4 atlanta.example.com
       t=0 0
       m=audio 49170 RTP/AVP 0
       a=rtcp:53020



   It would be looking for RTCP on port 49172 but would not see any
   because the RTCP would be on port 53020 and after five minutes, it
   would tear down the call.  Similarly, a B2BUA that did not understand
   BUNDLE yet put BUNDLE in it's offer may be looking for media on the
   wrong port and tear down the call.  It is worth noting that a B2BUA
   that generated an Offer with capabilities it does not understand is
   not compliant with the specifications.

A.3.1.  Traffic Policing

   Sometimes intermediaries do not act as B2BUA, in the sense that they
   don't modify SDP bodies, nor do they terminate SIP dialogs.  Still,
   however, they may use SDP information (e.g., IP address and port) in
   order to control traffic gating functions, and to set traffic
   policing rules.  There might be rules which will trigger a session to
   be terminated in case media is not sent or received on the ports
   retrieved from the SDP.  This typically occurs once the session is
   already established and ongoing.

A.3.2.  Bandwidth Allocation

   Sometimes intermediaries do not act as B2BUA, in the sense that they
   don't modify SDP bodies, nor do they terminate SIP dialogs.  Still,
   however, they may use SDP information (e.g., codecs and media types)



Holmberg, et al.          Expires June 21, 2017                [Page 53]

Internet-Draft                Bundled media                December 2016


   in order to control bandwidth allocation functions.  The bandwidth
   allocation is done per "m=" section, which means that it might not be
   enough if media specified by all "m=" sections try to use that
   bandwidth.  That may either simply lead to bad user experience, or to
   termination of the call.

A.4.  Candidate Gathering

   When using ICE, a candidate needs to be gathered for each port.  This
   takes approximately 20 ms extra for each extra "m=" section due to
   the NAT pacing requirements.  All of this gather can be overlapped
   with other things while for exampe a web-page is loading to minimize
   the impact.  If the client only wants to generate TURN or STUN ICE
   candidates for one of the "m=" lines and then use trickle ICE
   [I-D.ietf-mmusic-trickle-ice] to get the non host ICE candidates for
   the rest of the "m=" sections, it MAY do that and will not need any
   additional gathering time.

   Some people have suggested a TURN extension to get a bunch of TURN
   allocations at once.  This would only provide a single STUN result so
   in cases where the other end did not support BUNDLE, may cause more
   use of the TURN server but would be quick in the cases where both
   sides supported BUNDLE and would fall back to a successful call in
   the other cases.

Authors' Addresses

   Christer Holmberg
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   Email: christer.holmberg@ericsson.com


   Harald Tveit Alvestrand
   Google
   Kungsbron 2
   Stockholm  11122
   Sweden

   Email: harald@alvestrand.no








Holmberg, et al.          Expires June 21, 2017                [Page 54]

Internet-Draft                Bundled media                December 2016


   Cullen Jennings
   Cisco
   400 3rd Avenue SW, Suite 350
   Calgary, AB  T2P 4H2
   Canada

   Email: fluffy@iii.ca












































Holmberg, et al.          Expires June 21, 2017                [Page 55]
