<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Negotiating Media Multiplexing Using the Session Description Protocol (SDP) </title>

  <style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc, ul.toc ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>

  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Conventions"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Applicability Statement"/>
<link href="#rfc.section.5" rel="Chapter" title="5 SDP Grouping Framework BUNDLE Extension"/>
<link href="#rfc.section.6" rel="Chapter" title="6 SDP 'bundle-only' Attribute"/>
<link href="#rfc.section.7" rel="Chapter" title="7 SDP Information Considerations"/>
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Connection Data (c=)"/>
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Bandwidth (b=)"/>
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Attributes (a=)"/>
<link href="#rfc.section.8" rel="Chapter" title="8 SDP Offer/Answer Procedures"/>
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Mux Category Considerations"/>
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Generating an SDP Offer that creates a BUNDLE group"/>
<link href="#rfc.section.8.2.1" rel="Chapter" title="8.2.1 Suggesting the offerer BUNDLE-section"/>
<link href="#rfc.section.8.2.2" rel="Chapter" title="8.2.2 Example: Initial SDP Offer"/>
<link href="#rfc.section.8.3" rel="Chapter" title="8.3 Generating an SDP Answer"/>
<link href="#rfc.section.8.3.1" rel="Chapter" title="8.3.1 Removing an 'm=' Section from a BUNDLE group"/>
<link href="#rfc.section.8.3.2" rel="Chapter" title="8.3.2 Answerer BUNDLE-section selection"/>
<link href="#rfc.section.8.3.3" rel="Chapter" title="8.3.3 Keeping an 'm=' section in a BUNDLE group"/>
<link href="#rfc.section.8.3.4" rel="Chapter" title="8.3.4 Example: SDP Answer"/>
<link href="#rfc.section.8.4" rel="Chapter" title="8.4 Offerer Processing of the SDP Answer"/>
<link href="#rfc.section.8.5" rel="Chapter" title="8.5 Modifying the Session"/>
<link href="#rfc.section.9" rel="Chapter" title="9 Protocol Identification"/>
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 STUN, DTLS, SRTP"/>
<link href="#rfc.section.10" rel="Chapter" title="10 RTP Considerations"/>
<link href="#rfc.section.10.1" rel="Chapter" title="10.1 Single RTP Session"/>
<link href="#rfc.section.10.1.1" rel="Chapter" title="10.1.1 Payload Type (PT) Value Reuse"/>
<link href="#rfc.section.10.2" rel="Chapter" title="10.2 Associating RTP/RTCP Streams With Correct SDP Media Description"/>
<link href="#rfc.section.10.3" rel="Chapter" title="10.3 RTP/RTCP Multiplexing"/>
<link href="#rfc.section.10.3.1" rel="Chapter" title="10.3.1 SDP Offer/Answer Procedures"/>
<link href="#rfc.section.11" rel="Chapter" title="11 ICE Considerations"/>
<link href="#rfc.section.12" rel="Chapter" title="12 DTLS Considerations"/>
<link href="#rfc.section.13" rel="Chapter" title="13 Update to RFC 3264"/>
<link href="#rfc.section.13.1" rel="Chapter" title="13.1 Original text of section 5.1 (2nd paragraph) of RFC 3264"/>
<link href="#rfc.section.13.2" rel="Chapter" title="13.2 New text replacing section 5.1 (2nd paragraph) of RFC 3264"/>
<link href="#rfc.section.13.3" rel="Chapter" title="13.3 Original text of section 8.2 (2nd paragraph) of RFC 3264"/>
<link href="#rfc.section.13.4" rel="Chapter" title="13.4 New text replacing section 8.2 (2nd paragraph) of RFC 3264"/>
<link href="#rfc.section.13.5" rel="Chapter" title="13.5 Original text of section 8.4 (6th paragraph) of RFC 3264"/>
<link href="#rfc.section.13.6" rel="Chapter" title="13.6 New text replacing section 8.4 (6th paragraph) of RFC 3264"/>
<link href="#rfc.section.14" rel="Chapter" title="14 RTP/RTCP extensions for identification-tag transport"/>
<link href="#rfc.section.14.1" rel="Chapter" title="14.1 RTCP MID SDES Item"/>
<link href="#rfc.section.14.2" rel="Chapter" title="14.2 RTP SDES Header Extension For MID"/>
<link href="#rfc.section.15" rel="Chapter" title="15 IANA Considerations"/>
<link href="#rfc.section.15.1" rel="Chapter" title="15.1 New SDES item"/>
<link href="#rfc.section.15.2" rel="Chapter" title="15.2 New RTP SDES Header Extension URI"/>
<link href="#rfc.section.15.3" rel="Chapter" title="15.3 New SDP Attribute"/>
<link href="#rfc.section.15.4" rel="Chapter" title="15.4 New SDP Group Semantics"/>
<link href="#rfc.section.16" rel="Chapter" title="16 Security Considerations"/>
<link href="#rfc.section.17" rel="Chapter" title="17 Examples"/>
<link href="#rfc.section.17.1" rel="Chapter" title="17.1 Example: Bundle Address Selection"/>
<link href="#rfc.section.17.2" rel="Chapter" title="17.2 Example: BUNDLE Extension Rejected"/>
<link href="#rfc.section.17.3" rel="Chapter" title="17.3 Example: Offerer Adds A Media Description To A BUNDLE Group"/>
<link href="#rfc.section.17.4" rel="Chapter" title="17.4 Example: Offerer Moves A Media Description Out Of A BUNDLE Group"/>
<link href="#rfc.section.17.5" rel="Chapter" title="17.5 Example: Offerer Disables A Media Description Within A BUNDLE Group"/>
<link href="#rfc.section.18" rel="Chapter" title="18 Acknowledgements"/>
<link href="#rfc.section.19" rel="Chapter" title="19 Change Log"/>
<link href="#rfc.references" rel="Chapter" title="20 References"/>
<link href="#rfc.references.1" rel="Chapter" title="20.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="20.2 Informative References"/>
<link href="#rfc.appendix.A" rel="Chapter" title="A Design Considerations"/>
<link href="#rfc.appendix.A.1" rel="Chapter" title="A.1 UA Interoperability"/>
<link href="#rfc.appendix.A.2" rel="Chapter" title="A.2 Usage of port number value zero"/>
<link href="#rfc.appendix.A.3" rel="Chapter" title="A.3 B2BUA And Proxy Interoperability"/>
<link href="#rfc.appendix.A.3.1" rel="Chapter" title="A.3.1 Traffic Policing"/>
<link href="#rfc.appendix.A.3.2" rel="Chapter" title="A.3.2 Bandwidth Allocation"/>
<link href="#rfc.appendix.A.4" rel="Chapter" title="A.4 Candidate Gathering"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.4.7 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Holmberg, C., Alvestrand, H., and C. Jennings" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-mmusic-sdp-bundle-negotiation-36.txt" />
  <meta name="dct.issued" scheme="ISO8601" content="2016-12-18" />
  <meta name="dct.abstract" content="This specification defines a new Session Description Protocol (SDP) Grouping Framework extension, 'BUNDLE'. The extension can be used with the SDP Offer/Answer mechanism to negotiate the usage of a single transport for sending and receiving media, referred to as bundled media, specified by multiple SDP media descriptions (&quot;m=&quot; sections).  " />
  <meta name="description" content="This specification defines a new Session Description Protocol (SDP) Grouping Framework extension, 'BUNDLE'. The extension can be used with the SDP Offer/Answer mechanism to negotiate the usage of a single transport for sending and receiving media, referred to as bundled media, specified by multiple SDP media descriptions (&quot;m=&quot; sections).  " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">MMUSIC Working Group</td>
  <td class="right">C. Holmberg</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">Ericsson</td>
</tr>
<tr>
  <td class="left">Updates: 3264 (if approved)</td>
  <td class="right">H. Alvestrand</td>
</tr>
<tr>
  <td class="left">Intended status: Standards Track</td>
  <td class="right">Google</td>
</tr>
<tr>
  <td class="left">Expires: June 21, 2017</td>
  <td class="right">C. Jennings</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">Cisco</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">December 18, 2016</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Negotiating Media Multiplexing Using the Session Description Protocol (SDP) <br />
  <span class="filename">draft-ietf-mmusic-sdp-bundle-negotiation-36.txt</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This specification defines a new Session Description Protocol (SDP) Grouping Framework extension, 'BUNDLE'. The extension can be used with the SDP Offer/Answer mechanism to negotiate the usage of a single transport for sending and receiving media, referred to as bundled media, specified by multiple SDP media descriptions ("m=" sections).  </p>
<p>To assist endpoints in negotiating the use of bundling, this specification defines a new SDP attribute, 'bundle-only', which can be used to request that specific media is only used if bundled. The specification also updates RFC 3264, to allow usage of zero port values without meaning that media is rejected.  </p>
<p>There are multiple ways to correlate the bundled RTP packets with the appropriate media descriptions. This specification defines a new Real-time Transport Protocol (RTP) source description (SDES) item and a new RTP header extension that provides an additional way to do this correlation by using them to carry a value that associates the RTP/RTCP packets with a specific media description.  </p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on June 21, 2017.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<li>2.   <a href="#rfc.section.2">Terminology</a></li>
<li>3.   <a href="#rfc.section.3">Conventions</a></li>
<li>4.   <a href="#rfc.section.4">Applicability Statement</a></li>
<li>5.   <a href="#rfc.section.5">SDP Grouping Framework BUNDLE Extension</a></li>
<li>6.   <a href="#rfc.section.6">SDP 'bundle-only' Attribute</a></li>
<li>7.   <a href="#rfc.section.7">SDP Information Considerations</a></li>
<li>7.1.   <a href="#rfc.section.7.1">Connection Data (c=)</a></li>
<li>7.2.   <a href="#rfc.section.7.2">Bandwidth (b=)</a></li>
<li>7.3.   <a href="#rfc.section.7.3">Attributes (a=)</a></li>
<li>8.   <a href="#rfc.section.8">SDP Offer/Answer Procedures</a></li>
<li>8.1.   <a href="#rfc.section.8.1">Mux Category Considerations</a></li>
<li>8.2.   <a href="#rfc.section.8.2">Generating an SDP Offer that creates a BUNDLE group</a></li>
<li>8.2.1.   <a href="#rfc.section.8.2.1">Suggesting the offerer BUNDLE-section</a></li>
<li>8.2.2.   <a href="#rfc.section.8.2.2">Example: Initial SDP Offer</a></li>
<li>8.3.   <a href="#rfc.section.8.3">Generating an SDP Answer</a></li>
<li>8.3.1.   <a href="#rfc.section.8.3.1">Removing an 'm=' Section from a BUNDLE group</a></li>
<li>8.3.2.   <a href="#rfc.section.8.3.2">Answerer BUNDLE-section selection</a></li>
<li>8.3.3.   <a href="#rfc.section.8.3.3">Keeping an 'm=' section in a BUNDLE group</a></li>
<li>8.3.4.   <a href="#rfc.section.8.3.4">Example: SDP Answer</a></li>
<li>8.4.   <a href="#rfc.section.8.4">Offerer Processing of the SDP Answer</a></li>
<li>8.5.   <a href="#rfc.section.8.5">Modifying the Session</a></li>
<li>9.   <a href="#rfc.section.9">Protocol Identification</a></li>
<li>9.1.   <a href="#rfc.section.9.1">STUN, DTLS, SRTP</a></li>
<li>10.   <a href="#rfc.section.10">RTP Considerations</a></li>
<li>10.1.   <a href="#rfc.section.10.1">Single RTP Session</a></li>
<li>10.1.1.   <a href="#rfc.section.10.1.1">Payload Type (PT) Value Reuse</a></li>
<li>10.2.   <a href="#rfc.section.10.2">Associating RTP/RTCP Streams With Correct SDP Media Description</a></li>
<li>10.3.   <a href="#rfc.section.10.3">RTP/RTCP Multiplexing</a></li>
<li>10.3.1.   <a href="#rfc.section.10.3.1">SDP Offer/Answer Procedures</a></li>
<li>11.   <a href="#rfc.section.11">ICE Considerations</a></li>
<li>12.   <a href="#rfc.section.12">DTLS Considerations</a></li>
<li>13.   <a href="#rfc.section.13">Update to RFC 3264</a></li>
<li>13.1.   <a href="#rfc.section.13.1">Original text of section 5.1 (2nd paragraph) of RFC 3264</a></li>
<li>13.2.   <a href="#rfc.section.13.2">New text replacing section 5.1 (2nd paragraph) of RFC 3264</a></li>
<li>13.3.   <a href="#rfc.section.13.3">Original text of section 8.2 (2nd paragraph) of RFC 3264</a></li>
<li>13.4.   <a href="#rfc.section.13.4">New text replacing section 8.2 (2nd paragraph) of RFC 3264</a></li>
<li>13.5.   <a href="#rfc.section.13.5">Original text of section 8.4 (6th paragraph) of RFC 3264</a></li>
<li>13.6.   <a href="#rfc.section.13.6">New text replacing section 8.4 (6th paragraph) of RFC 3264</a></li>
<li>14.   <a href="#rfc.section.14">RTP/RTCP extensions for identification-tag transport</a></li>
<li>14.1.   <a href="#rfc.section.14.1">RTCP MID SDES Item</a></li>
<li>14.2.   <a href="#rfc.section.14.2">RTP SDES Header Extension For MID</a></li>
<li>15.   <a href="#rfc.section.15">IANA Considerations</a></li>
<li>15.1.   <a href="#rfc.section.15.1">New SDES item</a></li>
<li>15.2.   <a href="#rfc.section.15.2">New RTP SDES Header Extension URI</a></li>
<li>15.3.   <a href="#rfc.section.15.3">New SDP Attribute</a></li>
<li>15.4.   <a href="#rfc.section.15.4">New SDP Group Semantics</a></li>
<li>16.   <a href="#rfc.section.16">Security Considerations</a></li>
<li>17.   <a href="#rfc.section.17">Examples</a></li>
<li>17.1.   <a href="#rfc.section.17.1">Example: Bundle Address Selection</a></li>
<li>17.2.   <a href="#rfc.section.17.2">Example: BUNDLE Extension Rejected</a></li>
<li>17.3.   <a href="#rfc.section.17.3">Example: Offerer Adds A Media Description To A BUNDLE Group</a></li>
<li>17.4.   <a href="#rfc.section.17.4">Example: Offerer Moves A Media Description Out Of A BUNDLE Group</a></li>
<li>17.5.   <a href="#rfc.section.17.5">Example: Offerer Disables A Media Description Within A BUNDLE Group</a></li>
<li>18.   <a href="#rfc.section.18">Acknowledgements</a></li>
<li>19.   <a href="#rfc.section.19">Change Log</a></li>
<li>20.   <a href="#rfc.references">References</a></li>
<li>20.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>20.2.   <a href="#rfc.references.2">Informative References</a></li>
<li>Appendix A.   <a href="#rfc.appendix.A">Design Considerations</a></li>
<li>A.1.   <a href="#rfc.appendix.A.1">UA Interoperability</a></li>
<li>A.2.   <a href="#rfc.appendix.A.2">Usage of port number value zero</a></li>
<li>A.3.   <a href="#rfc.appendix.A.3">B2BUA And Proxy Interoperability</a></li>
<li>A.3.1.   <a href="#rfc.appendix.A.3.1">Traffic Policing</a></li>
<li>A.3.2.   <a href="#rfc.appendix.A.3.2">Bandwidth Allocation</a></li>
<li>A.4.   <a href="#rfc.appendix.A.4">Candidate Gathering</a></li>
<li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">When multimedia communications are established, each transport reserved for an individual media stream consumes additional resources (especially when Interactive Connectivity Establishment (ICE) <a href="#RFC5245">[RFC5245]</a> is used). For this reason, it is attractive to use the same transport for multiple media streams.  </p>
<p id="rfc.section.1.p.2">This specification defines a way to use a single transport for sending and receiving media specified by multiple SDP media descriptions ("m=" sections, as referred to throughout the remainder of this specification).  </p>
<p id="rfc.section.1.p.3">This specification defines a new SDP Grouping Framework <a href="#RFC5888">[RFC5888]</a> extension called 'BUNDLE'. The extension can be used with the Session Description Protocol (SDP) Offer/Answer mechanism <a href="#RFC3264">[RFC3264]</a> to negotiate the usage of a BUNDLE group. Within a BUNDLE group, a single BUNDLE transport is used for sending and receiving media specified by multiple "m=" sections. This is referred to as bundled media.  </p>
<p id="rfc.section.1.p.4">The offerer and answerer <a href="#RFC3264">[RFC3264]</a> use the BUNDLE extension to negotiate the attributes of the BUNDLE transport to be used for sending and receiving the bundled media specified by a BUNDLE group. Once the offerer and the answerer have negotiated a BUNDLE group, they can begin to use the same BUNDLE transport to send and receive media for all "m=" sections in the negotiated BUNDLE group.  </p>
<p id="rfc.section.1.p.5">TODO: The three preceding paragraphs say basically the same thing. Can they be simplified? </p>
<p id="rfc.section.1.p.6">The mechanisms described in this specification are compatible with media transports that are identified by something other than a 5-tuple (source address, source port, destination address, destination port, and transport-layer protocol). For example, Interactive Connectivity Establishment (ICE) <a href="#RFC5245">[RFC5245]</a>, which uses relay servers and multiple 5-tuples (candidate pairs) to provide a single media transport, where the transport is identified by a combination of local/remote username fragments.  </p>
<p id="rfc.section.1.p.7">This specification also defines a new SDP attribute, 'bundle-only', which can be used to request that specific media is only used if kept within a BUNDLE group. The specification also updates RFC 3264, to allow usage of zero port values without meaning that media is rejected.  </p>
<p id="rfc.section.1.p.8">As defined in RFC 4566 <a href="#RFC4566">[RFC4566]</a>, the semantics of assigning the same transport address to multiple "m=" sections are undefined, and there is no grouping defined by such means. Instead, an explicit grouping mechanism needs to be used to express the intended semantics. This specification provides such an extension.  </p>
<p id="rfc.section.1.p.9">This specification also updates sections 5.1, 8.1 and 8.2 of RFC 3264 <a href="#RFC3264">[RFC3264]</a>. The update allows an answerer to assign a non-zero port value to an "m=" section in an SDP answer, even if the "m=" section in the associated SDP offer contained a zero port value.  </p>
<p id="rfc.section.1.p.10">This specification also defines a new Real-time Transport Protocol (RTP) <a href="#RFC3550">[RFC3550]</a> source description (SDES) item, 'MID', and a new RTP SDES header extension that can be used to associate RTP streams with media descriptions.  </p>
<p id="rfc.section.1.p.11">SDP bodies can contain multiple BUNDLE groups. A given BUNDLE transport MUST only be used by a single BUNDLE group. The procedures in this specification apply independently to a given BUNDLE group. Note that, as defined in <a href="#RFC7656">[RFC7656]</a>, all RTP based media flows using the same media transport belong to a single RTP session <a href="#RFC3550">[RFC3550]</a>.  </p>
<p id="rfc.section.1.p.12">The BUNDLE extension is backward compatible. Endpoints that do not support the extension are expected to generate offers and answers without an SDP 'group:BUNDLE' attribute, and are expected to use distinct transports for each "m=" section within an offer and answer, according to the procedures in <a href="#RFC4566">[RFC4566]</a> and <a href="#RFC3264">[RFC3264]</a> </p>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">"m=" section: SDP bodies contain one or more media descriptions, which are delineated by "m=" lines, hence the shorthand '"m=" section'.  </p>
<p id="rfc.section.2.p.2">5-tuple: A collection of the following values: source address, source port, destination address, destination port, and transport-layer protocol.  </p>
<p id="rfc.section.2.p.3">Transport: A media transport as defined in <a href="#RFC7656">[RFC7656]</a>. Most commonly identified by a 5-tuple, using the address/port from "m=" and "c=" lines, but may be identified by something else depending on the protocol(s) being used (e.g., ICE).  </p>
<p id="rfc.section.2.p.4">BUNDLE group: A set of "m=" sections, created using an SDP Offer/Answer exchange, that will use (or are being proposed to use) the same transport.  </p>
<p id="rfc.section.2.p.5">BUNDLE transport: The transport shared by all the "m=" sections in a BUNDLE group.  </p>
<p id="rfc.section.2.p.6">Offerer BUNDLE-section: The "m=" section in the offer that contains attributes used by a BUNDLE transport. May be different than the BUNDLE group's answerer BUNDLE-section.  </p>
<p id="rfc.section.2.p.7">Answerer BUNDLE-section: The "m=" section in the answer that contains attributes used by a BUNDLE transport. May be different than the BUNDLE group's offerer BUNDLE-section.  </p>
<p id="rfc.section.2.p.8">TODO: As the spec is currently written, the offerer BUNDLE-section will always be the same as the answerer BUNDLE-section. But people have stated otherwise on the mailing list, so I expect this will have to change. See other TODO in "Answerer selection of offerer BUNDLE-section".  </p>
<p id="rfc.section.2.p.9">Bundled "m=" section: An "m=" section that is part of a BUNDLE group.  </p>
<p id="rfc.section.2.p.10">Bundle-only "m=" section: An offered bundled "m=" section that will only use a BUNDLE transport, not offering fallback to being non-bundled. This is implemented using the SDP 'bundle-only' attribute, or the port field of the "m=" line.  </p>
<p id="rfc.section.2.p.11">Bundled media: All media sent and received using the same BUNDLE transport.  </p>
<p id="rfc.section.2.p.12">Identification-tag: A unique token value that is used to identify an "m=" section. The SDP 'mid' attribute <a href="#RFC5888">[RFC5888]</a>, contained with an "m=" section, is used for this purpose. The session-level SDP 'group' attribute <a href="#RFC5888">[RFC5888]</a> carries a list of identification-tags, identifying the "m=" sections contained in that particular BUNDLE group.  </p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> Conventions</h1>
<p id="rfc.section.3.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> Applicability Statement</h1>
<p id="rfc.section.4.p.1">The mechanism in this specification only applies to the Session Description Protocol (SDP) <a href="#RFC4566">[RFC4566]</a>, when used together with the SDP offer/answer mechanism <a href="#RFC3264">[RFC3264]</a>.  Declarative usage of SDP is out of scope of this document, and is thus undefined.  </p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#sec-group" id="sec-group">SDP Grouping Framework BUNDLE Extension</a></h1>
<p id="rfc.section.5.p.1">This section defines a new SDP Grouping Framework extension <a href="#RFC5888">[RFC5888]</a>, 'BUNDLE'. The BUNDLE extension can be used with the SDP Offer/Answer mechanism to negotiate the usage of a single transport for sending and receiving bundled media.  </p>
<p id="rfc.section.5.p.2">The 5-tuple used by this transport to send bundled media MAY be the same as the 5-tuple used to receive bundled media, depending on whether symmetric RTP <a href="#RFC4961">[RFC4961]</a> is used.  </p>
<p id="rfc.section.5.p.3">A BUNDLE transport MUST use the same transport-layer protocol (e.g., UDP or TCP) for all BUNDLED media.  </p>
<p id="rfc.section.5.p.4">The BUNDLE extension is indicated using an SDP 'group' attribute with a "BUNDLE" semantics value <a href="#RFC5888">[RFC5888]</a>. An identification-tag is used to identify each bundled "m=" section, and each identification-tag is listed in the SDP 'group:BUNDLE' attribute identification-tag list. Each "m=" section whose identification-tag is listed in the identification-tag list is in a BUNDLE group.  </p>
<p id="rfc.section.5.p.5">SDP bodies MAY contain multiple BUNDLE groups. Any given bundled "m=" section MUST NOT be contained in more than one BUNDLE group.  </p>
<p id="rfc.section.5.p.6">NOTE: The order of the identification tags listed in the SDP 'group:BUNDLE' attribute identification-tag list does not have to be the same as the order in which the corresponding "m=" sections occur in the SDP.  </p>
<p><a href="#sec-sdp-oa">Section 8</a> defines the detailed SDP Offer/Answer procedures for the BUNDLE extension.  </p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#sec-bundle-only" id="sec-bundle-only">SDP 'bundle-only' Attribute</a></h1>
<p id="rfc.section.6.p.1">This section defines a new SDP media-level attribute <a href="#RFC4566">[RFC4566]</a>, 'bundle-only'. 'bundle-only' is a property attribute <a href="#RFC4566">[RFC4566]</a>, and hence has no value.  </p>
<p/>
<pre>

   Name: bundle-only

   Value: N/A

   Usage Level: media

   Charset Dependent: no

   Example:

     a=bundle-only

      </pre>
<p id="rfc.section.6.p.2">In order to ensure that an "m=" section will only be used in a BUNDLE group, even if communicating with an answerer that does not support the BUNDLE extension, the offerer can assign a zero port value to the "m=" section. According to <a href="#RFC3264">[RFC3264]</a> an answerer that is not BUNDLE-aware will reject such an "m=" section.  Thus, by including an SDP 'bundle-only' attribute in such an "m=" section, the offerer can force the answerer to accept the "m=" section if and only if the answerer supports the BUNDLE extension and agrees to keep the "m=" section in the BUNDLE group.  </p>
<p id="rfc.section.6.p.3">NOTE: Once the answerer agrees to keep an "m=" section in a BUNDLE group, the offerer might not need to use the 'bundle-only' attribute in subsequent offers.  As described in <a href="#sec-sdp-oa-ino">Section 8.2</a>, subsequent offers can accomplish the same functionality by not providing a unique address/port for an "m=" section, ensuring that the answerer will either keep the "m=" section in the BUNDLE group or reject it.  </p>
<p id="rfc.section.6.p.4">The usage of the 'bundle-only' attribute is only defined for a bundled "m=" section with a zero port value, within an offer. Other usage is unspecified.  </p>
<p><a href="#sec-sdp-oa">Section 8</a> defines the detailed SDP Offer/Answer procedures for the 'bundle-only' attribute.  </p>
<h1 id="rfc.section.7"><a href="#rfc.section.7">7.</a> <a href="#sec-sdp-cons" id="sec-sdp-cons">SDP Information Considerations</a></h1>
<p id="rfc.section.7.p.1">This section describes restrictions associated with the usage of SDP parameters within a BUNDLE group. It also describes, when parameter and attribute values are present in multiple bundled "m=" sections, how to choose a value for the BUNDLE transport.  </p>
<h1 id="rfc.section.7.1"><a href="#rfc.section.7.1">7.1.</a> <a href="#sec-sdp-cons-c" id="sec-sdp-cons-c">Connection Data (c=)</a></h1>
<p id="rfc.section.7.1.p.1">The "c=" line nettype value <a href="#RFC4566">[RFC4566]</a> in a bundled "m=" section MUST be 'IN'.  </p>
<p id="rfc.section.7.1.p.2">The "c=" line addrtype value <a href="#RFC4566">[RFC4566]</a> in a bundled "m=" section MUST be 'IP4' or 'IP6'. The same value MUST be used in each "m=" section in a given BUNDLE group.  </p>
<p id="rfc.section.7.1.p.3">NOTE: Extensions to this specification can specify usage of the BUNDLE mechanism for other nettype and addrtype values than the ones listed above.  </p>
<h1 id="rfc.section.7.2"><a href="#rfc.section.7.2">7.2.</a> <a href="#sec-sdp-cons-b" id="sec-sdp-cons-b">Bandwidth (b=)</a></h1>
<p id="rfc.section.7.2.p.1">An offerer and answerer MUST use the rules and restrictions defined in <a href="#I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</a> for using the SDP bandwidth (b=) line in bundled "m=" sections.  </p>
<h1 id="rfc.section.7.3"><a href="#rfc.section.7.3">7.3.</a> <a href="#sec-sdp-cons-a" id="sec-sdp-cons-a">Attributes (a=)</a></h1>
<p id="rfc.section.7.3.p.1">An offerer and answerer MUST use the rules and restrictions defined in <a href="#I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</a> for using SDP attributes in bundled "m=" sections.  </p>
<h1 id="rfc.section.8"><a href="#rfc.section.8">8.</a> <a href="#sec-sdp-oa" id="sec-sdp-oa">SDP Offer/Answer Procedures</a></h1>
<p id="rfc.section.8.p.1">This section describes the SDP Offer/Answer <a href="#RFC3264">[RFC3264]</a> procedures for: </p>

<ul>
  <li>Negotiating and creating a BUNDLE group.  </li>
  <li>Negotiating the properties of the BUNDLE transport.  </li>
  <li>Adding an "m=" section to a BUNDLE group.  </li>
  <li>Moving an "m=" section out of a BUNDLE group.  </li>
  <li>Disabling an "m=" section within a BUNDLE group.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.p.2">The generic rules and procedures defined in <a href="#RFC3264">[RFC3264]</a> and <a href="#RFC5888">[RFC5888]</a> also apply to the BUNDLE extension. For example, if an offer is rejected by the answerer, the previously negotiated SDP parameters and characteristics (including those associated with a BUNDLE group) apply. Hence, if an offerer generates an offer in which the offerer creates a BUNDLE group, and the answerer rejects the offer, the BUNDLE group is discarded.  </p>
<p id="rfc.section.8.p.3">The procedures in this section are independent of the media type or "m=" section proto value represented by a bundled "m=" section.  <a href="#sec-rtp">Section 10</a> defines additional considerations for RTP based media.  <a href="#sec-bundle-only">Section 6</a> defines additional considerations for the usage of the SDP 'bundle-only' attribute.  <a href="#sec-ice">Section 11</a> defines additional considerations for the usage of Interactive Connectivity Establishment (ICE) <a href="#I-D.ietf-ice-rfc5245bis">[I-D.ietf-ice-rfc5245bis]</a> mechanism.  </p>
<p id="rfc.section.8.p.4">SDP offers and answers can contain multiple BUNDLE groups. The procedures in this section apply independently to a given BUNDLE group.  </p>
<h1 id="rfc.section.8.1"><a href="#rfc.section.8.1">8.1.</a> <a href="#sec-sdp-oa-cat" id="sec-sdp-oa-cat">Mux Category Considerations</a></h1>
<p id="rfc.section.8.1.p.1">When an offerer places SDP attributes in a bundled "m=" section, and the offerer does not want to offer fallback to a non-BUNDLE transport, IDENTICAL and TRANSPORT mux category SDP attributes <a href="#I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</a> MUST only be placed in the offerer BUNDLE-section for that BUNDLE group (that is, the "m=" section identified by the first indentification-tag in the BUNDLE group's 'group' attribute in the offer).  </p>
<p id="rfc.section.8.1.p.2">When an answerer places SDP attributes in a bundled "m=" section, IDENTICAL and TRANSPORT mux category SDP attributes MUST only be placed in the answerer BUNDLE-section for that BUNDLE group (that is, the "m=" section identified by the first indentification-tag in the BUNDLE group's 'group' attribute in the answer).  </p>
<p id="rfc.section.8.1.p.3">NOTE: As bundled "m=" sections use the same transport, they also share the same IDENTICAL and TRANSPORT mux category SDP attributes and attribute values, so there is no need to place such SDP attributes in each "m=" section. The attributes and attribute values are implicitly applied to each "m=" section in the BUNDLE group.  </p>
<h1 id="rfc.section.8.2"><a href="#rfc.section.8.2">8.2.</a> <a href="#sec-sdp-oa-ino" id="sec-sdp-oa-ino">Generating an SDP Offer that creates a BUNDLE group</a></h1>
<p id="rfc.section.8.2.p.1">When an offerer generates an offer, in order to create a BUNDLE group, it MUST: </p>

<ul>
  <li>Select one "m=" section to be the proposed offerer BUNDLE-section, which will carry the offer's BUNDLE transport attributes.  Generate this "m=" section according to normal procedures. Note that the answerer may select a different "m=" section to be the offerer BUNDLE-section.  </li>
  <li>For each other "m=" section in the BUNDLE group: <ul><li>If the offerer does not wish to offer fallback to a non-BUNDLE transport, include a 'bundle-only' attribute in the "m=" section and use a zero port value on the "m=" line, omitting IDENTICAL and TRANSPORT category attributes as described in <a href="#sec-sdp-oa-cat">Section 8.1</a>.  </li><li>Otherwise, generate the "m=" section according to normal procedures, in addition to the restrictions for IDENTICAL category attributes described by <a href="#I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</a>.  </li><li>TODO: If an "m=" section offers fallback to being non-bundled, should the offerer be prepared to receive media for that "m=" section on both the BUNDLE transport and the fallback transport? This seems consistent with other specs, but I can't find it explicitly stated anywhere. Though, currently an issue preventing this is that the answerer gets to select the attributes the offerer will use for the BUNDLE transport. If offering three "m=" sections, the media for the third "m=" section might arrive on any of the three offered transports.  </li></ul><p> </p></li>
  <li>Add an SDP 'group:BUNDLE' attribute to the offer.  </li>
  <li>Place the identification-tag of each bundled "m=" section in the SDP 'group:BUNDLE' attribute identification-tag list, placing the offerer BUNDLE-section's identification-tag first in the list.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.2.p.2">NOTE: If the offerer assigns a zero port value to an "m=" section, but does not also include an SDP 'bundle-only' attribute in the "m=" section, it is an indication that the offerer wants to disable the "m=" section [<a href="#sec-sdp-oa-mod">Section 8.5</a>].  </p>
<p id="rfc.section.8.2.p.3">[<a href="#sec-example-add">Section 17.1</a>] shows an example of an initial offer.  </p>
<h1 id="rfc.section.8.2.1"><a href="#rfc.section.8.2.1">8.2.1.</a> <a href="#sec-sdp-oa-ino-req" id="sec-sdp-oa-ino-req">Suggesting the offerer BUNDLE-section</a></h1>
<p id="rfc.section.8.2.1.p.1">In the offer, the offerer BUNDLE-section contains the attributes the offerer suggests to use for the BUNDLE transport.  </p>
<p id="rfc.section.8.2.1.p.2">The offerer BUNDLE-section MUST NOT contain a zero port value or an SDP 'bundle-only' attribute.  </p>
<h1 id="rfc.section.8.2.2"><a href="#rfc.section.8.2.2">8.2.2.</a> <a href="#sec-sdp-oa-ino-ex" id="sec-sdp-oa-ino-ex">Example: Initial SDP Offer</a></h1>
<p id="rfc.section.8.2.2.p.1">The example shows an initial SDP offer. The offer includes two "m=" sections in the SDP, and includes both in a BUNDLE group. The audio "m=" section is used as the offerer BUNDLE-section (placed first in the SDP group:BUNDLE attribute identification-tag list). The video "m=" section does not use a 'bundle-only' attribute or a zero port value, and so it allows fallback to a non-BUNDLE transport, which would use port 10002 instead of port 10000.  </p>
<pre>

SDP Offer

  v=0
  o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
  s=
  c=IN IP4 atlanta.example.com
  t=0 0
  a=group:BUNDLE foo bar
  m=audio 10000 RTP/AVP 0 8 97
  b=AS:200
  a=mid:foo
  a=rtcp-mux
  a=rtpmap:0 PCMU/8000
  a=rtpmap:8 PCMA/8000
  a=rtpmap:97 iLBC/8000
  a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
  m=video 10002 RTP/AVP 31 32
  b=AS:1000
  a=mid:bar
  a=rtcp-mux
  a=rtpmap:31 H261/90000
  a=rtpmap:32 MPV/90000
  a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid

</pre>
<h1 id="rfc.section.8.3"><a href="#rfc.section.8.3">8.3.</a> <a href="#sec-sdp-oa-ans" id="sec-sdp-oa-ans">Generating an SDP Answer</a></h1>
<p id="rfc.section.8.3.p.1">This section describes the procedures for generating an answer that contains a BUNDLE group. The procedures here apply whether the BUNDLE group was created in the corresponding offer (as described in <a href="#sec-sdp-oa-ino">Section 8.2</a>), or is being modified after a previous offer/answer exchange (as described in <a href="#sec-sdp-oa-mod">Section 8.5</a>).  </p>
<p id="rfc.section.8.3.p.2">When an answerer generates an answer that contains a BUNDLE group, the following general SDP grouping framework restrictions, defined in <a href="#RFC5888">[RFC5888]</a>, also apply to the BUNDLE group: </p>

<ul>
  <li>The answerer MUST NOT include a BUNDLE group in the answer, unless the offerer requested the BUNDLE group in the corresponding offer.  </li>
  <li>The answerer MUST NOT include an "m=" section within a BUNDLE group, unless the offerer requested the "m=" section to be within that BUNDLE group in the corresponding offer.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.3.p.3">If the answer contains a BUNDLE group, the answerer MUST: </p>

<ul>
  <li>Select an offerer BUNDLE-section [<a href="#sec-sdp-oa-ans-off">Section 8.3.2</a>].  </li>
  <li>Add an SDP 'group:BUNDLE' attribute to the answer.  </li>
  <li>Place the identification-tag of each bundled "m=" section in the SDP 'group:BUNDLE' attribute identification-tag list, placing the selected offerer BUNDLE-section's identification-tag first in the list.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.3.p.4">The answerer MAY modify the BUNDLE transport each time it generates an answer to an offer, by placing new transport attributes (e.g., "m=" line port value) in the answerer BUNDLE-section.  </p>
<h1 id="rfc.section.8.3.1"><a href="#rfc.section.8.3.1">8.3.1.</a> <a href="#sec-sdp-oa-ans-mov" id="sec-sdp-oa-ans-mov">Removing an 'm=' Section from a BUNDLE group</a></h1>
<p id="rfc.section.8.3.1.p.1">If the answerer does not want to or is not able to keep an "m=" section within a BUNDLE group, it MUST: </p>

<ul>
  <li>Move the "m=" section out of the BUNDLE group.  This is only allowed for an "m=" section that is not bundle-only; that is, an "m=" section that does not use the 'bundle-only' attribute, and that offers a fallback transport distinct from the BUNDLE transport.  </li>
  <li>Otherwise, reject the "m=" section by placing a zero port in the "m=" field of the "m=" section in the answer, according to the procedures in <a href="#RFC3264">[RFC3264]</a>.  </li>
  <li>In addition, in either case above, the answerer MUST NOT place the identification-tag of the removed "m=" section in the SDP 'group' attribute identification-tag list of the BUNDLE group.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.3.1.p.2">NOTE: If a bundled "m=" section in an offer contains a zero port value, but the "m=" section does not contain an SDP 'bundle-only' attribute, it is an indication that the offerer wants to disable the "m=" section [<a href="#sec-sdp-oa-mod">Section 8.5</a>].  </p>
<h1 id="rfc.section.8.3.2"><a href="#rfc.section.8.3.2">8.3.2.</a> <a href="#sec-sdp-oa-ans-off" id="sec-sdp-oa-ans-off">Answerer BUNDLE-section selection</a></h1>
<p id="rfc.section.8.3.2.p.1">In an offer, a particular "m=" section is suggested as the offerer BUNDLE-section, which contains the offer's BUNDLE transport attributes.  [<a href="#sec-sdp-oa-ino-req">Section 8.2.1</a>]. The answerer MUST check whether that "m=" section fulfills the following criteria: </p>

<ul>
  <li>The answerer will not move the "m=" section out of the BUNDLE group in this answer [<a href="#sec-sdp-oa-ans-mov">Section 8.3.1</a>].  </li>
  <li>The answerer will not reject the "m=" section in this answer [<a href="#sec-sdp-oa-ans-mov">Section 8.3.1</a>].  </li>
  <li>The "m=" section does not contain a zero port value.  </li>
  <li>TODO: In the mailing list, we've agreed that if "a=bundle-only" is used, and the offerer proposes "Foo" as the offerer BUNDLE-section, the answerer is still allowed to reject "Foo". But that's not possible given the above restriction. We need to either revise the "answerer selection of offerer BUNDLE-section" logic or remove it. If it were removed, that would imply that the offerer BUNDLE-section is always implicitly bundle-only. An extra corner-casey situation that whatever we come up with should address, as a test case: the offerer wants to offer two "m=" sections with fallback to being non-bundled, and two bundle-only "m=" sections. The answerer wants to keep the bundle-only "m=" sections in the BUNDLE group, but remove the "m=" sections that offer fallback. How does this work? If a bundle-only section requires a zero port, then there are only two ports in the offer, but three ports are needed.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.3.2.p.2">If all of the criteria above are fulfilled, the answerer MUST select the proposed offerer BUNDLE-section, which will also be used as the answerer BUNDLE-section.  This answerer MUST place this "m=" section's identification-tag first in the identification-tag list of the 'group' attribute.  </p>
<p id="rfc.section.8.3.2.p.3">If one or more of the criteria are not fulfilled, the answerer MUST select the next identification-tag in the identification-tag list, and perform the same criteria check for the "m=" section with that identification-tag. If there are no more identification-tags in the identification-tag list, the answerer MUST discard the BUNDLE group, by ommitting that group from its answer entirely. In addition, unless the answerer rejects the whole offer, the answerer MUST apply the answerer procedures for moving an "m=" section out of a BUNDLE group [<a href="#sec-sdp-oa-ans-mov">Section 8.3.1</a>] for each bundled "m=" section in the offer.  </p>
<p id="rfc.section.8.3.2.p.4">[<a href="#sec-example-add">Section 17.1</a>] shows an example of a BUNDLE-section selection.  </p>
<h1 id="rfc.section.8.3.3"><a href="#rfc.section.8.3.3">8.3.3.</a> <a href="#sec-sdp-oa-ans-ans" id="sec-sdp-oa-ans-ans">Keeping an 'm=' section in a BUNDLE group</a></h1>
<p id="rfc.section.8.3.3.p.1">When an answerer generates an answer that contains a BUNDLE group, it MUST: </p>

<ul>
  <li>Generate the answerer BUNDLE-section according to normal procedures.  </li>
  <li>Generate each other "m=" section using the same address/port combination as the answerer BUNDLE-section, omitting IDENTICAL and TRANSPORT category attributes as described in <a href="#sec-sdp-oa-cat">Section 8.1</a>.  </li>
</ul>

<p> </p>
<p id="rfc.section.8.3.3.p.2">The answerer MUST NOT place an SDP 'bundle-only' attribute in any "m=" section in an answer.  </p>
<p id="rfc.section.8.3.3.p.3">TODO: Earlier we said that the usage of 'bundle-only' in an answer was not defined.  But now it's explicitly disallowed? Need to make up our minds.  </p>
<p id="rfc.section.8.3.3.p.4">NOTE: if the answerer keeps a bundle-only "m=" section within the BUNDLE group, it follows the same procedures as for any other "m=" section kept within the BUNDLE group.  </p>
<h1 id="rfc.section.8.3.4"><a href="#rfc.section.8.3.4">8.3.4.</a> Example: SDP Answer</h1>
<p id="rfc.section.8.3.4.p.1">The example shows an SDP answer, based on the SDP offer in [<a href="#sec-sdp-oa-ino-ex">Section 8.2.2</a>].  The answers accepts both "m=" sections in the BUNDLE group. Note that the "rtcp-mux" attribute, being in the IDENTICAL category, is ommitted for the video "m=" section, since it's not the answerer BUNDLE-section.  </p>
<pre>

SDP Answer

  v=0
  o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
  s=
  c=IN IP4 biloxi.example.com
  t=0 0
  a=group:BUNDLE foo bar
  m=audio 20000 RTP/AVP 0
  b=AS:200
  a=mid:foo
  a=rtcp-mux
  a=rtpmap:0 PCMU/8000
  a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
  m=video 20000 RTP/AVP 32
  b=AS:1000
  a=mid:bar
  a=rtpmap:32 MPV/90000
  a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


</pre>
<h1 id="rfc.section.8.4"><a href="#rfc.section.8.4">8.4.</a> <a href="#sec-sdp-oa-off-ans" id="sec-sdp-oa-off-ans">Offerer Processing of the SDP Answer</a></h1>
<p id="rfc.section.8.4.p.1">When an offerer receives an answer, if the answer contains a BUNDLE group, the offerer MUST check that any bundled "m=" section in the answer was indicated as bundled in the corresponding offer. If there is no mismatch, the offerer MUST use the BUNDLE transport, defined by the offerer/answerer BUNDLE-sections selected by the answerer [<a href="#sec-sdp-oa-ans-off">Section 8.3.2</a>], for each bundled "m=" section.  </p>
<p id="rfc.section.8.4.p.2">TODO: The "MUST check" part is very incomplete. There are plenty of invalid things that aren't being checked for, like shuffling "m=" sections between groups. Can't we just assume that an answerer will reject any offer that explicitly violates this specification? </p>
<p id="rfc.section.8.4.p.3">NOTE: As the answerer might reject one or more bundled "m=" sections, or move a bundled "m=" section out of a BUNDLE group, an "m=" section may be bundled in the offer but not the corresponding answer.  </p>
<p id="rfc.section.8.4.p.4">If the answer does not contain a BUNDLE group, the offerer MUST process the answer as a normal answer.  </p>
<h1 id="rfc.section.8.5"><a href="#rfc.section.8.5">8.5.</a> <a href="#sec-sdp-oa-mod" id="sec-sdp-oa-mod">Modifying the Session</a></h1>
<p id="rfc.section.8.5.p.1">When an offerer generates a subsequent offer that includes a previously negotiated BUNDLE group, it MUST follow the same procedures as when a BUNDLE group is initially created [<a href="#sec-sdp-oa-ino">Section 8.2</a>], but with the following differences: </p>

<ul>
  <li>Instead of using the 'bundle-only' attribute and a zero port value for bundle-only "m=" sections, omit the 'bundle-only' attribute and use an address/port that matches the offerer BUNDLE-section.  </li>
  <li>TODO: What is the point of this rule? It only complicates things. Why not just keep using 'bundle-only' in subsequent offers? Also, this rule is not sufficient for media transports that aren't identified by a 5-tuple (such as ICE). Should this rule be generalized to such transports? Or should such transports be allowed to use "bundle-only" in subsequent offers? </li>
</ul>

<p> </p>
<p id="rfc.section.8.5.p.2">An "m=" section MAY initially be offered with fallback to a non-BUNDLE transport, but subsequently offered as bundle-only, or vice-versa.  </p>
<p id="rfc.section.8.5.p.3">TODO: Previously, there was a list of conditions that allowed you to offer fallback: suggesting a new BUNDLE transport, adding an "m=" section to a BUNDLE group, removing an "m=" section from a BUNDLE group, or disabling a bundled "m=" section. Otherwise, it was illegal to offer fallback. I don't see the point of this restriction. Do we need it? </p>
<p id="rfc.section.8.5.p.4">A subsequent offer MAY suggest a new BUNDLE transport, by placing new transport attributes (e.g., "m=" line port value) in the offerer BUNDLE-section.  </p>
<p id="rfc.section.8.5.p.5">NOTE: Combining the above two MAYs, the offerer can place fallback transport parameters in any number of bundled "m=" sections (and place the previously selected transport parameters in any remaining bundled "m=" sections) if it wants to suggest multiple alternatives for the new BUNDLE transport.  </p>
<p id="rfc.section.8.5.p.6">A subsequent offer MAY add "m=" sections to a BUNDLE group and/or remove them. In addition, an "m=" section MAY be removed from one BUNDLE group and added to a different BUNDLE group in the same offer.  </p>
<p id="rfc.section.8.5.p.7">TODO: Crazy corner case time. Suppose I'm bundling A and B together in one group, and C and D together in a separate group. Now, in a subsequent offer, I start bundling A/C together, and B/D together, and at the same time change the transport parameters for each BUNDLE group. Depending on the protocols used, it may be ambiguous which underlying transport objects are being changed. Basically: is A joining C's group, or is C joining A's group? Practical example where this matters: ICE. If I change the ufrag/password to do an ICE restart at the same time as I'm shuffling "m=" sections, ICE is supposed to send media using the previously selected candidate pair until a new pair is formed. But *which* previously selected pair should it use for the "A/C" group? The "A/B" group's previously selected pair, or the "C/D" group's? The fundamental issue is that there's no reliable way to identify BUNDLE groups between subsequent offer/answer exchanges, if this kind of shuffling is allowed.  </p>
<p id="rfc.section.8.5.p.8">NOTE: If a removed "m=" section was the previously selected offerer BUNDLE-section, the offerer needs to suggest a new offerer BUNDLE-section [<a href="#sec-sdp-oa-ino-req">Section 8.2.1</a>].  </p>
<p id="rfc.section.8.5.p.9">[<a href="#sec-example-off-add">Section 17.3</a>] shows an example where an offerer sends an offer in order to add a bundled "m=" section to a BUNDLE group.  </p>
<p id="rfc.section.8.5.p.10">[<a href="#sec-example-off-mov">Section 17.4</a>] shows an example of an offer for moving an "m=" section out of a BUNDLE group.  </p>
<p id="rfc.section.8.5.p.11">[<a href="#sec-example-off-dis">Section 17.5</a>] shows an example of an offer for disabling an "m=" section within a BUNDLE group.  </p>
<h1 id="rfc.section.9"><a href="#rfc.section.9">9.</a> <a href="#sec-protocol-id" id="sec-protocol-id">Protocol Identification</a></h1>
<p id="rfc.section.9.p.1">The BUNDLE transport MUST use the same transport- layer protocol for each "m=" section in the BUNDLE group. If bundled "m=" sections use different protocols on top of the transport-layer protocol, there MUST exist a publicly available specification which describes a mechanism, for this particular protocol combination, how to associate received data with the correct protocol.  </p>
<p id="rfc.section.9.p.2">In addition, if received data can be associated with more than one bundled "m=" section, there MUST exist a publicly available specification which describes a mechanism for associating the received data with the correct "m=" section.  </p>
<p id="rfc.section.9.p.3">This document describes a mechanism to identify the protocol of received data among the STUN, DTLS and SRTP protocols (in any combination), when UDP is used as transport-layer protocol, but does not describe how to identify different protocols transported on DTLS. While the mechanism is generally applicable to other protocols and transport-layer protocols, any such use requires further specification around how to multiplex multiple protocols on a given transport-layer protocol, and how to associate received data with the correct protocols.  </p>
<h1 id="rfc.section.9.1"><a href="#rfc.section.9.1">9.1.</a> <a href="#sec-packets-id-sds" id="sec-packets-id-sds">STUN, DTLS, SRTP</a></h1>
<p id="rfc.section.9.1.p.1">Section 5.1.2 of <a href="#RFC5764">[RFC5764]</a> describes a mechanism to identify the protocol of a received packet among the STUN, Datagram Transport Layer Security (DTLS) and SRTP protocols (in any combination).  If an offer or answer includes bundled "m=" sections that represent these protocols, the offerer or answerer MUST support the mechanism described in <a href="#RFC5764">[RFC5764]</a>, and no explicit negotiation is required in order to indicate support and usage of the mechanism.  </p>
<p><a href="#RFC5764">[RFC5764]</a> does not describe how to identify different protocols transported on DTLS, only how to identify the DTLS protocol itself. If multiple protocols are transported on DTLS, there MUST exist a specification describing a mechanism for identifying each individual protocol. In addition, if a received DTLS packet can be associated with more than one "m=" section, there MUST exist a specification which describes a mechanism for associating the received DTLS packet with the correct "m=" section.  </p>
<p id="rfc.section.9.1.p.3">[<a href="#sec-rtp-pt">Section 10.2</a>] describes how to associate the packets in a received SRTP stream with the correct "m=" section.  </p>
<h1 id="rfc.section.10"><a href="#rfc.section.10">10.</a> <a href="#sec-rtp" id="sec-rtp">RTP Considerations</a></h1>
<h1 id="rfc.section.10.1"><a href="#rfc.section.10.1">10.1.</a> <a href="#sec-rtp-sessions" id="sec-rtp-sessions">Single RTP Session</a></h1>
<p id="rfc.section.10.1.p.1">All RTP-based media using a single BUNDLE transport belong to a single RTP session <a href="#RFC3550">[RFC3550]</a>.  </p>
<p id="rfc.section.10.1.p.2">Since a single RTP session is used for each bundle group, all "m=" sections representing RTP-based media in a bundle group will share a single SSRC numbering space <a href="#RFC3550">[RFC3550]</a>.  </p>
<p id="rfc.section.10.1.p.3">The following rules and restrictions apply for a single RTP session: </p>
<p/>

<ul>
  <li>A specific payload type value can be used in multiple bundled "m=" sections only if each codec associated with the payload type number shares an identical codec configuration [<a href="#sec-rtp-sessions-pt">Section 10.1.1</a>].  </li>
  <li>The proto value in each bundled RTP-based "m=" section MUST be identical (e.g. RTP/AVPF).  </li>
  <li>The RTP MID header extension MUST be enabled, by including an SDP 'extmap' attribute <a href="#RFC5285">[RFC5285]</a>, with an 'urn:ietf:params:rtp- hdrext:sdes:mid' URI value, in each bundled RTP-based "m=" section in every offer and answer.  </li>
  <li>A given SSRC MUST NOT transmit RTP packets using payload types that originate from different bundled "m=" sections.  </li>
</ul>

<p> </p>
<p id="rfc.section.10.1.p.5">NOTE: The last bullet above is to avoid sending multiple media types from the same SSRC. If transmission of multiple media types are done with time overlap, RTP and RTCP fail to function. Even if done in proper sequence this causes RTP Timestamp rate switching issues <a href="#RFC7160">[RFC7160]</a>. However, once an SSRC has left the RTP session (by sending an RTCP BYE packet), that SSRC can be reused by another source (possibly associated with a different bundled "m=" section) after a delay of 5 RTCP reporting intervals (the delay is to ensure the SSRC has timed out, in case the RTCP BYE packet was lost <a href="#RFC3550">[RFC3550]</a>).  </p>
<h1 id="rfc.section.10.1.1"><a href="#rfc.section.10.1.1">10.1.1.</a> <a href="#sec-rtp-sessions-pt" id="sec-rtp-sessions-pt">Payload Type (PT) Value Reuse</a></h1>
<p id="rfc.section.10.1.1.p.1">Multiple bundled "m=" sections might represent RTP based media. As all RTP based media specified by a BUNDLE group belong to the same RTP session, in order for a given payload type value to be used inside more than one bundled "m=" section, all codecs associated with the payload type number MUST share an identical codec configuration. This means that the codecs MUST share the same media type, encoding name, clock rate and any parameter that can affect the codec configuration and packetization. <a href="#I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</a> lists SDP attributes, whose attribute values must be identical for all codecs that use the same payload type value.  </p>
<h1 id="rfc.section.10.2"><a href="#rfc.section.10.2">10.2.</a> <a href="#sec-rtp-pt" id="sec-rtp-pt">Associating RTP/RTCP Streams With Correct SDP Media Description</a></h1>
<p id="rfc.section.10.2.p.1">As described in <a href="#RFC3550">[RFC3550]</a>, RTP/RTCP packets are associated with RTP streams <a href="#RFC7656">[RFC7656]</a>. Each RTP stream is identified by an SSRC value, and each RTP/RTCP packet carries an SSRC value that is used to associate the packet with the correct RTP stream (an RTCP packet can carry multiple SSRC values, and might therefore be associated with multiple RTP streams).  </p>
<p id="rfc.section.10.2.p.2">In order to be able to process received RTP/RTCP packets correctly it must be possible to associate an RTP stream with the correct "m=" section, as the "m=" section and SDP attributes in the "m=" section contain information needed to process the packets.  </p>
<p id="rfc.section.10.2.p.3">As all RTP streams associated with a BUNDLE group are using the same transport for sending and receiving RTP/RTCP packets, the transport cannot be used to associate an RTP stream with the correct "m=" section. In addition, multiple RTP streams might be associated with the same "m=" section.  </p>
<p id="rfc.section.10.2.p.4">Also, as described in [<a href="#sec-rtp-sessions-pt">Section 10.1.1</a>], the same payload type value might be used by multiple RTP streams, in which case the payload type value cannot be used to associate an RTP stream with the correct "m=" section.  </p>
<p id="rfc.section.10.2.p.5">An offerer and answerer can inform each other which SSRC values they will use for an RTP stream by using the SDP 'ssrc' attribute <a href="#RFC5576">[RFC5576]</a>. However, an offerer will not know which SSRC values the answerer will use until the offerer has received the answer providing that information.  Due to this, before the offerer has received the answer, the offerer will not be able to associate an RTP stream with the correct "m=" section using the SSRC value associated with the RTP stream. In addition, the offerer and answerer may start using new SSRC values mid-session, without informing each other using the SDP 'ssrc' attribute.  </p>
<p id="rfc.section.10.2.p.6">In order for an offerer and answerer to always be able to associate an RTP stream with the correct "m=" section, the offerer and answerer using the BUNDLE extension MUST support the mechanism defined in <a href="#sec-receiver-id">Section 14</a>, where the offerer and answerer insert the identification-tag (provided by the remote peer) associated with an "m=" section in RTP and RTCP packets associated with a BUNDLE group.  </p>
<p id="rfc.section.10.2.p.7">The mapping from an SSRC to an identification-tag is carried in RTCP SDES packets or in RTP header extensions (<a href="#sec-receiver-id">Section 14</a>). Since a compound RTCP packet can contain multiple RTCP SDES packets, and each RTCP SDES packet can contain multiple chunks, an RTCP packet can contain several SSRC to identification-tag mappings. The offerer and answerer maintain tables mapping RTP streams identified by SSRC, to &#226;&#128;&#156;m=&#226;&#128;&#156; lines identified by the identification-tag. These tables are updated each time an RTP/RTCP packet containing one or more mappings from SSRC to identification-tag is received. Note that the mapping from SSRC to identification-tag can change at any time during an RTP session.  </p>
<p id="rfc.section.10.2.p.8">Once an offerer or answerer recieve an RTP/RTCP packet carrying an identification-tag and an SSRC value (an RTCP packet might carry multiple identification-tags and SSRC values), it creates a mapping between the SSRC value and the identification-tag, in order to associate the RTP stream with the "m=" section associated with the identification-tag. Note that the mapping might change mid-session if, for a given SSRC value, a different identification-tag is provided in an RTP/RTCP packet.  </p>
<p id="rfc.section.10.2.p.9">If an offerer and answerer is not able to associate an RTP stream with an "m=" section (using the mechanisms described in this section, or using other appropriate mechanism, e.g, based on the payload type value if it is unique to a single "m=" section), it MUST either drop the RTP/RTCP packets associated with the RTP stream, or process them in an application specific manner, once non-stream specific processing (e.g., related to congestion control) of the packets has occurred. Note that RTCP packets can report on multiple RTP streams.  </p>
<h1 id="rfc.section.10.3"><a href="#rfc.section.10.3">10.3.</a> <a href="#sec-rtprtcp-mux" id="sec-rtprtcp-mux">RTP/RTCP Multiplexing</a></h1>
<p id="rfc.section.10.3.p.1">Within a BUNDLE group, the offerer and answerer MUST enable RTP/RTCP multiplexing <a href="#RFC5761">[RFC5761]</a> for the RTP-based media specified by the BUNDLE group.  </p>
<p id="rfc.section.10.3.p.2">When RTP/RTCP multiplexing is enabled, the same 5-tuple will be used for sending all RTP and RTCP packets for "m=" sections in the negotiated BUNDLE group.  The same 5-tuple MAY be used for receiving RTP packets and RTCP packets, depending on whether symmetric RTP <a href="#RFC4961">[RFC4961]</a> is used.  </p>
<h1 id="rfc.section.10.3.1"><a href="#rfc.section.10.3.1">10.3.1.</a> <a href="#sec-rtprtcp-mux-oa" id="sec-rtprtcp-mux-oa">SDP Offer/Answer Procedures</a></h1>
<p id="rfc.section.10.3.1.p.1">This section describes how an offerer and answerer use the SDP 'rtcp-mux' attribute <a href="#RFC5761">[RFC5761]</a> and the SDP 'rtcp-mux-only' attribute <a href="#I-D.ietf-mmusic-mux-exclusive">[I-D.ietf-mmusic-mux-exclusive]</a> to negotiate usage of RTP/RTCP multiplexing for RTP-based media specified by a BUNDLE group.  </p>
<p id="rfc.section.10.3.1.p.2">The procedures in this section only apply to RTP-based "m=" sections.  </p>
<h1 id="rfc.section.10.3.1.1"><a href="#rfc.section.10.3.1.1">10.3.1.1.</a> <a href="#sec-rtprtcp-mux-oa-ino" id="sec-rtprtcp-mux-oa-ino">Generating the Initial SDP Offer</a></h1>
<p id="rfc.section.10.3.1.1.p.1">When an offerer generates an initial offer, the offerer MUST include an SDP 'rtcp-mux' attribute <a href="#RFC5761">[RFC5761]</a> in each bundled RTP-based "m=" section in the offer, including any bundle-only "m=" section. In addition, the offerer MUST include an SDP 'rtcp-mux-only' attribute <a href="#I-D.ietf-mmusic-mux-exclusive">[I-D.ietf-mmusic-mux-exclusive]</a> in each RTP-based bundle-only "m=" section, and MAY include an SDP 'rtcp-mux-only' attribute in other bundled RTP-based "m=" sections.  </p>
<p id="rfc.section.10.3.1.1.p.2">NOTE: Whether the offerer includes an SDP 'rtcp-mux-only' attribute in a bundled "m=" section or not depends on whether the offerer supports fallback to usage of a separate port for RTCP, in case the answerer removes the "m=" section from the BUNDLE group.  </p>
<p id="rfc.section.10.3.1.1.p.3">NOTE: If the offerer includes an SDP 'rtcp-mux' attribute in a bundled "m=" section, but does not include an SDP 'rtcp-mux-only' attribute in the "m=" section, the offerer can also include an SDP 'rtcp' attribute <a href="#RFC3605">[RFC3605]</a> with the "m=" section in order to provide a fallback port for RTCP, as described in <a href="#RFC5761">[RFC5761]</a>. However, the fallback port will only be used in case the answerer removes the "m=" section from the BUNDLE group.  </p>
<p id="rfc.section.10.3.1.1.p.4">In the offer that creates a BUNDLE group, a fallback for non-multiplexed RTCP MUST be provided for each bundled RTP-based "m=" section (excluding bundle-only "m=" sections).  </p>
<h1 id="rfc.section.10.3.1.2"><a href="#rfc.section.10.3.1.2">10.3.1.2.</a> <a href="#sec-rtprtcp-mux-oa-ans" id="sec-rtprtcp-mux-oa-ans">Generating the SDP Answer</a></h1>
<p id="rfc.section.10.3.1.2.p.1">When an answerer generates an answer, if the answerer accepts one or more RTP-based "m=" sections within a BUNDLE group, the answerer MUST enable usage of RTP/RTCP multiplexing. The answerer MUST include an SDP "rtcp-mux" attribute in each RTP-based "m=" section in the answer. In addition, if an "m=" section in the corresponding offer contained an SDP "rtcp-mux-only" attribute, the answerer MUST include an SDP "rtcp-mux-only" attribute in the "m=" section in the answer.  </p>
<p id="rfc.section.10.3.1.2.p.2">If an RTP-based "m=" section in the corresponding offer did not contain an SDP 'rtcp-mux' attribute, the answerer MUST remove the "m=" section from the BUNDLE group in the answer.  </p>
<p id="rfc.section.10.3.1.2.p.3">If an RTP-based "m=" section in the corresponding offer contained an SDP "rtcp-mux-only" attribute, and if the answerer moves the "m=" section out of the BUNDLE group in the answer <a href="#sec-sdp-oa-ans-mov">Section 8.3.1</a>, the answerer MUST still either enable RTP/RTCP multiplexing for the media associated with the "m=" section, or reject the "m=" section <a href="#sec-sdp-oa-ans-mov">Section 8.3.1</a>.  </p>
<p id="rfc.section.10.3.1.2.p.4">The answerer MUST NOT include an SDP 'rtcp' attribute in any bundled "m=" section in the answer. When RTCP multiplexing is used, this attribute is meaningless for an answer.  </p>
<h1 id="rfc.section.10.3.1.3"><a href="#rfc.section.10.3.1.3">10.3.1.3.</a> <a href="#sec-rtprtcp-mux-oa-pra" id="sec-rtprtcp-mux-oa-pra">Offerer Processing of the SDP Answer</a></h1>
<p id="rfc.section.10.3.1.3.p.1">When an offerer receives an answer, if the answerer has accepted the usage of RTP/RTCP multiplexing (see <a href="#sec-rtprtcp-mux-oa-ans">Section 10.3.1.2</a>), the answerer follows the procedures for RTP/RTCP multiplexing defined in <a href="#RFC5761">[RFC5761]</a>, using the negotiated BUNDLE transport.  </p>
<p id="rfc.section.10.3.1.3.p.2">NOTE: It is considered a protocol error if the answerer has not accepted the usage of RTP/RTCP multiplexing for RTP-based "m=" sections that the answerer included in the BUNDLE group.  </p>
<h1 id="rfc.section.10.3.1.4"><a href="#rfc.section.10.3.1.4">10.3.1.4.</a> <a href="#sec-rtprtcp-mux-oa-mod" id="sec-rtprtcp-mux-oa-mod">Modifying the Session</a></h1>
<p id="rfc.section.10.3.1.4.p.1">When an offerer generates a subsequent offer, for each RTP-based "m=" section that was previously added to the BUNDLE group the offerer MUST include an SDP 'rtcp-mux' attribute and an SDP 'rtcp-mux-only' attribute in the "m=" section in the same way it was previously done, unless the offerer wants to disable or remove the "m=" section from the BUNDLE group.  </p>
<p id="rfc.section.10.3.1.4.p.2">If the offerer wants to add a bundled RTP-based "m=" section to the BUNDLE group, it includes an SDP 'rtcp-mux' attribute and an SDP 'rtcp-mux-only' attribute in the "m=" section using the procedures in [<a href="#sec-rtprtcp-mux-oa-ino">Section 10.3.1.1</a>].  </p>
<h1 id="rfc.section.11"><a href="#rfc.section.11">11.</a> <a href="#sec-ice" id="sec-ice">ICE Considerations</a></h1>
<p id="rfc.section.11.p.1">This section describes how to use the BUNDLE grouping extension together with the Interactive Connectivity Establishment (ICE) mechanism <a href="#I-D.ietf-ice-rfc5245bis">[I-D.ietf-ice-rfc5245bis]</a>.  </p>
<p id="rfc.section.11.p.2">The generic procedures for negotiating usage of ICE using SDP, defined in <a href="#I-D.ietf-mmusic-ice-sip-sdp">[I-D.ietf-mmusic-ice-sip-sdp]</a>, also apply to usage of ICE with BUNDLE, with the following exceptions: </p>
<p/>

<ul>
  <li>When a BUNDLE group is negotiated, the ICE agent MUST only perform processing for one media stream representing the entire BUNDLE group, and one component within that media stream (given that RTCP multiplexing will also be used). This means that connectivity checks and keep-alives only need to be performed for the whole BUNDLE group, instead of per bundled "m=" section.  </li>
</ul>

<p> </p>
<p id="rfc.section.11.p.4">Support and usage of ICE mechanism together with the BUNDLE extension is OPTIONAL.  </p>
<p id="rfc.section.11.p.5">NOTE: ICE uses attributes in the TRANSPORT category, which are subject to the restrictions in <a href="#sec-sdp-oa-cat">Section 8.1</a>.  </p>
<h1 id="rfc.section.12"><a href="#rfc.section.12">12.</a> <a href="#sec-dtls" id="sec-dtls">DTLS Considerations</a></h1>
<p id="rfc.section.12.p.1">One or more media streams within a BUNDLE group might use the Datagram Transport Layer Security (DTLS) protocol <a href="#RFC6347">[RFC6347]</a> in order to encrypt the data, or to negotiate encryption keys if another encryption mechanism is used to encrypt media.  </p>
<p id="rfc.section.12.p.2">When DTLS is used within a BUNDLE group, the following rules apply: </p>

<ul>
  <li>There MUST only be one DTLS association <a href="#RFC6347">[RFC6347]</a> used by the BUNDLE transport.  </li>
  <li>Each usage of the DTLS association within the BUNDLE group MUST use the same mechanism for determining which endpoints (the offerer or answerer) become DTLS client and DTLS server.  </li>
  <li>Each usage of the DTLS association within the BUNDLE group MUST use the same mechanism for determining whether an offer or answer will trigger the establishment of a new DTLS association, or whether an existing DTLS association will be used.  </li>
  <li>If the DTLS client supports DTLS-SRTP <a href="#RFC5764">[RFC5764]</a> it MUST include the 'use_srtp' extension <a href="#RFC5764">[RFC5764]</a> in the DTLS ClientHello message <a href="#RFC5764">[RFC5764]</a>, The client MUST include the extension even if the usage of DTLS-SRTP is not negotiated as part of the multimedia session (e.g., SIP session <a href="#RFC3261">[RFC3261]</a>.  </li>
</ul>

<p> </p>
<p id="rfc.section.12.p.3">NOTE: The inclusion of the 'use_srtp' extension during the initial DTLS handshake ensures that a DTLS renegotiation will not be required in order to include the extension, in case DTLS-SRTP encrypted media is added to the BUNDLE group later during the multimedia session.  </p>
<h1 id="rfc.section.13"><a href="#rfc.section.13">13.</a> <a href="#sec-3264" id="sec-3264">Update to RFC 3264</a></h1>
<p id="rfc.section.13.p.1">This section replaces the text of the following sections of RFC 3264: </p>
<p/>

<ul>
  <li>Section 5.1 (Unicast Streams).</li>
  <li>Section 8.2 (Removing a Media Stream).</li>
  <li>Section 8.4 (Putting a Unicast Media Stream on Hold).</li>
</ul>

<p> </p>
<h1 id="rfc.section.13.1"><a href="#rfc.section.13.1">13.1.</a> <a href="#sec-3264-old-5_1" id="sec-3264-old-5_1">Original text of section 5.1 (2nd paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.1.p.1">For recvonly and sendrecv streams, the port number and address in the offer indicate where the offerer would like to receive the media stream. For sendonly RTP streams, the address and port number indirectly indicate where the offerer wants to receive RTCP reports.  Unless there is an explicit indication otherwise, reports are sent to the port number one higher than the number indicated.  The IP address and port present in the offer indicate nothing about the source IP address and source port of RTP and RTCP packets that will be sent by the offerer. A port number of zero in the offer indicates that the stream is offered but MUST NOT be used.  This has no useful semantics in an initial offer, but is allowed for reasons of completeness, since the answer can contain a zero port indicating a rejected stream (Section 6). Furthermore, existing streams can be terminated by setting the port to zero (Section 8). In general, a port number of zero indicates that the media stream is not wanted.  </p>
<h1 id="rfc.section.13.2"><a href="#rfc.section.13.2">13.2.</a> <a href="#sec-3264-new-5_1" id="sec-3264-new-5_1">New text replacing section 5.1 (2nd paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.2.p.1">For recvonly and sendrecv streams, the port number and address in the offer indicate where the offerer would like to receive the media stream. For sendonly RTP streams, the address and port number indirectly indicate where the offerer wants to receive RTCP reports.  Unless there is an explicit indication otherwise, reports are sent to the port number one higher than the number indicated. The IP address and port present in the offer indicate nothing about the source IP address and source port of RTP and RTCP packets that will be sent by the offerer. A port number of zero in the offer by default indicates that the stream is offered but MUST NOT be used, but an extension mechanism might specify different semantics for the usage of a zero port value.  Furthermore, existing streams can be terminated by setting the port to zero (Section 8). In general, a port number of zero by default indicates that the media stream is not wanted.  </p>
<h1 id="rfc.section.13.3"><a href="#rfc.section.13.3">13.3.</a> <a href="#sec-3264-old-8_2" id="sec-3264-old-8_2">Original text of section 8.2 (2nd paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.3.p.1">A stream that is offered with a port of zero MUST be marked with port zero in the answer. Like the offer, the answer MAY omit all attributes present previously, and MAY list just a single media format from amongst those in the offer.  </p>
<h1 id="rfc.section.13.4"><a href="#rfc.section.13.4">13.4.</a> <a href="#sec-3264-new-8_2" id="sec-3264-new-8_2">New text replacing section 8.2 (2nd paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.4.p.1">A stream that is offered with a port of zero MUST by default be marked with port zero in the answer, unless an extension mechanism, which specifies semantics for the usage of a non-zero port value, is used. If the stream is marked with port zero in the answer, the answer MAY omit all attributes present previously, and MAY list just a single media format from amongst those in the offer.  </p>
<h1 id="rfc.section.13.5"><a href="#rfc.section.13.5">13.5.</a> <a href="#sec-3264-old-8_4" id="sec-3264-old-8_4">Original text of section 8.4 (6th paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.5.p.1">RFC 2543 [10] specified that placing a user on hold was accomplished by setting the connection address to 0.0.0.0.  Its usage for putting a call on hold is no longer recommended, since it doesn't allow for RTCP to be used with held streams, doesn't work with IPv6, and breaks with connection oriented media.  However, it can be useful in an initial offer when the offerer knows it wants to use a particular set of media streams and formats, but doesn't know the addresses and ports at the time of the offer.  Of course, when used, the port number MUST NOT be zero, which would specify that the stream has been disabled.  An agent MUST be capable of receiving SDP with a connection address of 0.0.0.0, in which case it means that neither RTP nor RTCP should be sent to the peer.  </p>
<h1 id="rfc.section.13.6"><a href="#rfc.section.13.6">13.6.</a> <a href="#sec-3264-new-8_4" id="sec-3264-new-8_4">New text replacing section 8.4 (6th paragraph) of RFC 3264</a></h1>
<p id="rfc.section.13.6.p.1">RFC 2543 [10] specified that placing a user on hold was accomplished by setting the connection address to 0.0.0.0.  Its usage for putting a call on hold is no longer recommended, since it doesn't allow for RTCP to be used with held streams, doesn't work with IPv6, and breaks with connection oriented media. However, it can be useful in an initial offer when the offerer knows it wants to use a particular set of media streams and formats, but doesn't know the addresses and ports at the time of the offer. Of course, when used, the port number MUST NOT be zero, if it would specify that the stream has been disabled. However, an extension mechanism might specify different semantics of the zero port number usage. An agent MUST be capable of receiving SDP with a connection address of 0.0.0.0, in which case it means that neither RTP nor RTCP should be sent to the peer.  </p>
<h1 id="rfc.section.14"><a href="#rfc.section.14">14.</a> <a href="#sec-receiver-id" id="sec-receiver-id">RTP/RTCP extensions for identification-tag transport</a></h1>
<p id="rfc.section.14.p.1">SDP Offerers and Answerers <a href="#RFC3264">[RFC3264]</a> can uniquely identify "m=" sections with identification-tags within SDP Offers and Answers, using the procedures in <a href="#RFC5888">[RFC5888]</a>.  </p>
<p id="rfc.section.14.p.2">This section defines a new RTCP SDES item <a href="#RFC3550">[RFC3550]</a>, 'MID', which is used to carry identification-tags within RTCP SDES packets. This section also defines a new RTP SDES header extension <a href="#RFC7941">[RFC7941]</a>, which is used to carry the 'MID' RTCP SDES item in RTP packets.  </p>
<p id="rfc.section.14.p.3">The SDES item and RTP SDES header extension make it possible for a receiver to associate each RTP stream with with a specific "m=" section, which the receiver has identified with an identification-tag, even if those "m=" sections are part of the same RTP session.  The RTP SDES header extension also ensures that the media recipient gets the identification-tag upon receipt of the first decodable media and is able to associate the media with the correct application.  </p>
<p id="rfc.section.14.p.4">A media recipient informs the media sender about the identification-tag that identifies an "m=" section through the use of an 'mid' attribute <a href="#RFC5888">[RFC5888]</a>. The media sender then inserts the identification-tag in RTCP and RTP packets sent to the media recipient.  </p>
<p id="rfc.section.14.p.5">NOTE: This text above defines how identification-tags are carried in SDP Offers and Answers. The usage of other signalling protocols for carrying identification-tags is not prevented, but the usage of such protocols is outside the scope of this document.  </p>
<p><a href="#RFC3550">[RFC3550]</a> defines general procedures regarding the RTCP transmission interval. The RTCP MID SDES item SHOULD be sent in the first few RTCP packets sent after joining the session, and SHOULD be sent regularly thereafter. The exact number of RTCP packets in which this SDES item is sent is intentionally not specified here, as it will depend on the expected packet loss rate, the RTCP reporting interval, and the allowable overhead.  </p>
<p id="rfc.section.14.p.7">The RTP SDES header extension for carrying the 'MID' RTCP SDES SHOULD be included in some RTP packets at the start of the session and whenever the SSRC changes. It might also be useful to include the header extension in RTP packets that comprise access points in the media (e.g., with video I-frames). The exact number of RTP packets in which this header extension is sent is intentionally not specified here, as it will depend on expected packet loss rate and loss patterns, the overhead the application can tolerate, and the importance of immediate receipt of the identification-tag.  </p>
<p id="rfc.section.14.p.8">For robustness purposes, endpoints need to be prepared for situations where the reception of the identification-tag is delayed, and SHOULD NOT terminate sessions in such cases, as the identification-tag is likely to arrive soon.  </p>
<h1 id="rfc.section.14.1"><a href="#rfc.section.14.1">14.1.</a> <a href="#sec-receiver-id-sdes-item" id="sec-receiver-id-sdes-item">RTCP MID SDES Item</a></h1>
<pre>

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      MID=TBD  |     length    | identification-tag          ...
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          </pre>
<p id="rfc.section.14.1.p.1">The identification-tag payload is UTF-8 encoded, as in SDP.  </p>
<p id="rfc.section.14.1.p.2">The identification-tag is not zero terminated.  </p>
<p id="rfc.section.14.1.p.3">[RFC EDITOR NOTE: Please replace TBD with the assigned SDES identifier value.] </p>
<h1 id="rfc.section.14.2"><a href="#rfc.section.14.2">14.2.</a> <a href="#sec-receiver-id-rtp-he" id="sec-receiver-id-rtp-he">RTP SDES Header Extension For MID</a></h1>
<p id="rfc.section.14.2.p.1">The payload, containing the identification-tag, of the RTP SDES header extension element can be encoded using either the one-byte or two-byte header <a href="#RFC7941">[RFC7941]</a>. The identification-tag payload is UTF-8 encoded, as in SDP.  </p>
<p id="rfc.section.14.2.p.2">The identification-tag is not zero terminated. Note, that the set of header extensions included in the packet needs to be padded to the next 32-bit boundary using zero bytes <a href="#RFC5285">[RFC5285]</a>.  </p>
<p id="rfc.section.14.2.p.3">As the identification-tag is included in either an RTCP SDES item or an RTP SDES header extension, or both, there should be some consideration about the packet expansion caused by the identification-tag. To avoid Maximum Transmission Unit (MTU) issues for the RTP packets, the header extension's size needs to be taken into account when encoding the media.  </p>
<p id="rfc.section.14.2.p.4">It is recommended that the identification-tag is kept short. Due to the properties of the RTP header extension mechanism, when using the one-byte header, a tag that is 1-3 bytes will result in a minimal number of 32-bit words used for the RTP SDES header extension, in case no other header extensions are included at the same time. Note, do take into account that some single characters when UTF-8 encoded will result in multiple octets.  The identification-tag MUST NOT contain any user information, and applications SHALL avoid generating the identification-tag using a pattern that enables application identification.  </p>
<h1 id="rfc.section.15"><a href="#rfc.section.15">15.</a> <a href="#sec-receiver-id-iana" id="sec-receiver-id-iana">IANA Considerations</a></h1>
<h1 id="rfc.section.15.1"><a href="#rfc.section.15.1">15.1.</a> <a href="#sec-receiver-id-iana-sdes-item" id="sec-receiver-id-iana-sdes-item">New SDES item</a></h1>
<p id="rfc.section.15.1.p.1">[RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this document.] </p>
<p id="rfc.section.15.1.p.2">[RFC EDITOR NOTE: Please replace TBD with the assigned SDES identifier value.] </p>
<p id="rfc.section.15.1.p.3">This document adds the MID SDES item to the IANA "RTP SDES item types" registry as follows: </p>
<pre>

  Value:     TBD
  Abbrev.:   MID
  Name:      Media Identification
  Reference: RFCXXXX

        </pre>
<h1 id="rfc.section.15.2"><a href="#rfc.section.15.2">15.2.</a> <a href="#sec-receiver-id-iana-rtp-uri" id="sec-receiver-id-iana-rtp-uri">New RTP SDES Header Extension URI</a></h1>
<p id="rfc.section.15.2.p.1">[RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this document.] </p>
<p id="rfc.section.15.2.p.2">This document defines a new extension URI in the RTP SDES Compact Header Extensions sub-registry of the RTP Compact Header Extensions registry sub-registry, according to the following data: </p>
<pre>

  Extension URI: urn:ietf:params:rtp-hdrext:sdes:mid
  Description:   Media identification
  Contact:       christer.holmberg@ericsson.com
  Reference:     RFCXXXX

  The SDES item does not reveal privacy information about the users.
  It is simply used to associate RTP-based media with the correct SDP
  media description ("m=" section) in the SDP used to negotiate the media.

  The purpose of the extension is for the offerer to be able to
  associate received multiplexed RTP-based media before the offerer
  receives the associated SDP answer.

        </pre>
<h1 id="rfc.section.15.3"><a href="#rfc.section.15.3">15.3.</a> <a href="#sec-receiver-id-iana-sdp-attribute" id="sec-receiver-id-iana-sdp-attribute">New SDP Attribute</a></h1>
<p id="rfc.section.15.3.p.1">[RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this document.] </p>
<p id="rfc.section.15.3.p.2">This document defines a new SDP media-level attribute, 'bundle-only', according to the following data: </p>
<pre>

  Attribute name:     bundle-only
  Type of attribute:  media
  Subject to charset: No
  Purpose:            Request a media description to be accepted
                      in the answer only if kept within a BUNDLE
                      group by the answerer.
  Appropriate values: N/A
  Contact name:       Christer Holmberg
  Contact e-mail:     christer.holmberg@ericsson.com
  Reference:          RFCXXXX
  Mux category:       NORMAL

        </pre>
<h1 id="rfc.section.15.4"><a href="#rfc.section.15.4">15.4.</a> <a href="#sec-receiver-id-iana-sdp-group-semantics" id="sec-receiver-id-iana-sdp-group-semantics">New SDP Group Semantics</a></h1>
<p id="rfc.section.15.4.p.1">[RFC EDITOR NOTE: Please replace RFCXXXX with the RFC number of this document.] </p>
<p id="rfc.section.15.4.p.2">This document registers the following semantics with IANA in the "Semantics for the "group" SDP Attribute" subregistry (under the "Session Description Protocol (SDP) Parameters" registry: </p>
<pre>

    Semantics                              Token   Reference
    -------------------------------------  ------  ---------
    Media bundling                         BUNDLE  [RFCXXXX]

        </pre>
<h1 id="rfc.section.16"><a href="#rfc.section.16">16.</a> <a href="#sec-security" id="sec-security">Security Considerations</a></h1>
<p id="rfc.section.16.p.1">The security considerations defined in <a href="#RFC3264">[RFC3264]</a> and <a href="#RFC5888">[RFC5888]</a> apply to the BUNDLE extension. Bundling does not change which information flows over the network but only changes which transports that information is flowing on and thus has very little impact on the security of the RTP sessions.  </p>
<p id="rfc.section.16.p.2">When the BUNDLE extension is used, a single set of security credentials might be used for all media streams specified by a BUNDLE group.  </p>
<p id="rfc.section.16.p.3">When the BUNDLE extension is used, the number of SSRC values within a single RTP session increases, which increases the risk of SSRC collision. <a href="#RFC4568">[RFC4568]</a> describes how SSRC collision may weaken SRTP and SRTCP encryption in certain situations.  </p>
<h1 id="rfc.section.17"><a href="#rfc.section.17">17.</a> <a href="#sec-example-alt1" id="sec-example-alt1">Examples</a></h1>
<h1 id="rfc.section.17.1"><a href="#rfc.section.17.1">17.1.</a> <a href="#sec-example-add" id="sec-example-add">Example: Bundle Address Selection</a></h1>
<p id="rfc.section.17.1.p.1">The example below shows: </p>

<ul>
  <li>An offer, in which the offerer places a unique address/port combination in each bundled "m=" section within the BUNDLE group.</li>
  <li>An answer, in which the answerer selects the offerer BUNDLE address, and then selects its own BUNDLE transport address/port and places it in each bundled "m=" section within the BUNDLE group.</li>
</ul>

<p> </p>
<pre>

SDP Offer (1)

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 10002 RTP/AVP 31 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


SDP Answer (2)

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 20000 RTP/AVP 0
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


</pre>
<h1 id="rfc.section.17.2"><a href="#rfc.section.17.2">17.2.</a> <a href="#sec-example-bunrej" id="sec-example-bunrej">Example: BUNDLE Extension Rejected</a></h1>
<p id="rfc.section.17.2.p.1">The example below shows: </p>

<ul>
  <li>An offer, in which the offerer places a unique address/port combination in each bundled "m=" section within the BUNDLE group.</li>
  <li>An answer, in which the answerer rejects the offered BUNDLE group, and places a unique address/port in each "m=" section (following normal RFC 3264 procedures).</li>
</ul>

<p> </p>
<pre>

SDP Offer (1)

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 10002 RTP/AVP 31 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


SDP Answer (2)

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    m=audio 20000 RTP/AVP 0
    b=AS:200
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    m=video 30000 RTP/AVP 32
    b=AS:1000
    a=rtcp-mux
    a=rtpmap:32 MPV/90000


      </pre>
<h1 id="rfc.section.17.3"><a href="#rfc.section.17.3">17.3.</a> <a href="#sec-example-off-add" id="sec-example-off-add">Example: Offerer Adds A Media Description To A BUNDLE Group</a></h1>
<p id="rfc.section.17.3.p.1">The example below shows: </p>

<ul>
  <li>A subsequent offer (the BUNDLE group has been created as part of a previous offer/answer exchange), in which the offerer adds a new "m=" section, identified by the "zen" identification-tag, to a previously negotiated BUNDLE group, places a unique address/port in the added "m=" section, and places the previously selected BUNDLE transport address/port in each of the other bundled "m=" sections within the BUNDLE group.</li>
  <li>An answer, in which the answerer places its BUNDLE tranport address/port in each bundled "m=" section (including the newly added "m=" section) within the BUNDLE group.</li>
</ul>

<p> </p>
<pre>

SDP Offer (1)

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    a=group:BUNDLE foo bar zen
    m=audio 10000 RTP/AVP 0 8 97
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 10000 RTP/AVP 31 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 66
    b=AS:1000
    a=mid:zen
    a=rtcp-mux
    a=rtpmap:66 H261/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


SDP Answer (2)

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    a=group:BUNDLE foo bar zen
    m=audio 20000 RTP/AVP 0
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 66
    b=AS:1000
    a=mid:zen
    a=rtcp-mux
    a=rtpmap:66 H261/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid


</pre>
<h1 id="rfc.section.17.4"><a href="#rfc.section.17.4">17.4.</a> <a href="#sec-example-off-mov" id="sec-example-off-mov">Example: Offerer Moves A Media Description Out Of A BUNDLE Group</a></h1>
<p id="rfc.section.17.4.p.1">The example below shows: </p>

<ul>
  <li>A subsequent offer (the BUNDLE group has been created as part of a previous offer/answer transaction), in which the offerer moves a bundled "m=" section out of a BUNDLE group, places a unique address/port in the moved "m=" section, and places the previously selected BUNDLE transport address/port in each other bundled "m=" section within the BUNDLE group.</li>
  <li>An answer, in which the answerer moves the "m=" section out of the BUNDLE group, places a unique address/port in the moved "m=" section, and places its BUNDLE transport address/port in each of the remaining bundled "m=" sections within the BUNDLE group.</li>
</ul>

<p> </p>
<pre>

SDP Offer (1)

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 10000 RTP/AVP 31 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 50000 RTP/AVP 66
    b=AS:1000
    a=mid:zen
    a=rtcp-mux
    a=rtpmap:66 H261/90000


SDP Answer (2)

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 20000 RTP/AVP 0
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 60000 RTP/AVP 66
    b=AS:1000
    a=mid:zen
    a=rtcp-mux
    a=rtpmap:66 H261/90000


</pre>
<h1 id="rfc.section.17.5"><a href="#rfc.section.17.5">17.5.</a> <a href="#sec-example-off-dis" id="sec-example-off-dis">Example: Offerer Disables A Media Description Within A BUNDLE Group</a></h1>
<p id="rfc.section.17.5.p.1">The example below shows: </p>

<ul>
  <li>A subsequent offer (the BUNDLE group has been created as part of a previous offer/answer transaction), in which the offerer disables a bundled "m=" section within a BUNDLE group, assigns a zero port number to the disabled "m=" section, and places the previously selected BUNDLE transport address/port in each of the other bundled "m=" sections within the BUNDLE group.</li>
  <li>An answer, in which the answerer moves the disabled "m=" section out of the BUNDLE group, assigns a zero port value to the disabled "m=" section, and places its BUNDLE transport address/port in each of the remaining bundled "m=" sections within the BUNDLE group.</li>
</ul>

<p> </p>
<pre>

SDP Offer (1)

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 10000 RTP/AVP 0 8 97
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=rtpmap:8 PCMA/8000
    a=rtpmap:97 iLBC/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 10000 RTP/AVP 31 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:31 H261/90000
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 0 RTP/AVP 66
    a=mid:zen
    a=rtpmap:66 H261/90000


SDP Answer (2)

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    a=group:BUNDLE foo bar
    m=audio 20000 RTP/AVP 0
    b=AS:200
    a=mid:foo
    a=rtcp-mux
    a=rtpmap:0 PCMU/8000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 20000 RTP/AVP 32
    b=AS:1000
    a=mid:bar
    a=rtcp-mux
    a=rtpmap:32 MPV/90000
    a=extmap 1 urn:ietf:params:rtp-hdrext:sdes:mid
    m=video 0 RTP/AVP 66
    a=mid:zen
    a=rtpmap:66 H261/90000


      </pre>
<h1 id="rfc.section.18"><a href="#rfc.section.18">18.</a> <a href="#sec-acks" id="sec-acks">Acknowledgements</a></h1>
<p id="rfc.section.18.p.1">The usage of the SDP grouping extension for negotiating bundled media is based on a similar alternatives proposed by Harald Alvestrand and Cullen Jennings. The BUNDLE extension described in this document is based on the different alternative proposals, and text (e.g., SDP examples) have been borrowed (and, in some cases, modified) from those alternative proposals.  </p>
<p id="rfc.section.18.p.2">The SDP examples are also modified versions from the ones in the Alvestrand proposal.  </p>
<p id="rfc.section.18.p.3">Thanks to Paul Kyzivat, Martin Thomson, Flemming Andreasen, Thomas Stach, Ari Keranen, Adam Roach, Christian Groves, Roman Shpount, Suhas Nandakumar, Nils Ohlmeier, Jens Guballa, Raju Makaraju and Justin Uberti for reading the text, and providing useful feedback.  </p>
<p id="rfc.section.18.p.4">Thanks to Magnus Westerlund, Colin Perkins and Jonathan Lennox for providing help and text on the RTP/RTCP procedures.  </p>
<p id="rfc.section.18.p.5">Thanks to Spotify for providing music for the countless hours of document editing.  </p>
<h1 id="rfc.section.19"><a href="#rfc.section.19">19.</a> Change Log</h1>
<p id="rfc.section.19.p.1">[RFC EDITOR NOTE: Please remove this section when publishing]</p>
<p id="rfc.section.19.p.2">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-35 </p>

<ul>
  <li>Editorial changes on RTP streaming mapping section based on comments from Colin Perkins.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.3">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-34 </p>

<ul>
  <li>RTP streams, instead of RTP packets, are associated with m- lines.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.4">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-33 </p>

<ul>
  <li>Editorial changes based on comments from Eric Rescorla and Cullen Jennings:</li>
  <li>- Changes regarding usage of RTP/RTCP multiplexing attributes.</li>
  <li>- Additional text regarding associating RTP/RTCP packets with SDP m- lines.</li>
  <li>- Reference correction.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.5">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-32 </p>

<ul>
  <li>Editorial changes based on comments from Eric Rescorla and Cullen Jennings:</li>
  <li>- Justification for mechanism added to Introduction.</li>
  <li>- Clarify that the order of m- lines in the group:BUNDLE attribute does not have to be the same as the order in which the m- lines are listed in the SDP.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.6">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-31 </p>

<ul>
  <li>Editorial changes based on GitHub Pull requests by Martin Thomson:</li>
  <li>- https://github.com/cdh4u/draft-sdp-bundle/pull/2</li>
  <li>- https://github.com/cdh4u/draft-sdp-bundle/pull/1</li>
  <li>Editorial change based on comment from Diederick Huijbers (9th July 2016).</li>
  <li>Changes based on comments from Flemming Andreasen (21st June 2016):</li>
  <li>- Mux category for SDP bundle-only attribute added.</li>
  <li>- Mux category considerations editorial clarification.</li>
  <li>- Editorial changes.</li>
  <li>RTP SDES extension according to draft-ietf-avtext-sdes-hdr-ext.</li>
  <li>Note whether Design Considerations appendix is to be kept removed:</li>
  <li>- Appendix is kept within document.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.7">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-30 </p>

<ul>
  <li>Indicating in the Abstract and Introduction that the document updates RFC 3264.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.8">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-29 </p>

<ul>
  <li>Change based on WGLC comment from Colin Perkins.</li>
  <li>- Clarify that SSRC can be reused by another source after a delay of 5 RTCP reporting intervals.</li>
  <li>Change based on WGLC comment from Alissa Cooper.</li>
  <li>- IANA registry name fix.</li>
  <li>- Additional IANA registration information added.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.9">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-28 </p>

<ul>
  <li>- Alignment with exclusive mux procedures.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.10">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-27 </p>

<ul>
  <li>- Yet another terminology change.</li>
  <li>- Mux category considerations added.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.11">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-26 </p>

<ul>
  <li>- ICE considerations modified: ICE-related SDP attributes only added to the bundled m- line representing the selected BUNDLE address.</li>
  <li>- Reference to draft-ietf-mmusic-ice-sip-sdp added.</li>
  <li>- Reference to RFC 5245 replaced with reference to draft-ietf-ice-rfc5245bis.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.12">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-25 </p>

<ul>
  <li>- RTP/RTCP mux procedures updated with exclusive RTP/RTCP mux considerations.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.13">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-24 </p>

<ul>
  <li>- Reference and procedures associated with exclusive RTP/RTCP mux added</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.14">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-23 </p>

<ul>
  <li>- RTCP-MUX mandatory for bundled RTP m- lines</li>
  <li>- Editorial fixes based on comments from Flemming Andreasen</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.15">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-22 </p>

<ul>
  <li>- Correction of Ari's family name</li>
  <li>- Editorial fixes based on comments from Thomas Stach</li>
  <li>- RTP/RTCP correction based on comment from Magnus Westerlund</li>
  <li>-- http://www.ietf.org/mail-archive/web/mmusic/current/msg14861.html</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.16">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-21 </p>

<ul>
  <li>- Correct based on comment from Paul Kyzivat</li>
  <li>-- 'received packets' replaced with 'received data'</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.17">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-20 </p>

<ul>
  <li>- Clarification based on comment from James Guballa</li>
  <li>- Clarification based on comment from Flemming Andreasen</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.18">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-19 </p>

<ul>
  <li>- DTLS Considerations section added.</li>
  <li>- BUNDLE semantics added to the IANA Considerations</li>
  <li>- Changes based on WGLC comments from Adam Roach</li>
  <li>-- http://www.ietf.org/mail-archive/web/mmusic/current/msg14673.html</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.19">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-18 </p>

<ul>
  <li>- Changes based on agreements at IETF#92</li>
  <li>-- BAS Offer removed, based on agreement at IETF#92.</li>
  <li>-- Procedures regarding usage of SDP "b=" line is replaced with a reference to to draft-ietf-mmusic-sdp-mux-attributes.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.20">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-17 </p>

<ul>
  <li>- Editorial changes based on comments from Magnus Westerlund.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.21">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-16 </p>

<ul>
  <li>- Modification of RTP/RTCP multiplexing section, based on comments from Magnus Westerlund.</li>
  <li>- Reference updates.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.22">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-15 </p>

<ul>
  <li>- Editorial fix.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.23">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-14 </p>

<ul>
  <li>- Editorial changes.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.24">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-13 </p>

<ul>
  <li>Changes to allow a new suggested offerer BUNDLE address to be assigned to each bundled m- line.</li>
  <li>Changes based on WGLC comments from Paul Kyzivat</li>
  <li>- Editorial fixes</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.25">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-12 </p>

<ul>
  <li>Usage of SDP 'extmap' attribute added</li>
  <li>SDP 'bundle-only' attribute scoped with "m=" sections with a zero port value</li>
  <li>Changes based on WGLC comments from Thomas Stach</li>
  <li>- ICE candidates not assigned to bundle-only m- lines with a zero port value</li>
  <li>- Editorial changes</li>
  <li>Changes based on WGLC comments from Colin Perkins</li>
  <li>- Editorial changes:</li>
  <li>-- "RTP SDES item" -&gt; "RTCP SDES item"</li>
  <li>-- "RTP MID SDES item" -&gt; "RTCP MID SDES item"</li>
  <li>- Changes in section 10.1.1:</li>
  <li>-- "SHOULD NOT" -&gt; "MUST NOT"</li>
  <li>-- Additional text added to the Note</li>
  <li>- Change to section 13.2:</li>
  <li>-- Clarify that mid value is not zero terminated</li>
  <li>- Change to section 13.3:</li>
  <li>-- Clarify that mid value is not zero terminated</li>
  <li>-- Clarify padding</li>
  <li>Changes based on WGLC comments from Paul Kyzivat</li>
  <li>- Editorial changes:</li>
  <li>Changes based on WGLC comments from Jonathan Lennox</li>
  <li>- Editorial changes:</li>
  <li>- Defintion of SDP bundle-only attribute alligned with structure in 4566bis draft</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.26">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-11 </p>

<ul>
  <li>Editorial corrections based on comments from Harald Alvestrand.</li>
  <li>Editorial corrections based on comments from Cullen Jennings.</li>
  <li>Reference update (RFC 7160).</li>
  <li>Clarification about RTCP packet sending when RTP/RTCP multiplexing is not used (http://www.ietf.org/mail-archive/web/mmusic/current/msg13765.html).</li>
  <li>Additional text added to the Security Considerations.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.27">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-10 </p>

<ul>
  <li>SDP bundle-only attribute added to IANA Considerations.</li>
  <li>SDES item and RTP header extension added to Abstract and Introduction.</li>
  <li>Modification to text updating section 8.2 of RFC 3264.</li>
  <li>Reference corrections.</li>
  <li>Editorial corrections.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.28">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-09 </p>

<ul>
  <li>Terminology change: "bundle-only attribute assigned to m= line" to "bundle-only attribute associated with m= line".</li>
  <li>Editorial corrections.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.29">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-08 </p>

<ul>
  <li>Editorial corrections.</li>
  <li>- "of"-&gt;"if" (8.3.2.5).</li>
  <li>- "optional"-&gt;"OPTIONAL" (9.1).</li>
  <li>- Syntax/ABNF for 'bundle-only' attribute added.</li>
  <li>- SDP Offer/Answer sections merged.</li>
  <li>- 'Request new offerer BUNDLE address' section added</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.30">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-07 </p>

<ul>
  <li>OPEN ISSUE regarding Receiver-ID closed.</li>
  <li>- RTP MID SDES Item.</li>
  <li>- RTP MID Header Extension.</li>
  <li>OPEN ISSUE regarding insertion of SDP 'rtcp' attribute in answers closed.</li>
  <li>- Indicating that, when rtcp-mux is used, the answerer MUST NOT include an 'rtcp' attribute in the answer, based on the procedures in section 5.1.3 of RFC 5761.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.31">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-06 </p>

<ul>
  <li>Draft title changed.</li>
  <li>Added "SDP" to section names containing "Offer" or "Answer".</li>
  <li>Editorial fixes based on comments from Paul Kyzivat (http://www.ietf.org/mail-archive/web/mmusic/current/msg13314.html).</li>
  <li>Editorial fixed based on comments from Colin Perkins (http://www.ietf.org/mail-archive/web/mmusic/current/msg13318.html).</li>
  <li>- Removed text about extending BUNDLE to allow multiple RTP sessions within a BUNDLE group.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.32">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-05 </p>

<ul>
  <li>Major re-structure of SDP Offer/Answer sections, to align with RFC 3264 structure.</li>
  <li>Additional definitions added.</li>
  <li>- Shared address.</li>
  <li>- Bundled "m=" section.</li>
  <li>- Bundle-only "m=" section.</li>
  <li>- Offerer suggested BUNDLE mid.</li>
  <li>- Answerer selected BUNDLE mid.</li>
  <li>Q6 Closed (IETF#88): An Offerer MUST NOT assign a shared address to multiple "m=" sections until it has received an SDP Answer indicating support of the BUNDLE extension.</li>
  <li>Q8 Closed (IETF#88): An Offerer can, before it knows whether the Answerer supports the BUNDLE extension, assign a zero port value to a 'bundle-only' "m=" section.</li>
  <li>SDP 'bundle-only' attribute section added.</li>
  <li>Connection data nettype/addrtype restrictions added.</li>
  <li>RFC 3264 update section added.</li>
  <li>Indicating that a specific payload type value can be used in multiple "m=" sections, if the value represents the same codec configuration in each "m=" section.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.33">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-04 </p>

<ul>
  <li>Updated Offerer procedures (http://www.ietf.org/mail-archive/web/mmusic/current/msg12293.html).</li>
  <li>Updated Answerer procedures (http://www.ietf.org/mail-archive/web/mmusic/current/msg12333.html).</li>
  <li>Usage of SDP 'bundle-only' attribute added.</li>
  <li>Reference to Trickle ICE document added.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.34">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-02 </p>

<ul>
  <li>Mechanism modified, to be based on usage of SDP Offers with both different and identical port number values, depending on whether it is known if the remote endpoint supports the extension.</li>
  <li>Cullen Jennings added as co-author.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.35">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-01 </p>

<ul>
  <li>No changes. New version due to expiration.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.36">Changes from draft-ietf-mmusic-sdp-bundle-negotiation-00 </p>

<ul>
  <li>No changes. New version due to expiration.</li>
</ul>

<p> </p>
<p id="rfc.section.19.p.37">Changes from draft-holmberg-mmusic-sdp-multiplex-negotiation-00 </p>

<ul>
  <li>Draft name changed.</li>
  <li>Harald Alvestrand added as co-author.</li>
  <li>"Multiplex" terminology changed to "bundle".</li>
  <li>Added text about single versus multiple RTP Sessions.</li>
  <li>Added reference to RFC 3550.</li>
</ul>

<p> </p>
<h1 id="rfc.references"><a href="#rfc.references">20.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">20.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3264">[RFC3264]</b>
      </td>
      <td class="top"><a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, DOI 10.17487/RFC3264, June 2002.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3550">[RFC3550]</b>
      </td>
      <td class="top"><a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, DOI 10.17487/RFC3550, July 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3605">[RFC3605]</b>
      </td>
      <td class="top"><a>Huitema, C.</a>, "<a href="http://tools.ietf.org/html/rfc3605">Real Time Control Protocol (RTCP) attribute in Session Description Protocol (SDP)</a>", RFC 3605, DOI 10.17487/RFC3605, October 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4566">[RFC4566]</b>
      </td>
      <td class="top"><a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, DOI 10.17487/RFC4566, July 2006.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4961">[RFC4961]</b>
      </td>
      <td class="top"><a>Wing, D.</a>, "<a href="http://tools.ietf.org/html/rfc4961">Symmetric RTP / RTP Control Protocol (RTCP)</a>", BCP 131, RFC 4961, DOI 10.17487/RFC4961, July 2007.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5245">[RFC5245]</b>
      </td>
      <td class="top"><a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, DOI 10.17487/RFC5245, April 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5285">[RFC5285]</b>
      </td>
      <td class="top"><a>Singer, D.</a> and <a>H. Desineni</a>, "<a href="http://tools.ietf.org/html/rfc5285">A General Mechanism for RTP Header Extensions</a>", RFC 5285, DOI 10.17487/RFC5285, July 2008.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5761">[RFC5761]</b>
      </td>
      <td class="top"><a>Perkins, C.</a> and <a>M. Westerlund</a>, "<a href="http://tools.ietf.org/html/rfc5761">Multiplexing RTP Data and Control Packets on a Single Port</a>", RFC 5761, DOI 10.17487/RFC5761, April 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5764">[RFC5764]</b>
      </td>
      <td class="top"><a>McGrew, D.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5764">Datagram Transport Layer Security (DTLS) Extension to Establish Keys for the Secure Real-time Transport Protocol (SRTP)</a>", RFC 5764, DOI 10.17487/RFC5764, May 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5888">[RFC5888]</b>
      </td>
      <td class="top"><a>Camarillo, G.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc5888">The Session Description Protocol (SDP) Grouping Framework</a>", RFC 5888, DOI 10.17487/RFC5888, June 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6347">[RFC6347]</b>
      </td>
      <td class="top"><a>Rescorla, E.</a> and <a>N. Modadugu</a>, "<a href="http://tools.ietf.org/html/rfc6347">Datagram Transport Layer Security Version 1.2</a>", RFC 6347, DOI 10.17487/RFC6347, January 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7656">[RFC7656]</b>
      </td>
      <td class="top"><a>Lennox, J.</a>, <a>Gross, K.</a>, <a>Nandakumar, S.</a>, <a>Salgueiro, G.</a> and <a>B. Burman</a>, "<a href="http://tools.ietf.org/html/rfc7656">A Taxonomy of Semantics and Mechanisms for Real-Time Transport Protocol (RTP) Sources</a>", RFC 7656, DOI 10.17487/RFC7656, November 2015.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7941">[RFC7941]</b>
      </td>
      <td class="top"><a>Westerlund, M.</a>, <a>Burman, B.</a>, <a>Even, R.</a> and <a>M. Zanaty</a>, "<a href="http://tools.ietf.org/html/rfc7941">RTP Header Extension for the RTP Control Protocol (RTCP) Source Description Items</a>", RFC 7941, DOI 10.17487/RFC7941, August 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-ice-rfc5245bis">[I-D.ietf-ice-rfc5245bis]</b>
      </td>
      <td class="top"><a>Keranen, A.</a>, <a>Holmberg, C.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/draft-ietf-ice-rfc5245bis-04">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal</a>", Internet-Draft draft-ietf-ice-rfc5245bis-04, June 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-mmusic-sdp-mux-attributes">[I-D.ietf-mmusic-sdp-mux-attributes]</b>
      </td>
      <td class="top"><a>Nandakumar, S.</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mmusic-sdp-mux-attributes-14">A Framework for SDP Attributes when Multiplexing</a>", Internet-Draft draft-ietf-mmusic-sdp-mux-attributes-14, September 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-mmusic-mux-exclusive">[I-D.ietf-mmusic-mux-exclusive]</b>
      </td>
      <td class="top"><a>Holmberg, C.</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mmusic-mux-exclusive-10">Indicating Exclusive Support of RTP/RTCP Multiplexing using SDP</a>", Internet-Draft draft-ietf-mmusic-mux-exclusive-10, August 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-mmusic-ice-sip-sdp">[I-D.ietf-mmusic-ice-sip-sdp]</b>
      </td>
      <td class="top"><a>Petit-Huguenin, M.</a>, <a>Keranen, A.</a> and <a>S. Nandakumar</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mmusic-ice-sip-sdp-10">Using Interactive Connectivity Establishment (ICE) with Session Description Protocol (SDP) offer/answer and Session Initiation Protocol (SIP)</a>", Internet-Draft draft-ietf-mmusic-ice-sip-sdp-10, July 2016.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">20.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="RFC3261">[RFC3261]</b>
      </td>
      <td class="top"><a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, DOI 10.17487/RFC3261, June 2002.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC4568">[RFC4568]</b>
      </td>
      <td class="top"><a>Andreasen, F.</a>, <a>Baugher, M.</a> and <a>D. Wing</a>, "<a href="http://tools.ietf.org/html/rfc4568">Session Description Protocol (SDP) Security Descriptions for Media Streams</a>", RFC 4568, DOI 10.17487/RFC4568, July 2006.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5576">[RFC5576]</b>
      </td>
      <td class="top"><a>Lennox, J.</a>, <a>Ott, J.</a> and <a>T. Schierl</a>, "<a href="http://tools.ietf.org/html/rfc5576">Source-Specific Media Attributes in the Session Description Protocol (SDP)</a>", RFC 5576, DOI 10.17487/RFC5576, June 2009.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7160">[RFC7160]</b>
      </td>
      <td class="top"><a>Petit-Huguenin, M.</a> and <a>G. Zorn</a>, "<a href="http://tools.ietf.org/html/rfc7160">Support for Multiple Clock Rates in an RTP Session</a>", RFC 7160, DOI 10.17487/RFC7160, April 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-mmusic-trickle-ice">[I-D.ietf-mmusic-trickle-ice]</b>
      </td>
      <td class="top"><a>Ivov, E.</a>, <a>Rescorla, E.</a> and <a>J. Uberti</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mmusic-trickle-ice-02">Trickle ICE: Incremental Provisioning of Candidates for the Interactive Connectivity Establishment (ICE) Protocol</a>", Internet-Draft draft-ietf-mmusic-trickle-ice-02, January 2015.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.appendix.A"><a href="#rfc.appendix.A">Appendix A.</a> Design Considerations</h1>
<p id="rfc.section.A.p.1">One of the main issues regarding the BUNDLE grouping extensions has been whether, in SDP Offers and SDP Answers, the same port value should be inserted in "m=" lines associated with a BUNDLE group, as the purpose of the extension is to negotiate the usage of a single transport for media specified by the "m=" sections. Issues with both approaches, discussed in the Appendix have been raised. The outcome was to specify a mechanism which uses SDP Offers with both different and identical port values.  </p>
<p id="rfc.section.A.p.2">Below are the primary issues that have been considered when defining the "BUNDLE" grouping extension: </p>

<ul>
  <li>1) Interoperability with existing UAs.</li>
  <li>2) Interoperability with intermediary B2BUA- and proxy entities.</li>
  <li>3) Time to gather, and the number of, ICE candidates.</li>
  <li>4) Different error scenarios, and when they occur.</li>
  <li>5) SDP Offer/Answer impacts, including usage of port number value zero.</li>
</ul>

<p> </p>
<h1 id="rfc.appendix.A.1"><a href="#rfc.appendix.A.1">A.1.</a> UA Interoperability</h1>
<p id="rfc.section.A.1.p.1">Consider the following SDP Offer/Answer exchange, where Alice sends an SDP Offer to Bob: </p>
<pre>

SDP Offer

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    m=audio 10000 RTP/AVP 97
    a=rtpmap:97 iLBC/8000
    m=video 10002 RTP/AVP 97
    a=rtpmap:97 H261/90000


</pre>
<pre>

SDP Answer

    v=0
    o=bob 2808844564 2808844564 IN IP4 biloxi.example.com
    s=
    c=IN IP4 biloxi.example.com
    t=0 0
    m=audio 20000 RTP/AVP 97
    a=rtpmap:97 iLBC/8000
    m=video 20002 RTP/AVP 97
    a=rtpmap:97 H261/90000

</pre>
<p id="rfc.section.A.1.p.2">RFC 4961 specifies a way of doing symmetric RTP but that is an a later invention to RTP and Bob can not assume that Alice supports RFC 4961. This means that Alice may be sending RTP from a different port than 10000 or 10002 - some implementation simply send the RTP from an ephemeral port. When Bob's endpoint receives an RTP packet, the only way that Bob knows if it should be passed to the video or audio codec is by looking at the port it was received on. This lead some SDP implementations to use the fact that each "m=" section had a different port number to use that port number as an index to find the correct m line in the SDP. As a result, some implementations that do support symmetric RTP and ICE still use a SDP data structure where SDP with "m=" sections with the same port such as: </p>
<pre>

SDP Offer

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    m=audio 10000 RTP/AVP 97
    a=rtpmap:97 iLBC/8000
    m=video 10000 RTP/AVP 98
    a=rtpmap:98 H261/90000


</pre>
<p id="rfc.section.A.1.p.3">will result in the second "m=" section being considered an SDP error because it has the same port as the first line.  </p>
<h1 id="rfc.appendix.A.2"><a href="#rfc.appendix.A.2">A.2.</a> Usage of port number value zero</h1>
<p id="rfc.section.A.2.p.1">In an SDP Offer or SDP Answer, the media specified by an "m=" section can be disabled/rejected by setting the port number value to zero. This is different from e.g., using the SDP direction attributes, where RTCP traffic will continue even if the SDP "inactive" attribute is indicated for the associated "m=" section.  </p>
<p id="rfc.section.A.2.p.2">If each "m=" section associated with a BUNDLE group would contain different port values, and one of those port values would be used for a BUNDLE address associated with the BUNDLE group, problems would occur if an endpoint wants to disable/reject the "m=" section associated with that port, by setting the port value to zero. After that, no "m=" section would contain the port value which is used for the BUNDLE address.  In addition, it is unclear what would happen to the ICE candidates associated with the "m=" section, as they are also used for the BUNDLE address.  </p>
<h1 id="rfc.appendix.A.3"><a href="#rfc.appendix.A.3">A.3.</a> B2BUA And Proxy Interoperability</h1>
<p id="rfc.section.A.3.p.1">Some back to back user agents may be configured in a mode where if the incoming call leg contains an SDP attribute the B2BUA does not understand, the B2BUA still generates that SDP attribute in the Offer for the outgoing call leg. Consider a B2BUA that did not understand the SDP "rtcp" attribute, defined in RFC 3605, yet acted this way.  Further assume that the B2BUA was configured to tear down any call where it did not see any RTCP for 5 minutes. In this case, if the B2BUA received an Offer like: </p>
<pre>

SDP Offer

    v=0
    o=alice 2890844526 2890844526 IN IP4 atlanta.example.com
    s=
    c=IN IP4 atlanta.example.com
    t=0 0
    m=audio 49170 RTP/AVP 0
    a=rtcp:53020


</pre>
<p id="rfc.section.A.3.p.2">It would be looking for RTCP on port 49172 but would not see any because the RTCP would be on port 53020 and after five minutes, it would tear down the call. Similarly, a B2BUA that did not understand BUNDLE yet put BUNDLE in it's offer may be looking for media on the wrong port and tear down the call. It is worth noting that a B2BUA that generated an Offer with capabilities it does not understand is not compliant with the specifications.  </p>
<h1 id="rfc.appendix.A.3.1"><a href="#rfc.appendix.A.3.1">A.3.1.</a> Traffic Policing</h1>
<p id="rfc.section.A.3.1.p.1">Sometimes intermediaries do not act as B2BUA, in the sense that they don't modify SDP bodies, nor do they terminate SIP dialogs.  Still, however, they may use SDP information (e.g., IP address and port) in order to control traffic gating functions, and to set traffic policing rules. There might be rules which will trigger a session to be terminated in case media is not sent or received on the ports retrieved from the SDP. This typically occurs once the session is already established and ongoing.  </p>
<h1 id="rfc.appendix.A.3.2"><a href="#rfc.appendix.A.3.2">A.3.2.</a> Bandwidth Allocation</h1>
<p id="rfc.section.A.3.2.p.1">Sometimes intermediaries do not act as B2BUA, in the sense that they don't modify SDP bodies, nor do they terminate SIP dialogs.  Still, however, they may use SDP information (e.g., codecs and media types) in order to control bandwidth allocation functions.  The bandwidth allocation is done per "m=" section, which means that it might not be enough if media specified by all "m=" sections try to use that bandwidth. That may either simply lead to bad user experience, or to termination of the call.  </p>
<h1 id="rfc.appendix.A.4"><a href="#rfc.appendix.A.4">A.4.</a> Candidate Gathering</h1>
<p id="rfc.section.A.4.p.1">When using ICE, a candidate needs to be gathered for each port. This takes approximately 20 ms extra for each extra "m=" section due to the NAT pacing requirements. All of this gather can be overlapped with other things while for exampe a web-page is loading to minimize the impact. If the client only wants to generate TURN or STUN ICE candidates for one of the "m=" lines and then use trickle ICE <a href="#I-D.ietf-mmusic-trickle-ice">[I-D.ietf-mmusic-trickle-ice]</a> to get the non host ICE candidates for the rest of the "m=" sections, it MAY do that and will not need any additional gathering time.  </p>
<p id="rfc.section.A.4.p.2">Some people have suggested a TURN extension to get a bunch of TURN allocations at once. This would only provide a single STUN result so in cases where the other end did not support BUNDLE, may cause more use of the TURN server but would be quick in the cases where both sides supported BUNDLE and would fall back to a successful call in the other cases.  </p>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Christer Holmberg</span> 
	  <span class="n hidden">
		<span class="family-name">Holmberg</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span class="vcardline">Hirsalantie 11</span>

	  <span class="vcardline">
		<span class="locality">Jorvas</span>,  
		<span class="region"></span>
		<span class="code">02420</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Harald Tveit Alvestrand</span> 
	  <span class="n hidden">
		<span class="family-name">Alvestrand</span>
	  </span>
	</span>
	<span class="org vcardline">Google</span>
	<span class="adr">
	  <span class="vcardline">Kungsbron 2</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">11122</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:harald@alvestrand.no">harald@alvestrand.no</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Cullen Jennings</span> 
	  <span class="n hidden">
		<span class="family-name">Jennings</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco</span>
	<span class="adr">
	  <span class="vcardline">400 3rd Avenue SW, Suite 350</span>

	  <span class="vcardline">
		<span class="locality">Calgary</span>,  
		<span class="region">AB</span> 
		<span class="code">T2P 4H2</span>
	  </span>
	  <span class="country-name vcardline">Canada</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fluffy@iii.ca">fluffy@iii.ca</a></span>

  </address>
</div>

</body>
</html>
